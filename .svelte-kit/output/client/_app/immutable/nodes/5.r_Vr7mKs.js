import{s as dt,f as o,a as y,g as r,h as C,R as k,c as S,d as p,j as a,i as H,v as l,Q as O,D as N,a1 as ut,K as et,E as ft,o as mt}from"../chunks/scheduler.XPdri8eM.js";import{S as ht,i as pt,b as vt,d as _t,m as bt,a as gt,t as yt,e as St}from"../chunks/index.feB5lYD0.js";import{m as Ct}from"../chunks/mqtt.esm.TiVwhrDm.js";function wt(i){let t,s,d;return{c(){t=o("input"),this.h()},l(e){t=r(e,"INPUT",{type:!0,placeholder:!0,class:!0}),this.h()},h(){a(t,"type","password"),a(t,"placeholder","Password"),a(t,"class","input")},m(e,n){H(e,t,n),O(t,i[2]),s||(d=N(t,"input",i[8]),s=!0)},p(e,n){n&4&&t.value!==e[2]&&O(t,e[2])},d(e){e&&p(t),s=!1,d()}}}function Tt(i){let t,s,d;return{c(){t=o("input"),this.h()},l(e){t=r(e,"INPUT",{type:!0,placeholder:!0,class:!0}),this.h()},h(){a(t,"type","text"),a(t,"placeholder","Password"),a(t,"class","input")},m(e,n){H(e,t,n),O(t,i[2]),s||(d=N(t,"input",i[7]),s=!0)},p(e,n){n&4&&t.value!==e[2]&&O(t,e[2])},d(e){e&&p(t),s=!1,d()}}}function xt(i){let t,s,d="Change Access Point Settings",e,n,h,g,w,U="New SSID",q,m,R,v,c,M="New Password",K,G,T,x,L,st="Show Password",W,D,X,E,nt="Save and Reboot",V,_,I,lt="Other",Y,P,at='<div><button type="submit" class="btn variant-ghost-secondary">Flash Demo</button></div>',Z,F,ot='<button type="submit" class="btn variant-ghost-secondary">Shutdown</button>',tt,rt;function it(u,f){return u[0]?Tt:wt}let j=it(i),b=j(i);return{c(){t=o("div"),s=o("h1"),s.textContent=d,e=y(),n=o("form"),h=o("div"),g=o("label"),w=o("span"),w.textContent=U,q=y(),m=o("input"),R=y(),v=o("label"),c=o("span"),c.textContent=M,K=y(),b.c(),G=y(),T=o("div"),x=o("label"),L=o("span"),L.textContent=st,W=y(),D=o("input"),X=y(),E=o("button"),E.textContent=nt,V=y(),_=o("div"),I=o("h1"),I.textContent=lt,Y=y(),P=o("form"),P.innerHTML=at,Z=y(),F=o("form"),F.innerHTML=ot,this.h()},l(u){t=r(u,"DIV",{class:!0});var f=C(t);s=r(f,"H1",{class:!0,"data-svelte-h":!0}),k(s)!=="svelte-14peu8b"&&(s.textContent=d),e=S(f),n=r(f,"FORM",{class:!0});var ct=C(n);h=r(ct,"DIV",{});var A=C(h);g=r(A,"LABEL",{class:!0});var B=C(g);w=r(B,"SPAN",{"data-svelte-h":!0}),k(w)!=="svelte-1ee3laz"&&(w.textContent=U),q=S(B),m=r(B,"INPUT",{type:!0,placeholder:!0,class:!0}),B.forEach(p),R=S(A),v=r(A,"LABEL",{class:!0});var $=C(v);c=r($,"SPAN",{"data-svelte-h":!0}),k(c)!=="svelte-18iafh"&&(c.textContent=M),K=S($),b.l($),$.forEach(p),G=S(A),T=r(A,"DIV",{class:!0});var z=C(T);x=r(z,"LABEL",{class:!0});var J=C(x);L=r(J,"SPAN",{"data-svelte-h":!0}),k(L)!=="svelte-7e9aks"&&(L.textContent=st),W=S(J),D=r(J,"INPUT",{type:!0,class:!0}),J.forEach(p),X=S(z),E=r(z,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),k(E)!=="svelte-18wdjvj"&&(E.textContent=nt),z.forEach(p),A.forEach(p),ct.forEach(p),f.forEach(p),V=S(u),_=r(u,"DIV",{class:!0});var Q=C(_);I=r(Q,"H1",{class:!0,"data-svelte-h":!0}),k(I)!=="svelte-1g1rqw6"&&(I.textContent=lt),Y=S(Q),P=r(Q,"FORM",{class:!0,"data-svelte-h":!0}),k(P)!=="svelte-7t4mud"&&(P.innerHTML=at),Z=S(Q),F=r(Q,"FORM",{class:!0,"data-svelte-h":!0}),k(F)!=="svelte-mf7vcj"&&(F.innerHTML=ot),Q.forEach(p),this.h()},h(){a(s,"class","font-light text-3xl pb-12"),a(m,"type","text"),a(m,"placeholder","SSID"),a(m,"class","input"),a(g,"class","label"),a(v,"class","label"),a(D,"type","checkbox"),a(D,"class","input w-5 h-5 rounded-none"),a(x,"class","label flex align-middle space-x-3"),a(E,"type","submit"),a(E,"class","btn variant-ghost-secondary"),a(T,"class","inline-flex align-middle space-x-5 mt-5"),a(n,"class","flex align-sub"),a(t,"class","card variant-soft p-16"),a(I,"class","font-light text-3xl pb-12"),a(P,"class","flex align-sub mb-4"),a(F,"class","flex align-sub"),a(_,"class","card variant-soft p-16 mt-10")},m(u,f){H(u,t,f),l(t,s),l(t,e),l(t,n),l(n,h),l(h,g),l(g,w),l(g,q),l(g,m),O(m,i[1]),l(h,R),l(h,v),l(v,c),l(v,K),b.m(v,null),l(h,G),l(h,T),l(T,x),l(x,L),l(x,W),l(x,D),D.checked=i[0],l(T,X),l(T,E),H(u,V,f),H(u,_,f),l(_,I),l(_,Y),l(_,P),l(_,Z),l(_,F),tt||(rt=[N(m,"input",i[6]),N(D,"change",i[9]),N(n,"submit",i[3]),N(P,"submit",ut(i[4])),N(F,"submit",ut(i[5]))],tt=!0)},p(u,[f]){f&2&&m.value!==u[1]&&O(m,u[1]),j===(j=it(u))&&b?b.p(u,f):(b.d(1),b=j(u),b&&(b.c(),b.m(v,null))),f&1&&(D.checked=u[0])},i:et,o:et,d(u){u&&(p(t),p(V),p(_)),b.d(),tt=!1,ft(rt)}}}function Dt(i,t,s){let d=!1,e="",n="";const h=Ct.connect("mqtt://localhost:9001");h.on("connect",()=>{console.log("Connected to MQTT broker")}),h.on("error",c=>{console.error("MQTT error:",c)});const g=async c=>{if(c.preventDefault(),!e||!n){alert("Please provide both SSID and password");return}try{const M="access_point/settings";h.publish(M,JSON.stringify({ssid:e,password:n})),console.log("Published SSID and password to MQTT topic:",M),s(1,e=""),s(2,n="")}catch(M){console.error("Error publishing MQTT message:",M),alert("Failed to publish MQTT message")}},w=async()=>{console.log("Flash Demo button clicked");try{console.log("Flash Demo button clicked");const c="device/flash";h.publish(c,"Start Flashing Demo"),console.log("Published Flash Demo command to MQTT topic:",c)}catch(c){console.error("Error triggering Flash Demo:",c),alert("Failed to trigger Flash Demo")}},U=async()=>{try{console.log("Shutdown button clicked");const c="device/shutdown";h.publish(c,"Start Flashing Demo")}catch(c){console.error("Error triggering Shutdown:",c),alert("Failed to trigger Shutdown")}};mt(()=>()=>{h.end()});function q(){e=this.value,s(1,e)}function m(){n=this.value,s(2,n)}function R(){n=this.value,s(2,n)}function v(){d=this.checked,s(0,d)}return[d,e,n,g,w,U,q,m,R,v]}class Et extends ht{constructor(t){super(),pt(this,t,Dt,xt,dt,{})}}function Pt(i){let t,s,d;return s=new Et({}),{c(){t=o("div"),vt(s.$$.fragment),this.h()},l(e){t=r(e,"DIV",{class:!0});var n=C(t);_t(s.$$.fragment,n),n.forEach(p),this.h()},h(){a(t,"class","container mx-auto")},m(e,n){H(e,t,n),bt(s,t,null),d=!0},p:et,i(e){d||(gt(s.$$.fragment,e),d=!0)},o(e){yt(s.$$.fragment,e),d=!1},d(e){e&&p(t),St(s)}}}class It extends ht{constructor(t){super(),pt(this,t,null,Pt,dt,{})}}export{It as component};
