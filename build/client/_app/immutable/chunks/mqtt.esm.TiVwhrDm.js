var tn=Object.defineProperty,Ks=Object.getOwnPropertyDescriptor,Qs=Object.getOwnPropertyNames,Ys=Object.prototype.hasOwnProperty,Ue=(e,o)=>()=>(e&&(o=e(e=0)),o),he=(e,o)=>()=>(o||e((o={exports:{}}).exports,o),o.exports),Pt=(e,o)=>{for(var t in o)tn(e,t,{get:o[t],enumerable:!0})},Gs=(e,o,t,l)=>{if(o&&typeof o=="object"||typeof o=="function")for(let h of Qs(o))!Ys.call(e,h)&&h!==t&&tn(e,h,{get:()=>o[h],enumerable:!(l=Ks(o,h))||l.enumerable});return e},Ie=e=>Gs(tn({},"__esModule",{value:!0}),e),$e,te=Ue(()=>{$e={deviceMemory:8,hardwareConcurrency:8,language:"en-US"}}),Te={};Pt(Te,{_debugEnd:()=>pi,_debugProcess:()=>di,_events:()=>Ri,_eventsCount:()=>Ci,_exiting:()=>Zr,_fatalExceptions:()=>hi,_getActiveHandles:()=>uo,_getActiveRequests:()=>lo,_kill:()=>ri,_linkedBinding:()=>so,_maxListeners:()=>Oi,_preload_modules:()=>Ti,_rawDebug:()=>Gr,_startProfilerIdleNotifier:()=>gi,_stopProfilerIdleNotifier:()=>bi,_tickCallback:()=>fi,abort:()=>vi,addListener:()=>Pi,allowedNodeEnvironmentFlags:()=>li,arch:()=>Nr,argv:()=>Fr,argv0:()=>Ii,assert:()=>ho,binding:()=>Hr,chdir:()=>Qr,config:()=>ei,cpuUsage:()=>Ht,cwd:()=>Kr,debugPort:()=>Ai,default:()=>nn,dlopen:()=>ao,domain:()=>Xr,emit:()=>Li,emitWarning:()=>Vr,env:()=>Dr,execArgv:()=>Wr,execPath:()=>Si,exit:()=>si,features:()=>ui,hasUncaughtExceptionCaptureCallback:()=>co,hrtime:()=>rr,kill:()=>oi,listeners:()=>po,memoryUsage:()=>ni,moduleLoadList:()=>Jr,nextTick:()=>no,off:()=>xi,on:()=>tt,once:()=>Bi,openStdin:()=>ai,pid:()=>_i,platform:()=>jr,ppid:()=>Ei,prependListener:()=>Ni,prependOnceListener:()=>ji,reallyExit:()=>ti,release:()=>Yr,removeAllListeners:()=>Ui,removeListener:()=>Mi,resourceUsage:()=>ii,setSourceMapsEnabled:()=>ki,setUncaughtExceptionCaptureCallback:()=>ci,stderr:()=>yi,stdin:()=>wi,stdout:()=>mi,title:()=>Lr,umask:()=>zr,uptime:()=>fo,version:()=>$r,versions:()=>qr});function rn(e){throw new Error("Node.js process "+e+" is not supported by JSPM core outside of Node.js")}function Js(){!Ot||!Tt||(Ot=!1,Tt.length?Je=Tt.concat(Je):Qt=-1,Je.length&&io())}function io(){if(!Ot){var e=setTimeout(Js,0);Ot=!0;for(var o=Je.length;o;){for(Tt=Je,Je=[];++Qt<o;)Tt&&Tt[Qt].run();Qt=-1,o=Je.length}Tt=null,Ot=!1,clearTimeout(e)}}function no(e){var o=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)o[t-1]=arguments[t];Je.push(new oo(e,o)),Je.length===1&&!Ot&&setTimeout(io,0)}function oo(e,o){this.fun=e,this.array=o}function je(){}function so(e){rn("_linkedBinding")}function ao(e){rn("dlopen")}function lo(){return[]}function uo(){return[]}function ho(e,o){if(!e)throw new Error(o||"assertion error")}function co(){return!1}function fo(){return ot.now()/1e3}function rr(e){var o=Math.floor((Date.now()-ot.now())*.001),t=ot.now()*.001,l=Math.floor(t)+o,h=Math.floor(t%1*1e9);return e&&(l=l-e[0],h=h-e[1],h<0&&(l--,h+=ir)),[l,h]}function tt(){return nn}function po(e){return[]}var Je,Ot,Tt,Qt,Lr,Nr,jr,Dr,Fr,Wr,$r,qr,Vr,Hr,zr,Kr,Qr,Yr,Gr,Jr,Xr,Zr,ei,ti,ri,Ht,ii,ni,oi,si,ai,li,ui,hi,ci,fi,di,pi,gi,bi,mi,yi,wi,vi,_i,Ei,Si,Ai,Ii,Ti,ki,ot,Er,ir,Oi,Ri,Ci,Pi,Bi,xi,Mi,Ui,Li,Ni,ji,nn,Xs=Ue(()=>{ie(),re(),te(),Je=[],Ot=!1,Qt=-1,oo.prototype.run=function(){this.fun.apply(null,this.array)},Lr="browser",Nr="x64",jr="browser",Dr={PATH:"/usr/bin",LANG:$e.language+".UTF-8",PWD:"/",HOME:"/home",TMP:"/tmp"},Fr=["/usr/bin/node"],Wr=[],$r="v16.8.0",qr={},Vr=function(e,o){console.warn((o?o+": ":"")+e)},Hr=function(e){rn("binding")},zr=function(e){return 0},Kr=function(){return"/"},Qr=function(e){},Yr={name:"node",sourceUrl:"",headersUrl:"",libUrl:""},Gr=je,Jr=[],Xr={},Zr=!1,ei={},ti=je,ri=je,Ht=function(){return{}},ii=Ht,ni=Ht,oi=je,si=je,ai=je,li={},ui={inspector:!1,debug:!1,uv:!1,ipv6:!1,tls_alpn:!1,tls_sni:!1,tls_ocsp:!1,tls:!1,cached_builtins:!0},hi=je,ci=je,fi=je,di=je,pi=je,gi=je,bi=je,mi=void 0,yi=void 0,wi=void 0,vi=je,_i=2,Ei=1,Si="/bin/usr/node",Ai=9229,Ii="node",Ti=[],ki=je,ot={now:typeof performance<"u"?performance.now.bind(performance):void 0,timing:typeof performance<"u"?performance.timing:void 0},ot.now===void 0&&(Er=Date.now(),ot.timing&&ot.timing.navigationStart&&(Er=ot.timing.navigationStart),ot.now=()=>Date.now()-Er),ir=1e9,rr.bigint=function(e){var o=rr(e);return typeof BigInt>"u"?o[0]*ir+o[1]:BigInt(o[0]*ir)+BigInt(o[1])},Oi=10,Ri={},Ci=0,Pi=tt,Bi=tt,xi=tt,Mi=tt,Ui=tt,Li=je,Ni=tt,ji=tt,nn={version:$r,versions:qr,arch:Nr,platform:jr,release:Yr,_rawDebug:Gr,moduleLoadList:Jr,binding:Hr,_linkedBinding:so,_events:Ri,_eventsCount:Ci,_maxListeners:Oi,on:tt,addListener:Pi,once:Bi,off:xi,removeListener:Mi,removeAllListeners:Ui,emit:Li,prependListener:Ni,prependOnceListener:ji,listeners:po,domain:Xr,_exiting:Zr,config:ei,dlopen:ao,uptime:fo,_getActiveRequests:lo,_getActiveHandles:uo,reallyExit:ti,_kill:ri,cpuUsage:Ht,resourceUsage:ii,memoryUsage:ni,kill:oi,exit:si,openStdin:ai,allowedNodeEnvironmentFlags:li,assert:ho,features:ui,_fatalExceptions:hi,setUncaughtExceptionCaptureCallback:ci,hasUncaughtExceptionCaptureCallback:co,emitWarning:Vr,nextTick:no,_tickCallback:fi,_debugProcess:di,_debugEnd:pi,_startProfilerIdleNotifier:gi,_stopProfilerIdleNotifier:bi,stdout:mi,stdin:wi,stderr:yi,abort:vi,umask:zr,chdir:Qr,cwd:Kr,env:Dr,title:Lr,argv:Fr,execArgv:Wr,pid:_i,ppid:Ei,execPath:Si,debugPort:Ai,hrtime:rr,argv0:Ii,_preload_modules:Ti,setSourceMapsEnabled:ki}}),re=Ue(()=>{Xs()}),Le={};Pt(Le,{Buffer:()=>lr,INSPECT_MAX_BYTES:()=>go,default:()=>rt,kMaxLength:()=>bo});function Zs(){if(Di)return Lt;Di=!0,Lt.byteLength=s,Lt.toByteArray=a,Lt.fromByteArray=b;for(var e=[],o=[],t=typeof Uint8Array<"u"?Uint8Array:Array,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h=0,n=l.length;h<n;++h)e[h]=l[h],o[l.charCodeAt(h)]=h;o[45]=62,o[95]=63;function r(y){var g=y.length;if(g%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var m=y.indexOf("=");m===-1&&(m=g);var w=m===g?0:4-m%4;return[m,w]}function s(y){var g=r(y),m=g[0],w=g[1];return(m+w)*3/4-w}function i(y,g,m){return(g+m)*3/4-m}function a(y){var g,m=r(y),w=m[0],S=m[1],v=new t(i(y,w,S)),_=0,x=S>0?w-4:w,M;for(M=0;M<x;M+=4)g=o[y.charCodeAt(M)]<<18|o[y.charCodeAt(M+1)]<<12|o[y.charCodeAt(M+2)]<<6|o[y.charCodeAt(M+3)],v[_++]=g>>16&255,v[_++]=g>>8&255,v[_++]=g&255;return S===2&&(g=o[y.charCodeAt(M)]<<2|o[y.charCodeAt(M+1)]>>4,v[_++]=g&255),S===1&&(g=o[y.charCodeAt(M)]<<10|o[y.charCodeAt(M+1)]<<4|o[y.charCodeAt(M+2)]>>2,v[_++]=g>>8&255,v[_++]=g&255),v}function c(y){return e[y>>18&63]+e[y>>12&63]+e[y>>6&63]+e[y&63]}function d(y,g,m){for(var w,S=[],v=g;v<m;v+=3)w=(y[v]<<16&16711680)+(y[v+1]<<8&65280)+(y[v+2]&255),S.push(c(w));return S.join("")}function b(y){for(var g,m=y.length,w=m%3,S=[],v=16383,_=0,x=m-w;_<x;_+=v)S.push(d(y,_,_+v>x?x:_+v));return w===1?(g=y[m-1],S.push(e[g>>2]+e[g<<4&63]+"==")):w===2&&(g=(y[m-2]<<8)+y[m-1],S.push(e[g>>10]+e[g>>4&63]+e[g<<2&63]+"=")),S.join("")}return Lt}function ea(){return Fi?zt:(Fi=!0,zt.read=function(e,o,t,l,h){var n,r,s=h*8-l-1,i=(1<<s)-1,a=i>>1,c=-7,d=t?h-1:0,b=t?-1:1,y=e[o+d];for(d+=b,n=y&(1<<-c)-1,y>>=-c,c+=s;c>0;n=n*256+e[o+d],d+=b,c-=8);for(r=n&(1<<-c)-1,n>>=-c,c+=l;c>0;r=r*256+e[o+d],d+=b,c-=8);if(n===0)n=1-a;else{if(n===i)return r?NaN:(y?-1:1)*(1/0);r=r+Math.pow(2,l),n=n-a}return(y?-1:1)*r*Math.pow(2,n-l)},zt.write=function(e,o,t,l,h,n){var r,s,i,a=n*8-h-1,c=(1<<a)-1,d=c>>1,b=h===23?Math.pow(2,-24)-Math.pow(2,-77):0,y=l?0:n-1,g=l?1:-1,m=o<0||o===0&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(s=isNaN(o)?1:0,r=c):(r=Math.floor(Math.log(o)/Math.LN2),o*(i=Math.pow(2,-r))<1&&(r--,i*=2),r+d>=1?o+=b/i:o+=b*Math.pow(2,1-d),o*i>=2&&(r++,i/=2),r+d>=c?(s=0,r=c):r+d>=1?(s=(o*i-1)*Math.pow(2,h),r=r+d):(s=o*Math.pow(2,d-1)*Math.pow(2,h),r=0));h>=8;e[t+y]=s&255,y+=g,s/=256,h-=8);for(r=r<<h|s,a+=h;a>0;e[t+y]=r&255,y+=g,r/=256,a-=8);e[t+y-g]|=m*128},zt)}function ta(){if(Wi)return pt;Wi=!0;let e=Zs(),o=ea(),t=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;pt.Buffer=r,pt.SlowBuffer=S,pt.INSPECT_MAX_BYTES=50;let l=2147483647;pt.kMaxLength=l,r.TYPED_ARRAY_SUPPORT=h(),!r.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function h(){try{let f=new Uint8Array(1),u={foo:function(){return 42}};return Object.setPrototypeOf(u,Uint8Array.prototype),Object.setPrototypeOf(f,u),f.foo()===42}catch{return!1}}Object.defineProperty(r.prototype,"parent",{enumerable:!0,get:function(){if(r.isBuffer(this))return this.buffer}}),Object.defineProperty(r.prototype,"offset",{enumerable:!0,get:function(){if(r.isBuffer(this))return this.byteOffset}});function n(f){if(f>l)throw new RangeError('The value "'+f+'" is invalid for option "size"');let u=new Uint8Array(f);return Object.setPrototypeOf(u,r.prototype),u}function r(f,u,p){if(typeof f=="number"){if(typeof u=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return c(f)}return s(f,u,p)}r.poolSize=8192;function s(f,u,p){if(typeof f=="string")return d(f,u);if(ArrayBuffer.isView(f))return y(f);if(f==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof f);if(q(f,ArrayBuffer)||f&&q(f.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(q(f,SharedArrayBuffer)||f&&q(f.buffer,SharedArrayBuffer)))return g(f,u,p);if(typeof f=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let E=f.valueOf&&f.valueOf();if(E!=null&&E!==f)return r.from(E,u,p);let C=m(f);if(C)return C;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof f[Symbol.toPrimitive]=="function")return r.from(f[Symbol.toPrimitive]("string"),u,p);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof f)}r.from=function(f,u,p){return s(f,u,p)},Object.setPrototypeOf(r.prototype,Uint8Array.prototype),Object.setPrototypeOf(r,Uint8Array);function i(f){if(typeof f!="number")throw new TypeError('"size" argument must be of type number');if(f<0)throw new RangeError('The value "'+f+'" is invalid for option "size"')}function a(f,u,p){return i(f),f<=0?n(f):u!==void 0?typeof p=="string"?n(f).fill(u,p):n(f).fill(u):n(f)}r.alloc=function(f,u,p){return a(f,u,p)};function c(f){return i(f),n(f<0?0:w(f)|0)}r.allocUnsafe=function(f){return c(f)},r.allocUnsafeSlow=function(f){return c(f)};function d(f,u){if((typeof u!="string"||u==="")&&(u="utf8"),!r.isEncoding(u))throw new TypeError("Unknown encoding: "+u);let p=v(f,u)|0,E=n(p),C=E.write(f,u);return C!==p&&(E=E.slice(0,C)),E}function b(f){let u=f.length<0?0:w(f.length)|0,p=n(u);for(let E=0;E<u;E+=1)p[E]=f[E]&255;return p}function y(f){if(q(f,Uint8Array)){let u=new Uint8Array(f);return g(u.buffer,u.byteOffset,u.byteLength)}return b(f)}function g(f,u,p){if(u<0||f.byteLength<u)throw new RangeError('"offset" is outside of buffer bounds');if(f.byteLength<u+(p||0))throw new RangeError('"length" is outside of buffer bounds');let E;return u===void 0&&p===void 0?E=new Uint8Array(f):p===void 0?E=new Uint8Array(f,u):E=new Uint8Array(f,u,p),Object.setPrototypeOf(E,r.prototype),E}function m(f){if(r.isBuffer(f)){let u=w(f.length)|0,p=n(u);return p.length===0||f.copy(p,0,0,u),p}if(f.length!==void 0)return typeof f.length!="number"||fe(f.length)?n(0):b(f);if(f.type==="Buffer"&&Array.isArray(f.data))return b(f.data)}function w(f){if(f>=l)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+l.toString(16)+" bytes");return f|0}function S(f){return+f!=f&&(f=0),r.alloc(+f)}r.isBuffer=function(f){return f!=null&&f._isBuffer===!0&&f!==r.prototype},r.compare=function(f,u){if(q(f,Uint8Array)&&(f=r.from(f,f.offset,f.byteLength)),q(u,Uint8Array)&&(u=r.from(u,u.offset,u.byteLength)),!r.isBuffer(f)||!r.isBuffer(u))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(f===u)return 0;let p=f.length,E=u.length;for(let C=0,j=Math.min(p,E);C<j;++C)if(f[C]!==u[C]){p=f[C],E=u[C];break}return p<E?-1:E<p?1:0},r.isEncoding=function(f){switch(String(f).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},r.concat=function(f,u){if(!Array.isArray(f))throw new TypeError('"list" argument must be an Array of Buffers');if(f.length===0)return r.alloc(0);let p;if(u===void 0)for(u=0,p=0;p<f.length;++p)u+=f[p].length;let E=r.allocUnsafe(u),C=0;for(p=0;p<f.length;++p){let j=f[p];if(q(j,Uint8Array))C+j.length>E.length?(r.isBuffer(j)||(j=r.from(j)),j.copy(E,C)):Uint8Array.prototype.set.call(E,j,C);else if(r.isBuffer(j))j.copy(E,C);else throw new TypeError('"list" argument must be an Array of Buffers');C+=j.length}return E};function v(f,u){if(r.isBuffer(f))return f.length;if(ArrayBuffer.isView(f)||q(f,ArrayBuffer))return f.byteLength;if(typeof f!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof f);let p=f.length,E=arguments.length>2&&arguments[2]===!0;if(!E&&p===0)return 0;let C=!1;for(;;)switch(u){case"ascii":case"latin1":case"binary":return p;case"utf8":case"utf-8":return L(f).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return p*2;case"hex":return p>>>1;case"base64":return Y(f).length;default:if(C)return E?-1:L(f).length;u=(""+u).toLowerCase(),C=!0}}r.byteLength=v;function _(f,u,p){let E=!1;if((u===void 0||u<0)&&(u=0),u>this.length||((p===void 0||p>this.length)&&(p=this.length),p<=0)||(p>>>=0,u>>>=0,p<=u))return"";for(f||(f="utf8");;)switch(f){case"hex":return D(this,u,p);case"utf8":case"utf-8":return F(this,u,p);case"ascii":return le(this,u,p);case"latin1":case"binary":return G(this,u,p);case"base64":return T(this,u,p);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return de(this,u,p);default:if(E)throw new TypeError("Unknown encoding: "+f);f=(f+"").toLowerCase(),E=!0}}r.prototype._isBuffer=!0;function x(f,u,p){let E=f[u];f[u]=f[p],f[p]=E}r.prototype.swap16=function(){let f=this.length;if(f%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let u=0;u<f;u+=2)x(this,u,u+1);return this},r.prototype.swap32=function(){let f=this.length;if(f%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let u=0;u<f;u+=4)x(this,u,u+3),x(this,u+1,u+2);return this},r.prototype.swap64=function(){let f=this.length;if(f%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let u=0;u<f;u+=8)x(this,u,u+7),x(this,u+1,u+6),x(this,u+2,u+5),x(this,u+3,u+4);return this},r.prototype.toString=function(){let f=this.length;return f===0?"":arguments.length===0?F(this,0,f):_.apply(this,arguments)},r.prototype.toLocaleString=r.prototype.toString,r.prototype.equals=function(f){if(!r.isBuffer(f))throw new TypeError("Argument must be a Buffer");return this===f?!0:r.compare(this,f)===0},r.prototype.inspect=function(){let f="",u=pt.INSPECT_MAX_BYTES;return f=this.toString("hex",0,u).replace(/(.{2})/g,"$1 ").trim(),this.length>u&&(f+=" ... "),"<Buffer "+f+">"},t&&(r.prototype[t]=r.prototype.inspect),r.prototype.compare=function(f,u,p,E,C){if(q(f,Uint8Array)&&(f=r.from(f,f.offset,f.byteLength)),!r.isBuffer(f))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof f);if(u===void 0&&(u=0),p===void 0&&(p=f?f.length:0),E===void 0&&(E=0),C===void 0&&(C=this.length),u<0||p>f.length||E<0||C>this.length)throw new RangeError("out of range index");if(E>=C&&u>=p)return 0;if(E>=C)return-1;if(u>=p)return 1;if(u>>>=0,p>>>=0,E>>>=0,C>>>=0,this===f)return 0;let j=C-E,se=p-u,we=Math.min(j,se),ke=this.slice(E,C),Ae=f.slice(u,p);for(let _e=0;_e<we;++_e)if(ke[_e]!==Ae[_e]){j=ke[_e],se=Ae[_e];break}return j<se?-1:se<j?1:0};function M(f,u,p,E,C){if(f.length===0)return-1;if(typeof p=="string"?(E=p,p=0):p>2147483647?p=2147483647:p<-2147483648&&(p=-2147483648),p=+p,fe(p)&&(p=C?0:f.length-1),p<0&&(p=f.length+p),p>=f.length){if(C)return-1;p=f.length-1}else if(p<0)if(C)p=0;else return-1;if(typeof u=="string"&&(u=r.from(u,E)),r.isBuffer(u))return u.length===0?-1:k(f,u,p,E,C);if(typeof u=="number")return u=u&255,typeof Uint8Array.prototype.indexOf=="function"?C?Uint8Array.prototype.indexOf.call(f,u,p):Uint8Array.prototype.lastIndexOf.call(f,u,p):k(f,[u],p,E,C);throw new TypeError("val must be string, number or Buffer")}function k(f,u,p,E,C){let j=1,se=f.length,we=u.length;if(E!==void 0&&(E=String(E).toLowerCase(),E==="ucs2"||E==="ucs-2"||E==="utf16le"||E==="utf-16le")){if(f.length<2||u.length<2)return-1;j=2,se/=2,we/=2,p/=2}function ke(_e,Ce){return j===1?_e[Ce]:_e.readUInt16BE(Ce*j)}let Ae;if(C){let _e=-1;for(Ae=p;Ae<se;Ae++)if(ke(f,Ae)===ke(u,_e===-1?0:Ae-_e)){if(_e===-1&&(_e=Ae),Ae-_e+1===we)return _e*j}else _e!==-1&&(Ae-=Ae-_e),_e=-1}else for(p+we>se&&(p=se-we),Ae=p;Ae>=0;Ae--){let _e=!0;for(let Ce=0;Ce<we;Ce++)if(ke(f,Ae+Ce)!==ke(u,Ce)){_e=!1;break}if(_e)return Ae}return-1}r.prototype.includes=function(f,u,p){return this.indexOf(f,u,p)!==-1},r.prototype.indexOf=function(f,u,p){return M(this,f,u,p,!0)},r.prototype.lastIndexOf=function(f,u,p){return M(this,f,u,p,!1)};function O(f,u,p,E){p=Number(p)||0;let C=f.length-p;E?(E=Number(E),E>C&&(E=C)):E=C;let j=u.length;E>j/2&&(E=j/2);let se;for(se=0;se<E;++se){let we=parseInt(u.substr(se*2,2),16);if(fe(we))return se;f[p+se]=we}return se}function P(f,u,p,E){return U(L(u,f.length-p),f,p,E)}function W(f,u,p,E){return U(N(u),f,p,E)}function z(f,u,p,E){return U(Y(u),f,p,E)}function ee(f,u,p,E){return U(X(u,f.length-p),f,p,E)}r.prototype.write=function(f,u,p,E){if(u===void 0)E="utf8",p=this.length,u=0;else if(p===void 0&&typeof u=="string")E=u,p=this.length,u=0;else if(isFinite(u))u=u>>>0,isFinite(p)?(p=p>>>0,E===void 0&&(E="utf8")):(E=p,p=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let C=this.length-u;if((p===void 0||p>C)&&(p=C),f.length>0&&(p<0||u<0)||u>this.length)throw new RangeError("Attempt to write outside buffer bounds");E||(E="utf8");let j=!1;for(;;)switch(E){case"hex":return O(this,f,u,p);case"utf8":case"utf-8":return P(this,f,u,p);case"ascii":case"latin1":case"binary":return W(this,f,u,p);case"base64":return z(this,f,u,p);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ee(this,f,u,p);default:if(j)throw new TypeError("Unknown encoding: "+E);E=(""+E).toLowerCase(),j=!0}},r.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function T(f,u,p){return u===0&&p===f.length?e.fromByteArray(f):e.fromByteArray(f.slice(u,p))}function F(f,u,p){p=Math.min(f.length,p);let E=[],C=u;for(;C<p;){let j=f[C],se=null,we=j>239?4:j>223?3:j>191?2:1;if(C+we<=p){let ke,Ae,_e,Ce;switch(we){case 1:j<128&&(se=j);break;case 2:ke=f[C+1],(ke&192)===128&&(Ce=(j&31)<<6|ke&63,Ce>127&&(se=Ce));break;case 3:ke=f[C+1],Ae=f[C+2],(ke&192)===128&&(Ae&192)===128&&(Ce=(j&15)<<12|(ke&63)<<6|Ae&63,Ce>2047&&(Ce<55296||Ce>57343)&&(se=Ce));break;case 4:ke=f[C+1],Ae=f[C+2],_e=f[C+3],(ke&192)===128&&(Ae&192)===128&&(_e&192)===128&&(Ce=(j&15)<<18|(ke&63)<<12|(Ae&63)<<6|_e&63,Ce>65535&&Ce<1114112&&(se=Ce))}}se===null?(se=65533,we=1):se>65535&&(se-=65536,E.push(se>>>10&1023|55296),se=56320|se&1023),E.push(se),C+=we}return V(E)}let H=4096;function V(f){let u=f.length;if(u<=H)return String.fromCharCode.apply(String,f);let p="",E=0;for(;E<u;)p+=String.fromCharCode.apply(String,f.slice(E,E+=H));return p}function le(f,u,p){let E="";p=Math.min(f.length,p);for(let C=u;C<p;++C)E+=String.fromCharCode(f[C]&127);return E}function G(f,u,p){let E="";p=Math.min(f.length,p);for(let C=u;C<p;++C)E+=String.fromCharCode(f[C]);return E}function D(f,u,p){let E=f.length;(!u||u<0)&&(u=0),(!p||p<0||p>E)&&(p=E);let C="";for(let j=u;j<p;++j)C+=ye[f[j]];return C}function de(f,u,p){let E=f.slice(u,p),C="";for(let j=0;j<E.length-1;j+=2)C+=String.fromCharCode(E[j]+E[j+1]*256);return C}r.prototype.slice=function(f,u){let p=this.length;f=~~f,u=u===void 0?p:~~u,f<0?(f+=p,f<0&&(f=0)):f>p&&(f=p),u<0?(u+=p,u<0&&(u=0)):u>p&&(u=p),u<f&&(u=f);let E=this.subarray(f,u);return Object.setPrototypeOf(E,r.prototype),E};function Z(f,u,p){if(f%1!==0||f<0)throw new RangeError("offset is not uint");if(f+u>p)throw new RangeError("Trying to access beyond buffer length")}r.prototype.readUintLE=r.prototype.readUIntLE=function(f,u,p){f=f>>>0,u=u>>>0,p||Z(f,u,this.length);let E=this[f],C=1,j=0;for(;++j<u&&(C*=256);)E+=this[f+j]*C;return E},r.prototype.readUintBE=r.prototype.readUIntBE=function(f,u,p){f=f>>>0,u=u>>>0,p||Z(f,u,this.length);let E=this[f+--u],C=1;for(;u>0&&(C*=256);)E+=this[f+--u]*C;return E},r.prototype.readUint8=r.prototype.readUInt8=function(f,u){return f=f>>>0,u||Z(f,1,this.length),this[f]},r.prototype.readUint16LE=r.prototype.readUInt16LE=function(f,u){return f=f>>>0,u||Z(f,2,this.length),this[f]|this[f+1]<<8},r.prototype.readUint16BE=r.prototype.readUInt16BE=function(f,u){return f=f>>>0,u||Z(f,2,this.length),this[f]<<8|this[f+1]},r.prototype.readUint32LE=r.prototype.readUInt32LE=function(f,u){return f=f>>>0,u||Z(f,4,this.length),(this[f]|this[f+1]<<8|this[f+2]<<16)+this[f+3]*16777216},r.prototype.readUint32BE=r.prototype.readUInt32BE=function(f,u){return f=f>>>0,u||Z(f,4,this.length),this[f]*16777216+(this[f+1]<<16|this[f+2]<<8|this[f+3])},r.prototype.readBigUInt64LE=me(function(f){f=f>>>0,Q(f,"offset");let u=this[f],p=this[f+7];(u===void 0||p===void 0)&&ce(f,this.length-8);let E=u+this[++f]*2**8+this[++f]*2**16+this[++f]*2**24,C=this[++f]+this[++f]*2**8+this[++f]*2**16+p*2**24;return BigInt(E)+(BigInt(C)<<BigInt(32))}),r.prototype.readBigUInt64BE=me(function(f){f=f>>>0,Q(f,"offset");let u=this[f],p=this[f+7];(u===void 0||p===void 0)&&ce(f,this.length-8);let E=u*2**24+this[++f]*2**16+this[++f]*2**8+this[++f],C=this[++f]*2**24+this[++f]*2**16+this[++f]*2**8+p;return(BigInt(E)<<BigInt(32))+BigInt(C)}),r.prototype.readIntLE=function(f,u,p){f=f>>>0,u=u>>>0,p||Z(f,u,this.length);let E=this[f],C=1,j=0;for(;++j<u&&(C*=256);)E+=this[f+j]*C;return C*=128,E>=C&&(E-=Math.pow(2,8*u)),E},r.prototype.readIntBE=function(f,u,p){f=f>>>0,u=u>>>0,p||Z(f,u,this.length);let E=u,C=1,j=this[f+--E];for(;E>0&&(C*=256);)j+=this[f+--E]*C;return C*=128,j>=C&&(j-=Math.pow(2,8*u)),j},r.prototype.readInt8=function(f,u){return f=f>>>0,u||Z(f,1,this.length),this[f]&128?(255-this[f]+1)*-1:this[f]},r.prototype.readInt16LE=function(f,u){f=f>>>0,u||Z(f,2,this.length);let p=this[f]|this[f+1]<<8;return p&32768?p|4294901760:p},r.prototype.readInt16BE=function(f,u){f=f>>>0,u||Z(f,2,this.length);let p=this[f+1]|this[f]<<8;return p&32768?p|4294901760:p},r.prototype.readInt32LE=function(f,u){return f=f>>>0,u||Z(f,4,this.length),this[f]|this[f+1]<<8|this[f+2]<<16|this[f+3]<<24},r.prototype.readInt32BE=function(f,u){return f=f>>>0,u||Z(f,4,this.length),this[f]<<24|this[f+1]<<16|this[f+2]<<8|this[f+3]},r.prototype.readBigInt64LE=me(function(f){f=f>>>0,Q(f,"offset");let u=this[f],p=this[f+7];(u===void 0||p===void 0)&&ce(f,this.length-8);let E=this[f+4]+this[f+5]*2**8+this[f+6]*2**16+(p<<24);return(BigInt(E)<<BigInt(32))+BigInt(u+this[++f]*2**8+this[++f]*2**16+this[++f]*2**24)}),r.prototype.readBigInt64BE=me(function(f){f=f>>>0,Q(f,"offset");let u=this[f],p=this[f+7];(u===void 0||p===void 0)&&ce(f,this.length-8);let E=(u<<24)+this[++f]*2**16+this[++f]*2**8+this[++f];return(BigInt(E)<<BigInt(32))+BigInt(this[++f]*2**24+this[++f]*2**16+this[++f]*2**8+p)}),r.prototype.readFloatLE=function(f,u){return f=f>>>0,u||Z(f,4,this.length),o.read(this,f,!0,23,4)},r.prototype.readFloatBE=function(f,u){return f=f>>>0,u||Z(f,4,this.length),o.read(this,f,!1,23,4)},r.prototype.readDoubleLE=function(f,u){return f=f>>>0,u||Z(f,8,this.length),o.read(this,f,!0,52,8)},r.prototype.readDoubleBE=function(f,u){return f=f>>>0,u||Z(f,8,this.length),o.read(this,f,!1,52,8)};function ge(f,u,p,E,C,j){if(!r.isBuffer(f))throw new TypeError('"buffer" argument must be a Buffer instance');if(u>C||u<j)throw new RangeError('"value" argument is out of bounds');if(p+E>f.length)throw new RangeError("Index out of range")}r.prototype.writeUintLE=r.prototype.writeUIntLE=function(f,u,p,E){if(f=+f,u=u>>>0,p=p>>>0,!E){let se=Math.pow(2,8*p)-1;ge(this,f,u,p,se,0)}let C=1,j=0;for(this[u]=f&255;++j<p&&(C*=256);)this[u+j]=f/C&255;return u+p},r.prototype.writeUintBE=r.prototype.writeUIntBE=function(f,u,p,E){if(f=+f,u=u>>>0,p=p>>>0,!E){let se=Math.pow(2,8*p)-1;ge(this,f,u,p,se,0)}let C=p-1,j=1;for(this[u+C]=f&255;--C>=0&&(j*=256);)this[u+C]=f/j&255;return u+p},r.prototype.writeUint8=r.prototype.writeUInt8=function(f,u,p){return f=+f,u=u>>>0,p||ge(this,f,u,1,255,0),this[u]=f&255,u+1},r.prototype.writeUint16LE=r.prototype.writeUInt16LE=function(f,u,p){return f=+f,u=u>>>0,p||ge(this,f,u,2,65535,0),this[u]=f&255,this[u+1]=f>>>8,u+2},r.prototype.writeUint16BE=r.prototype.writeUInt16BE=function(f,u,p){return f=+f,u=u>>>0,p||ge(this,f,u,2,65535,0),this[u]=f>>>8,this[u+1]=f&255,u+2},r.prototype.writeUint32LE=r.prototype.writeUInt32LE=function(f,u,p){return f=+f,u=u>>>0,p||ge(this,f,u,4,4294967295,0),this[u+3]=f>>>24,this[u+2]=f>>>16,this[u+1]=f>>>8,this[u]=f&255,u+4},r.prototype.writeUint32BE=r.prototype.writeUInt32BE=function(f,u,p){return f=+f,u=u>>>0,p||ge(this,f,u,4,4294967295,0),this[u]=f>>>24,this[u+1]=f>>>16,this[u+2]=f>>>8,this[u+3]=f&255,u+4};function I(f,u,p,E,C){J(u,E,C,f,p,7);let j=Number(u&BigInt(4294967295));f[p++]=j,j=j>>8,f[p++]=j,j=j>>8,f[p++]=j,j=j>>8,f[p++]=j;let se=Number(u>>BigInt(32)&BigInt(4294967295));return f[p++]=se,se=se>>8,f[p++]=se,se=se>>8,f[p++]=se,se=se>>8,f[p++]=se,p}function K(f,u,p,E,C){J(u,E,C,f,p,7);let j=Number(u&BigInt(4294967295));f[p+7]=j,j=j>>8,f[p+6]=j,j=j>>8,f[p+5]=j,j=j>>8,f[p+4]=j;let se=Number(u>>BigInt(32)&BigInt(4294967295));return f[p+3]=se,se=se>>8,f[p+2]=se,se=se>>8,f[p+1]=se,se=se>>8,f[p]=se,p+8}r.prototype.writeBigUInt64LE=me(function(f,u=0){return I(this,f,u,BigInt(0),BigInt("0xffffffffffffffff"))}),r.prototype.writeBigUInt64BE=me(function(f,u=0){return K(this,f,u,BigInt(0),BigInt("0xffffffffffffffff"))}),r.prototype.writeIntLE=function(f,u,p,E){if(f=+f,u=u>>>0,!E){let we=Math.pow(2,8*p-1);ge(this,f,u,p,we-1,-we)}let C=0,j=1,se=0;for(this[u]=f&255;++C<p&&(j*=256);)f<0&&se===0&&this[u+C-1]!==0&&(se=1),this[u+C]=(f/j>>0)-se&255;return u+p},r.prototype.writeIntBE=function(f,u,p,E){if(f=+f,u=u>>>0,!E){let we=Math.pow(2,8*p-1);ge(this,f,u,p,we-1,-we)}let C=p-1,j=1,se=0;for(this[u+C]=f&255;--C>=0&&(j*=256);)f<0&&se===0&&this[u+C+1]!==0&&(se=1),this[u+C]=(f/j>>0)-se&255;return u+p},r.prototype.writeInt8=function(f,u,p){return f=+f,u=u>>>0,p||ge(this,f,u,1,127,-128),f<0&&(f=255+f+1),this[u]=f&255,u+1},r.prototype.writeInt16LE=function(f,u,p){return f=+f,u=u>>>0,p||ge(this,f,u,2,32767,-32768),this[u]=f&255,this[u+1]=f>>>8,u+2},r.prototype.writeInt16BE=function(f,u,p){return f=+f,u=u>>>0,p||ge(this,f,u,2,32767,-32768),this[u]=f>>>8,this[u+1]=f&255,u+2},r.prototype.writeInt32LE=function(f,u,p){return f=+f,u=u>>>0,p||ge(this,f,u,4,2147483647,-2147483648),this[u]=f&255,this[u+1]=f>>>8,this[u+2]=f>>>16,this[u+3]=f>>>24,u+4},r.prototype.writeInt32BE=function(f,u,p){return f=+f,u=u>>>0,p||ge(this,f,u,4,2147483647,-2147483648),f<0&&(f=4294967295+f+1),this[u]=f>>>24,this[u+1]=f>>>16,this[u+2]=f>>>8,this[u+3]=f&255,u+4},r.prototype.writeBigInt64LE=me(function(f,u=0){return I(this,f,u,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),r.prototype.writeBigInt64BE=me(function(f,u=0){return K(this,f,u,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function pe(f,u,p,E,C,j){if(p+E>f.length)throw new RangeError("Index out of range");if(p<0)throw new RangeError("Index out of range")}function be(f,u,p,E,C){return u=+u,p=p>>>0,C||pe(f,u,p,4),o.write(f,u,p,E,23,4),p+4}r.prototype.writeFloatLE=function(f,u,p){return be(this,f,u,!0,p)},r.prototype.writeFloatBE=function(f,u,p){return be(this,f,u,!1,p)};function ue(f,u,p,E,C){return u=+u,p=p>>>0,C||pe(f,u,p,8),o.write(f,u,p,E,52,8),p+8}r.prototype.writeDoubleLE=function(f,u,p){return ue(this,f,u,!0,p)},r.prototype.writeDoubleBE=function(f,u,p){return ue(this,f,u,!1,p)},r.prototype.copy=function(f,u,p,E){if(!r.isBuffer(f))throw new TypeError("argument should be a Buffer");if(p||(p=0),!E&&E!==0&&(E=this.length),u>=f.length&&(u=f.length),u||(u=0),E>0&&E<p&&(E=p),E===p||f.length===0||this.length===0)return 0;if(u<0)throw new RangeError("targetStart out of bounds");if(p<0||p>=this.length)throw new RangeError("Index out of range");if(E<0)throw new RangeError("sourceEnd out of bounds");E>this.length&&(E=this.length),f.length-u<E-p&&(E=f.length-u+p);let C=E-p;return this===f&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(u,p,E):Uint8Array.prototype.set.call(f,this.subarray(p,E),u),C},r.prototype.fill=function(f,u,p,E){if(typeof f=="string"){if(typeof u=="string"?(E=u,u=0,p=this.length):typeof p=="string"&&(E=p,p=this.length),E!==void 0&&typeof E!="string")throw new TypeError("encoding must be a string");if(typeof E=="string"&&!r.isEncoding(E))throw new TypeError("Unknown encoding: "+E);if(f.length===1){let j=f.charCodeAt(0);(E==="utf8"&&j<128||E==="latin1")&&(f=j)}}else typeof f=="number"?f=f&255:typeof f=="boolean"&&(f=Number(f));if(u<0||this.length<u||this.length<p)throw new RangeError("Out of range index");if(p<=u)return this;u=u>>>0,p=p===void 0?this.length:p>>>0,f||(f=0);let C;if(typeof f=="number")for(C=u;C<p;++C)this[C]=f;else{let j=r.isBuffer(f)?f:r.from(f,E),se=j.length;if(se===0)throw new TypeError('The value "'+f+'" is invalid for argument "value"');for(C=0;C<p-u;++C)this[C+u]=j[C%se]}return this};let B={};function A(f,u,p){B[f]=class extends p{constructor(){super(),Object.defineProperty(this,"message",{value:u.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${f}]`,this.stack,delete this.name}get code(){return f}set code(E){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:E,writable:!0})}toString(){return`${this.name} [${f}]: ${this.message}`}}}A("ERR_BUFFER_OUT_OF_BOUNDS",function(f){return f?`${f} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),A("ERR_INVALID_ARG_TYPE",function(f,u){return`The "${f}" argument must be of type number. Received type ${typeof u}`},TypeError),A("ERR_OUT_OF_RANGE",function(f,u,p){let E=`The value of "${f}" is out of range.`,C=p;return Number.isInteger(p)&&Math.abs(p)>2**32?C=$(String(p)):typeof p=="bigint"&&(C=String(p),(p>BigInt(2)**BigInt(32)||p<-(BigInt(2)**BigInt(32)))&&(C=$(C)),C+="n"),E+=` It must be ${u}. Received ${C}`,E},RangeError);function $(f){let u="",p=f.length,E=f[0]==="-"?1:0;for(;p>=E+4;p-=3)u=`_${f.slice(p-3,p)}${u}`;return`${f.slice(0,p)}${u}`}function ae(f,u,p){Q(u,"offset"),(f[u]===void 0||f[u+p]===void 0)&&ce(u,f.length-(p+1))}function J(f,u,p,E,C,j){if(f>p||f<u){let se=typeof u=="bigint"?"n":"",we;throw j>3?u===0||u===BigInt(0)?we=`>= 0${se} and < 2${se} ** ${(j+1)*8}${se}`:we=`>= -(2${se} ** ${(j+1)*8-1}${se}) and < 2 ** ${(j+1)*8-1}${se}`:we=`>= ${u}${se} and <= ${p}${se}`,new B.ERR_OUT_OF_RANGE("value",we,f)}ae(E,C,j)}function Q(f,u){if(typeof f!="number")throw new B.ERR_INVALID_ARG_TYPE(u,"number",f)}function ce(f,u,p){throw Math.floor(f)!==f?(Q(f,p),new B.ERR_OUT_OF_RANGE(p||"offset","an integer",f)):u<0?new B.ERR_BUFFER_OUT_OF_BOUNDS:new B.ERR_OUT_OF_RANGE(p||"offset",`>= ${p?1:0} and <= ${u}`,f)}let ne=/[^+/0-9A-Za-z-_]/g;function R(f){if(f=f.split("=")[0],f=f.trim().replace(ne,""),f.length<2)return"";for(;f.length%4!==0;)f=f+"=";return f}function L(f,u){u=u||1/0;let p,E=f.length,C=null,j=[];for(let se=0;se<E;++se){if(p=f.charCodeAt(se),p>55295&&p<57344){if(!C){if(p>56319){(u-=3)>-1&&j.push(239,191,189);continue}else if(se+1===E){(u-=3)>-1&&j.push(239,191,189);continue}C=p;continue}if(p<56320){(u-=3)>-1&&j.push(239,191,189),C=p;continue}p=(C-55296<<10|p-56320)+65536}else C&&(u-=3)>-1&&j.push(239,191,189);if(C=null,p<128){if((u-=1)<0)break;j.push(p)}else if(p<2048){if((u-=2)<0)break;j.push(p>>6|192,p&63|128)}else if(p<65536){if((u-=3)<0)break;j.push(p>>12|224,p>>6&63|128,p&63|128)}else if(p<1114112){if((u-=4)<0)break;j.push(p>>18|240,p>>12&63|128,p>>6&63|128,p&63|128)}else throw new Error("Invalid code point")}return j}function N(f){let u=[];for(let p=0;p<f.length;++p)u.push(f.charCodeAt(p)&255);return u}function X(f,u){let p,E,C,j=[];for(let se=0;se<f.length&&!((u-=2)<0);++se)p=f.charCodeAt(se),E=p>>8,C=p%256,j.push(C),j.push(E);return j}function Y(f){return e.toByteArray(R(f))}function U(f,u,p,E){let C;for(C=0;C<E&&!(C+p>=u.length||C>=f.length);++C)u[C+p]=f[C];return C}function q(f,u){return f instanceof u||f!=null&&f.constructor!=null&&f.constructor.name!=null&&f.constructor.name===u.name}function fe(f){return f!==f}let ye=function(){let f="0123456789abcdef",u=new Array(256);for(let p=0;p<16;++p){let E=p*16;for(let C=0;C<16;++C)u[E+C]=f[p]+f[C]}return u}();function me(f){return typeof BigInt>"u"?ve:f}function ve(){throw new Error("BigInt not supported")}return pt}var Lt,Di,zt,Fi,pt,Wi,rt,lr,go,bo,Ne=Ue(()=>{ie(),re(),te(),Lt={},Di=!1,zt={},Fi=!1,pt={},Wi=!1,rt=ta(),rt.Buffer,rt.SlowBuffer,rt.INSPECT_MAX_BYTES,rt.kMaxLength,lr=rt.Buffer,go=rt.INSPECT_MAX_BYTES,bo=rt.kMaxLength}),ie=Ue(()=>{Ne()}),ra=he(e=>{ie(),re(),te(),Object.defineProperty(e,"__esModule",{value:!0});var o=class{constructor(t){this.aliasToTopic={},this.max=t}put(t,l){return l===0||l>this.max?!1:(this.aliasToTopic[l]=t,this.length=Object.keys(this.aliasToTopic).length,!0)}getTopicByAlias(t){return this.aliasToTopic[t]}clear(){this.aliasToTopic={}}};e.default=o}),xe=he((e,o)=>{ie(),re(),te(),o.exports={ArrayIsArray(t){return Array.isArray(t)},ArrayPrototypeIncludes(t,l){return t.includes(l)},ArrayPrototypeIndexOf(t,l){return t.indexOf(l)},ArrayPrototypeJoin(t,l){return t.join(l)},ArrayPrototypeMap(t,l){return t.map(l)},ArrayPrototypePop(t,l){return t.pop(l)},ArrayPrototypePush(t,l){return t.push(l)},ArrayPrototypeSlice(t,l,h){return t.slice(l,h)},Error,FunctionPrototypeCall(t,l,...h){return t.call(l,...h)},FunctionPrototypeSymbolHasInstance(t,l){return Function.prototype[Symbol.hasInstance].call(t,l)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(t,l){return Object.defineProperties(t,l)},ObjectDefineProperty(t,l,h){return Object.defineProperty(t,l,h)},ObjectGetOwnPropertyDescriptor(t,l){return Object.getOwnPropertyDescriptor(t,l)},ObjectKeys(t){return Object.keys(t)},ObjectSetPrototypeOf(t,l){return Object.setPrototypeOf(t,l)},Promise,PromisePrototypeCatch(t,l){return t.catch(l)},PromisePrototypeThen(t,l,h){return t.then(l,h)},PromiseReject(t){return Promise.reject(t)},ReflectApply:Reflect.apply,RegExpPrototypeTest(t,l){return t.test(l)},SafeSet:Set,String,StringPrototypeSlice(t,l,h){return t.slice(l,h)},StringPrototypeToLowerCase(t){return t.toLowerCase()},StringPrototypeToUpperCase(t){return t.toUpperCase()},StringPrototypeTrim(t){return t.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,TypedArrayPrototypeSet(t,l,h){return t.set(l,h)},Uint8Array}}),lt=he((e,o)=>{ie(),re(),te();var t=(Ne(),Ie(Le)),l=Object.getPrototypeOf(async function(){}).constructor,h=globalThis.Blob||t.Blob,n=typeof h<"u"?function(s){return s instanceof h}:function(s){return!1},r=class extends Error{constructor(s){if(!Array.isArray(s))throw new TypeError(`Expected input to be an Array, got ${typeof s}`);let i="";for(let a=0;a<s.length;a++)i+=`    ${s[a].stack}
`;super(i),this.name="AggregateError",this.errors=s}};o.exports={AggregateError:r,kEmptyObject:Object.freeze({}),once(s){let i=!1;return function(...a){i||(i=!0,s.apply(this,a))}},createDeferredPromise:function(){let s,i;return{promise:new Promise((a,c)=>{s=a,i=c}),resolve:s,reject:i}},promisify(s){return new Promise((i,a)=>{s((c,...d)=>c?a(c):i(...d))})},debuglog(){return function(){}},format(s,...i){return s.replace(/%([sdifj])/g,function(...[a,c]){let d=i.shift();return c==="f"?d.toFixed(6):c==="j"?JSON.stringify(d):c==="s"&&typeof d=="object"?`${d.constructor!==Object?d.constructor.name:""} {}`.trim():d.toString()})},inspect(s){switch(typeof s){case"string":if(s.includes("'"))if(s.includes('"')){if(!s.includes("`")&&!s.includes("${"))return`\`${s}\``}else return`"${s}"`;return`'${s}'`;case"number":return isNaN(s)?"NaN":Object.is(s,-0)?String(s):s;case"bigint":return`${String(s)}n`;case"boolean":case"undefined":return String(s);case"object":return"{}"}},types:{isAsyncFunction(s){return s instanceof l},isArrayBufferView(s){return ArrayBuffer.isView(s)}},isBlob:n},o.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")}),on=he((e,o)=>{ie(),re(),te();var{AbortController:t,AbortSignal:l}=typeof self<"u"?self:typeof window<"u"?window:void 0;o.exports=t,o.exports.AbortSignal=l,o.exports.default=t}),Fe=he((e,o)=>{ie(),re(),te();var{format:t,inspect:l,AggregateError:h}=lt(),n=globalThis.AggregateError||h,r=Symbol("kIsNodeError"),s=["string","function","number","object","Function","Object","boolean","bigint","symbol"],i=/^([A-Z][a-z0-9]*)+$/,a="__node_internal_",c={};function d(v,_){if(!v)throw new c.ERR_INTERNAL_ASSERTION(_)}function b(v){let _="",x=v.length,M=v[0]==="-"?1:0;for(;x>=M+4;x-=3)_=`_${v.slice(x-3,x)}${_}`;return`${v.slice(0,x)}${_}`}function y(v,_,x){if(typeof _=="function")return d(_.length<=x.length,`Code: ${v}; The provided arguments length (${x.length}) does not match the required ones (${_.length}).`),_(...x);let M=(_.match(/%[dfijoOs]/g)||[]).length;return d(M===x.length,`Code: ${v}; The provided arguments length (${x.length}) does not match the required ones (${M}).`),x.length===0?_:t(_,...x)}function g(v,_,x){x||(x=Error);class M extends x{constructor(...O){super(y(v,_,O))}toString(){return`${this.name} [${v}]: ${this.message}`}}Object.defineProperties(M.prototype,{name:{value:x.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${v}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),M.prototype.code=v,M.prototype[r]=!0,c[v]=M}function m(v){let _=a+v.name;return Object.defineProperty(v,"name",{value:_}),v}function w(v,_){if(v&&_&&v!==_){if(Array.isArray(_.errors))return _.errors.push(v),_;let x=new n([_,v],_.message);return x.code=_.code,x}return v||_}var S=class extends Error{constructor(v="The operation was aborted",_=void 0){if(_!==void 0&&typeof _!="object")throw new c.ERR_INVALID_ARG_TYPE("options","Object",_);super(v,_),this.code="ABORT_ERR",this.name="AbortError"}};g("ERR_ASSERTION","%s",Error),g("ERR_INVALID_ARG_TYPE",(v,_,x)=>{d(typeof v=="string","'name' must be a string"),Array.isArray(_)||(_=[_]);let M="The ";v.endsWith(" argument")?M+=`${v} `:M+=`"${v}" ${v.includes(".")?"property":"argument"} `,M+="must be ";let k=[],O=[],P=[];for(let z of _)d(typeof z=="string","All expected entries have to be of type string"),s.includes(z)?k.push(z.toLowerCase()):i.test(z)?O.push(z):(d(z!=="object",'The value "object" should be written as "Object"'),P.push(z));if(O.length>0){let z=k.indexOf("object");z!==-1&&(k.splice(k,z,1),O.push("Object"))}if(k.length>0){switch(k.length){case 1:M+=`of type ${k[0]}`;break;case 2:M+=`one of type ${k[0]} or ${k[1]}`;break;default:{let z=k.pop();M+=`one of type ${k.join(", ")}, or ${z}`}}(O.length>0||P.length>0)&&(M+=" or ")}if(O.length>0){switch(O.length){case 1:M+=`an instance of ${O[0]}`;break;case 2:M+=`an instance of ${O[0]} or ${O[1]}`;break;default:{let z=O.pop();M+=`an instance of ${O.join(", ")}, or ${z}`}}P.length>0&&(M+=" or ")}switch(P.length){case 0:break;case 1:P[0].toLowerCase()!==P[0]&&(M+="an "),M+=`${P[0]}`;break;case 2:M+=`one of ${P[0]} or ${P[1]}`;break;default:{let z=P.pop();M+=`one of ${P.join(", ")}, or ${z}`}}if(x==null)M+=`. Received ${x}`;else if(typeof x=="function"&&x.name)M+=`. Received function ${x.name}`;else if(typeof x=="object"){var W;if((W=x.constructor)!==null&&W!==void 0&&W.name)M+=`. Received an instance of ${x.constructor.name}`;else{let z=l(x,{depth:-1});M+=`. Received ${z}`}}else{let z=l(x,{colors:!1});z.length>25&&(z=`${z.slice(0,25)}...`),M+=`. Received type ${typeof x} (${z})`}return M},TypeError),g("ERR_INVALID_ARG_VALUE",(v,_,x="is invalid")=>{let M=l(_);return M.length>128&&(M=M.slice(0,128)+"..."),`The ${v.includes(".")?"property":"argument"} '${v}' ${x}. Received ${M}`},TypeError),g("ERR_INVALID_RETURN_VALUE",(v,_,x)=>{var M;let k=x!=null&&(M=x.constructor)!==null&&M!==void 0&&M.name?`instance of ${x.constructor.name}`:`type ${typeof x}`;return`Expected ${v} to be returned from the "${_}" function but got ${k}.`},TypeError),g("ERR_MISSING_ARGS",(...v)=>{d(v.length>0,"At least one arg needs to be specified");let _,x=v.length;switch(v=(Array.isArray(v)?v:[v]).map(M=>`"${M}"`).join(" or "),x){case 1:_+=`The ${v[0]} argument`;break;case 2:_+=`The ${v[0]} and ${v[1]} arguments`;break;default:{let M=v.pop();_+=`The ${v.join(", ")}, and ${M} arguments`}break}return`${_} must be specified`},TypeError),g("ERR_OUT_OF_RANGE",(v,_,x)=>{d(_,'Missing "range" argument');let M;return Number.isInteger(x)&&Math.abs(x)>2**32?M=b(String(x)):typeof x=="bigint"?(M=String(x),(x>2n**32n||x<-(2n**32n))&&(M=b(M)),M+="n"):M=l(x),`The value of "${v}" is out of range. It must be ${_}. Received ${M}`},RangeError),g("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),g("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),g("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),g("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),g("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),g("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),g("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),g("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),g("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),g("ERR_STREAM_WRITE_AFTER_END","write after end",Error),g("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),o.exports={AbortError:S,aggregateTwoErrors:m(w),hideStackFrames:m,codes:c}}),dr=he((e,o)=>{ie(),re(),te();var{ArrayIsArray:t,ArrayPrototypeIncludes:l,ArrayPrototypeJoin:h,ArrayPrototypeMap:n,NumberIsInteger:r,NumberIsNaN:s,NumberMAX_SAFE_INTEGER:i,NumberMIN_SAFE_INTEGER:a,NumberParseInt:c,ObjectPrototypeHasOwnProperty:d,RegExpPrototypeExec:b,String:y,StringPrototypeToUpperCase:g,StringPrototypeTrim:m}=xe(),{hideStackFrames:w,codes:{ERR_SOCKET_BAD_PORT:S,ERR_INVALID_ARG_TYPE:v,ERR_INVALID_ARG_VALUE:_,ERR_OUT_OF_RANGE:x,ERR_UNKNOWN_SIGNAL:M}}=Fe(),{normalizeEncoding:k}=lt(),{isAsyncFunction:O,isArrayBufferView:P}=lt().types,W={};function z(U){return U===(U|0)}function ee(U){return U===U>>>0}var T=/^[0-7]+$/,F="must be a 32-bit unsigned integer or an octal string";function H(U,q,fe){if(typeof U>"u"&&(U=fe),typeof U=="string"){if(b(T,U)===null)throw new _(q,U,F);U=c(U,8)}return G(U,q),U}var V=w((U,q,fe=a,ye=i)=>{if(typeof U!="number")throw new v(q,"number",U);if(!r(U))throw new x(q,"an integer",U);if(U<fe||U>ye)throw new x(q,`>= ${fe} && <= ${ye}`,U)}),le=w((U,q,fe=-2147483648,ye=2147483647)=>{if(typeof U!="number")throw new v(q,"number",U);if(!r(U))throw new x(q,"an integer",U);if(U<fe||U>ye)throw new x(q,`>= ${fe} && <= ${ye}`,U)}),G=w((U,q,fe=!1)=>{if(typeof U!="number")throw new v(q,"number",U);if(!r(U))throw new x(q,"an integer",U);let ye=fe?1:0,me=4294967295;if(U<ye||U>me)throw new x(q,`>= ${ye} && <= ${me}`,U)});function D(U,q){if(typeof U!="string")throw new v(q,"string",U)}function de(U,q,fe=void 0,ye){if(typeof U!="number")throw new v(q,"number",U);if(fe!=null&&U<fe||ye!=null&&U>ye||(fe!=null||ye!=null)&&s(U))throw new x(q,`${fe!=null?`>= ${fe}`:""}${fe!=null&&ye!=null?" && ":""}${ye!=null?`<= ${ye}`:""}`,U)}var Z=w((U,q,fe)=>{if(!l(fe,U)){let ye="must be one of: "+h(n(fe,me=>typeof me=="string"?`'${me}'`:y(me)),", ");throw new _(q,U,ye)}});function ge(U,q){if(typeof U!="boolean")throw new v(q,"boolean",U)}function I(U,q,fe){return U==null||!d(U,q)?fe:U[q]}var K=w((U,q,fe=null)=>{let ye=I(fe,"allowArray",!1),me=I(fe,"allowFunction",!1);if(!I(fe,"nullable",!1)&&U===null||!ye&&t(U)||typeof U!="object"&&(!me||typeof U!="function"))throw new v(q,"Object",U)}),pe=w((U,q)=>{if(U!=null&&typeof U!="object"&&typeof U!="function")throw new v(q,"a dictionary",U)}),be=w((U,q,fe=0)=>{if(!t(U))throw new v(q,"Array",U);if(U.length<fe){let ye=`must be longer than ${fe}`;throw new _(q,U,ye)}});function ue(U,q){be(U,q);for(let fe=0;fe<U.length;fe++)D(U[fe],`${q}[${fe}]`)}function B(U,q){be(U,q);for(let fe=0;fe<U.length;fe++)ge(U[fe],`${q}[${fe}]`)}function A(U,q="signal"){if(D(U,q),W[U]===void 0)throw W[g(U)]!==void 0?new M(U+" (signals must use all capital letters)"):new M(U)}var $=w((U,q="buffer")=>{if(!P(U))throw new v(q,["Buffer","TypedArray","DataView"],U)});function ae(U,q){let fe=k(q),ye=U.length;if(fe==="hex"&&ye%2!==0)throw new _("encoding",q,`is invalid for data of length ${ye}`)}function J(U,q="Port",fe=!0){if(typeof U!="number"&&typeof U!="string"||typeof U=="string"&&m(U).length===0||+U!==+U>>>0||U>65535||U===0&&!fe)throw new S(q,U,fe);return U|0}var Q=w((U,q)=>{if(U!==void 0&&(U===null||typeof U!="object"||!("aborted"in U)))throw new v(q,"AbortSignal",U)}),ce=w((U,q)=>{if(typeof U!="function")throw new v(q,"Function",U)}),ne=w((U,q)=>{if(typeof U!="function"||O(U))throw new v(q,"Function",U)}),R=w((U,q)=>{if(U!==void 0)throw new v(q,"undefined",U)});function L(U,q,fe){if(!l(fe,U))throw new v(q,`('${h(fe,"|")}')`,U)}var N=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function X(U,q){if(typeof U>"u"||!b(N,U))throw new _(q,U,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function Y(U){if(typeof U=="string")return X(U,"hints"),U;if(t(U)){let q=U.length,fe="";if(q===0)return fe;for(let ye=0;ye<q;ye++){let me=U[ye];X(me,"hints"),fe+=me,ye!==q-1&&(fe+=", ")}return fe}throw new _("hints",U,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}o.exports={isInt32:z,isUint32:ee,parseFileMode:H,validateArray:be,validateStringArray:ue,validateBooleanArray:B,validateBoolean:ge,validateBuffer:$,validateDictionary:pe,validateEncoding:ae,validateFunction:ce,validateInt32:le,validateInteger:V,validateNumber:de,validateObject:K,validateOneOf:Z,validatePlainFunction:ne,validatePort:J,validateSignalName:A,validateString:D,validateUint32:G,validateUndefined:R,validateUnion:L,validateAbortSignal:Q,validateLinkHeaderValue:Y}}),Bt=he((e,o)=>{ie(),re(),te();var t=o.exports={},l,h;function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?l=setTimeout:l=n}catch{l=n}try{typeof clearTimeout=="function"?h=clearTimeout:h=r}catch{h=r}})();function s(S){if(l===setTimeout)return setTimeout(S,0);if((l===n||!l)&&setTimeout)return l=setTimeout,setTimeout(S,0);try{return l(S,0)}catch{try{return l.call(null,S,0)}catch{return l.call(this,S,0)}}}function i(S){if(h===clearTimeout)return clearTimeout(S);if((h===r||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(S);try{return h(S)}catch{try{return h.call(null,S)}catch{return h.call(this,S)}}}var a=[],c=!1,d,b=-1;function y(){!c||!d||(c=!1,d.length?a=d.concat(a):b=-1,a.length&&g())}function g(){if(!c){var S=s(y);c=!0;for(var v=a.length;v;){for(d=a,a=[];++b<v;)d&&d[b].run();b=-1,v=a.length}d=null,c=!1,i(S)}}t.nextTick=function(S){var v=new Array(arguments.length-1);if(arguments.length>1)for(var _=1;_<arguments.length;_++)v[_-1]=arguments[_];a.push(new m(S,v)),a.length===1&&!c&&s(g)};function m(S,v){this.fun=S,this.array=v}m.prototype.run=function(){this.fun.apply(null,this.array)},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={};function w(){}t.on=w,t.addListener=w,t.once=w,t.off=w,t.removeListener=w,t.removeAllListeners=w,t.emit=w,t.prependListener=w,t.prependOnceListener=w,t.listeners=function(S){return[]},t.binding=function(S){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(S){throw new Error("process.chdir is not supported")},t.umask=function(){return 0}}),ct=he((e,o)=>{ie(),re(),te();var{Symbol:t,SymbolAsyncIterator:l,SymbolIterator:h,SymbolFor:n}=xe(),r=t("kDestroyed"),s=t("kIsErrored"),i=t("kIsReadable"),a=t("kIsDisturbed"),c=n("nodejs.webstream.isClosedPromise"),d=n("nodejs.webstream.controllerErrorFunction");function b(I,K=!1){var pe;return!!(I&&typeof I.pipe=="function"&&typeof I.on=="function"&&(!K||typeof I.pause=="function"&&typeof I.resume=="function")&&(!I._writableState||((pe=I._readableState)===null||pe===void 0?void 0:pe.readable)!==!1)&&(!I._writableState||I._readableState))}function y(I){var K;return!!(I&&typeof I.write=="function"&&typeof I.on=="function"&&(!I._readableState||((K=I._writableState)===null||K===void 0?void 0:K.writable)!==!1))}function g(I){return!!(I&&typeof I.pipe=="function"&&I._readableState&&typeof I.on=="function"&&typeof I.write=="function")}function m(I){return I&&(I._readableState||I._writableState||typeof I.write=="function"&&typeof I.on=="function"||typeof I.pipe=="function"&&typeof I.on=="function")}function w(I){return!!(I&&!m(I)&&typeof I.pipeThrough=="function"&&typeof I.getReader=="function"&&typeof I.cancel=="function")}function S(I){return!!(I&&!m(I)&&typeof I.getWriter=="function"&&typeof I.abort=="function")}function v(I){return!!(I&&!m(I)&&typeof I.readable=="object"&&typeof I.writable=="object")}function _(I){return w(I)||S(I)||v(I)}function x(I,K){return I==null?!1:K===!0?typeof I[l]=="function":K===!1?typeof I[h]=="function":typeof I[l]=="function"||typeof I[h]=="function"}function M(I){if(!m(I))return null;let K=I._writableState,pe=I._readableState,be=K||pe;return!!(I.destroyed||I[r]||be!=null&&be.destroyed)}function k(I){if(!y(I))return null;if(I.writableEnded===!0)return!0;let K=I._writableState;return K!=null&&K.errored?!1:typeof K?.ended!="boolean"?null:K.ended}function O(I,K){if(!y(I))return null;if(I.writableFinished===!0)return!0;let pe=I._writableState;return pe!=null&&pe.errored?!1:typeof pe?.finished!="boolean"?null:!!(pe.finished||K===!1&&pe.ended===!0&&pe.length===0)}function P(I){if(!b(I))return null;if(I.readableEnded===!0)return!0;let K=I._readableState;return!K||K.errored?!1:typeof K?.ended!="boolean"?null:K.ended}function W(I,K){if(!b(I))return null;let pe=I._readableState;return pe!=null&&pe.errored?!1:typeof pe?.endEmitted!="boolean"?null:!!(pe.endEmitted||K===!1&&pe.ended===!0&&pe.length===0)}function z(I){return I&&I[i]!=null?I[i]:typeof I?.readable!="boolean"?null:M(I)?!1:b(I)&&I.readable&&!W(I)}function ee(I){return typeof I?.writable!="boolean"?null:M(I)?!1:y(I)&&I.writable&&!k(I)}function T(I,K){return m(I)?M(I)?!0:!(K?.readable!==!1&&z(I)||K?.writable!==!1&&ee(I)):null}function F(I){var K,pe;return m(I)?I.writableErrored?I.writableErrored:(K=(pe=I._writableState)===null||pe===void 0?void 0:pe.errored)!==null&&K!==void 0?K:null:null}function H(I){var K,pe;return m(I)?I.readableErrored?I.readableErrored:(K=(pe=I._readableState)===null||pe===void 0?void 0:pe.errored)!==null&&K!==void 0?K:null:null}function V(I){if(!m(I))return null;if(typeof I.closed=="boolean")return I.closed;let K=I._writableState,pe=I._readableState;return typeof K?.closed=="boolean"||typeof pe?.closed=="boolean"?K?.closed||pe?.closed:typeof I._closed=="boolean"&&le(I)?I._closed:null}function le(I){return typeof I._closed=="boolean"&&typeof I._defaultKeepAlive=="boolean"&&typeof I._removedConnection=="boolean"&&typeof I._removedContLen=="boolean"}function G(I){return typeof I._sent100=="boolean"&&le(I)}function D(I){var K;return typeof I._consuming=="boolean"&&typeof I._dumped=="boolean"&&((K=I.req)===null||K===void 0?void 0:K.upgradeOrConnect)===void 0}function de(I){if(!m(I))return null;let K=I._writableState,pe=I._readableState,be=K||pe;return!be&&G(I)||!!(be&&be.autoDestroy&&be.emitClose&&be.closed===!1)}function Z(I){var K;return!!(I&&((K=I[a])!==null&&K!==void 0?K:I.readableDidRead||I.readableAborted))}function ge(I){var K,pe,be,ue,B,A,$,ae,J,Q;return!!(I&&((K=(pe=(be=(ue=(B=(A=I[s])!==null&&A!==void 0?A:I.readableErrored)!==null&&B!==void 0?B:I.writableErrored)!==null&&ue!==void 0?ue:($=I._readableState)===null||$===void 0?void 0:$.errorEmitted)!==null&&be!==void 0?be:(ae=I._writableState)===null||ae===void 0?void 0:ae.errorEmitted)!==null&&pe!==void 0?pe:(J=I._readableState)===null||J===void 0?void 0:J.errored)!==null&&K!==void 0?K:!((Q=I._writableState)===null||Q===void 0)&&Q.errored))}o.exports={kDestroyed:r,isDisturbed:Z,kIsDisturbed:a,isErrored:ge,kIsErrored:s,isReadable:z,kIsReadable:i,kIsClosedPromise:c,kControllerErrorFunction:d,isClosed:V,isDestroyed:M,isDuplexNodeStream:g,isFinished:T,isIterable:x,isReadableNodeStream:b,isReadableStream:w,isReadableEnded:P,isReadableFinished:W,isReadableErrored:H,isNodeStream:m,isWebStream:_,isWritable:ee,isWritableNodeStream:y,isWritableStream:S,isWritableEnded:k,isWritableFinished:O,isWritableErrored:F,isServerRequest:D,isServerResponse:G,willEmitClose:de,isTransformStream:v}}),bt=he((e,o)=>{ie(),re(),te();var t=Bt(),{AbortError:l,codes:h}=Fe(),{ERR_INVALID_ARG_TYPE:n,ERR_STREAM_PREMATURE_CLOSE:r}=h,{kEmptyObject:s,once:i}=lt(),{validateAbortSignal:a,validateFunction:c,validateObject:d,validateBoolean:b}=dr(),{Promise:y,PromisePrototypeThen:g}=xe(),{isClosed:m,isReadable:w,isReadableNodeStream:S,isReadableStream:v,isReadableFinished:_,isReadableErrored:x,isWritable:M,isWritableNodeStream:k,isWritableStream:O,isWritableFinished:P,isWritableErrored:W,isNodeStream:z,willEmitClose:ee,kIsClosedPromise:T}=ct();function F(D){return D.setHeader&&typeof D.abort=="function"}var H=()=>{};function V(D,de,Z){var ge,I;if(arguments.length===2?(Z=de,de=s):de==null?de=s:d(de,"options"),c(Z,"callback"),a(de.signal,"options.signal"),Z=i(Z),v(D)||O(D))return le(D,de,Z);if(!z(D))throw new n("stream",["ReadableStream","WritableStream","Stream"],D);let K=(ge=de.readable)!==null&&ge!==void 0?ge:S(D),pe=(I=de.writable)!==null&&I!==void 0?I:k(D),be=D._writableState,ue=D._readableState,B=()=>{D.writable||ae()},A=ee(D)&&S(D)===K&&k(D)===pe,$=P(D,!1),ae=()=>{$=!0,D.destroyed&&(A=!1),!(A&&(!D.readable||K))&&(!K||J)&&Z.call(D)},J=_(D,!1),Q=()=>{J=!0,D.destroyed&&(A=!1),!(A&&(!D.writable||pe))&&(!pe||$)&&Z.call(D)},ce=Y=>{Z.call(D,Y)},ne=m(D),R=()=>{ne=!0;let Y=W(D)||x(D);if(Y&&typeof Y!="boolean")return Z.call(D,Y);if(K&&!J&&S(D,!0)&&!_(D,!1))return Z.call(D,new r);if(pe&&!$&&!P(D,!1))return Z.call(D,new r);Z.call(D)},L=()=>{ne=!0;let Y=W(D)||x(D);if(Y&&typeof Y!="boolean")return Z.call(D,Y);Z.call(D)},N=()=>{D.req.on("finish",ae)};F(D)?(D.on("complete",ae),A||D.on("abort",R),D.req?N():D.on("request",N)):pe&&!be&&(D.on("end",B),D.on("close",B)),!A&&typeof D.aborted=="boolean"&&D.on("aborted",R),D.on("end",Q),D.on("finish",ae),de.error!==!1&&D.on("error",ce),D.on("close",R),ne?t.nextTick(R):be!=null&&be.errorEmitted||ue!=null&&ue.errorEmitted?A||t.nextTick(L):(!K&&(!A||w(D))&&($||M(D)===!1)||!pe&&(!A||M(D))&&(J||w(D)===!1)||ue&&D.req&&D.aborted)&&t.nextTick(L);let X=()=>{Z=H,D.removeListener("aborted",R),D.removeListener("complete",ae),D.removeListener("abort",R),D.removeListener("request",N),D.req&&D.req.removeListener("finish",ae),D.removeListener("end",B),D.removeListener("close",B),D.removeListener("finish",ae),D.removeListener("end",Q),D.removeListener("error",ce),D.removeListener("close",R)};if(de.signal&&!ne){let Y=()=>{let U=Z;X(),U.call(D,new l(void 0,{cause:de.signal.reason}))};if(de.signal.aborted)t.nextTick(Y);else{let U=Z;Z=i((...q)=>{de.signal.removeEventListener("abort",Y),U.apply(D,q)}),de.signal.addEventListener("abort",Y)}}return X}function le(D,de,Z){let ge=!1,I=H;if(de.signal)if(I=()=>{ge=!0,Z.call(D,new l(void 0,{cause:de.signal.reason}))},de.signal.aborted)t.nextTick(I);else{let pe=Z;Z=i((...be)=>{de.signal.removeEventListener("abort",I),pe.apply(D,be)}),de.signal.addEventListener("abort",I)}let K=(...pe)=>{ge||t.nextTick(()=>Z.apply(D,pe))};return g(D[T].promise,K,K),H}function G(D,de){var Z;let ge=!1;return de===null&&(de=s),(Z=de)!==null&&Z!==void 0&&Z.cleanup&&(b(de.cleanup,"cleanup"),ge=de.cleanup),new y((I,K)=>{let pe=V(D,de,be=>{ge&&pe(),be?K(be):I()})})}o.exports=V,o.exports.finished=G}),jt=he((e,o)=>{ie(),re(),te();var t=Bt(),{aggregateTwoErrors:l,codes:{ERR_MULTIPLE_CALLBACK:h},AbortError:n}=Fe(),{Symbol:r}=xe(),{kDestroyed:s,isDestroyed:i,isFinished:a,isServerRequest:c}=ct(),d=r("kDestroy"),b=r("kConstruct");function y(T,F,H){T&&(T.stack,F&&!F.errored&&(F.errored=T),H&&!H.errored&&(H.errored=T))}function g(T,F){let H=this._readableState,V=this._writableState,le=V||H;return V!=null&&V.destroyed||H!=null&&H.destroyed?(typeof F=="function"&&F(),this):(y(T,V,H),V&&(V.destroyed=!0),H&&(H.destroyed=!0),le.constructed?m(this,T,F):this.once(d,function(G){m(this,l(G,T),F)}),this)}function m(T,F,H){let V=!1;function le(G){if(V)return;V=!0;let D=T._readableState,de=T._writableState;y(G,de,D),de&&(de.closed=!0),D&&(D.closed=!0),typeof H=="function"&&H(G),G?t.nextTick(w,T,G):t.nextTick(S,T)}try{T._destroy(F||null,le)}catch(G){le(G)}}function w(T,F){v(T,F),S(T)}function S(T){let F=T._readableState,H=T._writableState;H&&(H.closeEmitted=!0),F&&(F.closeEmitted=!0),(H!=null&&H.emitClose||F!=null&&F.emitClose)&&T.emit("close")}function v(T,F){let H=T._readableState,V=T._writableState;V!=null&&V.errorEmitted||H!=null&&H.errorEmitted||(V&&(V.errorEmitted=!0),H&&(H.errorEmitted=!0),T.emit("error",F))}function _(){let T=this._readableState,F=this._writableState;T&&(T.constructed=!0,T.closed=!1,T.closeEmitted=!1,T.destroyed=!1,T.errored=null,T.errorEmitted=!1,T.reading=!1,T.ended=T.readable===!1,T.endEmitted=T.readable===!1),F&&(F.constructed=!0,F.destroyed=!1,F.closed=!1,F.closeEmitted=!1,F.errored=null,F.errorEmitted=!1,F.finalCalled=!1,F.prefinished=!1,F.ended=F.writable===!1,F.ending=F.writable===!1,F.finished=F.writable===!1)}function x(T,F,H){let V=T._readableState,le=T._writableState;if(le!=null&&le.destroyed||V!=null&&V.destroyed)return this;V!=null&&V.autoDestroy||le!=null&&le.autoDestroy?T.destroy(F):F&&(F.stack,le&&!le.errored&&(le.errored=F),V&&!V.errored&&(V.errored=F),H?t.nextTick(v,T,F):v(T,F))}function M(T,F){if(typeof T._construct!="function")return;let H=T._readableState,V=T._writableState;H&&(H.constructed=!1),V&&(V.constructed=!1),T.once(b,F),!(T.listenerCount(b)>1)&&t.nextTick(k,T)}function k(T){let F=!1;function H(V){if(F){x(T,V??new h);return}F=!0;let le=T._readableState,G=T._writableState,D=G||le;le&&(le.constructed=!0),G&&(G.constructed=!0),D.destroyed?T.emit(d,V):V?x(T,V,!0):t.nextTick(O,T)}try{T._construct(V=>{t.nextTick(H,V)})}catch(V){t.nextTick(H,V)}}function O(T){T.emit(b)}function P(T){return T?.setHeader&&typeof T.abort=="function"}function W(T){T.emit("close")}function z(T,F){T.emit("error",F),t.nextTick(W,T)}function ee(T,F){!T||i(T)||(!F&&!a(T)&&(F=new n),c(T)?(T.socket=null,T.destroy(F)):P(T)?T.abort():P(T.req)?T.req.abort():typeof T.destroy=="function"?T.destroy(F):typeof T.close=="function"?T.close():F?t.nextTick(z,T,F):t.nextTick(W,T),T.destroyed||(T[s]=!0))}o.exports={construct:M,destroyer:ee,destroy:g,undestroy:_,errorOrDestroy:x}});function Se(){Se.init.call(this)}function nr(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function mo(e){return e._maxListeners===void 0?Se.defaultMaxListeners:e._maxListeners}function gn(e,o,t,l){var h,n,r,s;if(nr(t),(n=e._events)===void 0?(n=e._events=Object.create(null),e._eventsCount=0):(n.newListener!==void 0&&(e.emit("newListener",o,t.listener?t.listener:t),n=e._events),r=n[o]),r===void 0)r=n[o]=t,++e._eventsCount;else if(typeof r=="function"?r=n[o]=l?[t,r]:[r,t]:l?r.unshift(t):r.push(t),(h=mo(e))>0&&r.length>h&&!r.warned){r.warned=!0;var i=new Error("Possible EventEmitter memory leak detected. "+r.length+" "+String(o)+" listeners added. Use emitter.setMaxListeners() to increase limit");i.name="MaxListenersExceededWarning",i.emitter=e,i.type=o,i.count=r.length,s=i,console&&console.warn&&console.warn(s)}return e}function ia(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function bn(e,o,t){var l={fired:!1,wrapFn:void 0,target:e,type:o,listener:t},h=ia.bind(l);return h.listener=t,l.wrapFn=h,h}function mn(e,o,t){var l=e._events;if(l===void 0)return[];var h=l[o];return h===void 0?[]:typeof h=="function"?t?[h.listener||h]:[h]:t?function(n){for(var r=new Array(n.length),s=0;s<r.length;++s)r[s]=n[s].listener||n[s];return r}(h):yo(h,h.length)}function yn(e){var o=this._events;if(o!==void 0){var t=o[e];if(typeof t=="function")return 1;if(t!==void 0)return t.length}return 0}function yo(e,o){for(var t=new Array(o),l=0;l<o;++l)t[l]=e[l];return t}var wn,vn,yt,Sr,Ar,Ir,qe,_n=Ue(()=>{ie(),re(),te(),yt=typeof Reflect=="object"?Reflect:null,Sr=yt&&typeof yt.apply=="function"?yt.apply:function(e,o,t){return Function.prototype.apply.call(e,o,t)},vn=yt&&typeof yt.ownKeys=="function"?yt.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)},Ar=Number.isNaN||function(e){return e!=e},wn=Se,Se.EventEmitter=Se,Se.prototype._events=void 0,Se.prototype._eventsCount=0,Se.prototype._maxListeners=void 0,Ir=10,Object.defineProperty(Se,"defaultMaxListeners",{enumerable:!0,get:function(){return Ir},set:function(e){if(typeof e!="number"||e<0||Ar(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");Ir=e}}),Se.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},Se.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||Ar(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},Se.prototype.getMaxListeners=function(){return mo(this)},Se.prototype.emit=function(e){for(var o=[],t=1;t<arguments.length;t++)o.push(arguments[t]);var l=e==="error",h=this._events;if(h!==void 0)l=l&&h.error===void 0;else if(!l)return!1;if(l){var n;if(o.length>0&&(n=o[0]),n instanceof Error)throw n;var r=new Error("Unhandled error."+(n?" ("+n.message+")":""));throw r.context=n,r}var s=h[e];if(s===void 0)return!1;if(typeof s=="function")Sr(s,this,o);else{var i=s.length,a=yo(s,i);for(t=0;t<i;++t)Sr(a[t],this,o)}return!0},Se.prototype.addListener=function(e,o){return gn(this,e,o,!1)},Se.prototype.on=Se.prototype.addListener,Se.prototype.prependListener=function(e,o){return gn(this,e,o,!0)},Se.prototype.once=function(e,o){return nr(o),this.on(e,bn(this,e,o)),this},Se.prototype.prependOnceListener=function(e,o){return nr(o),this.prependListener(e,bn(this,e,o)),this},Se.prototype.removeListener=function(e,o){var t,l,h,n,r;if(nr(o),(l=this._events)===void 0)return this;if((t=l[e])===void 0)return this;if(t===o||t.listener===o)--this._eventsCount==0?this._events=Object.create(null):(delete l[e],l.removeListener&&this.emit("removeListener",e,t.listener||o));else if(typeof t!="function"){for(h=-1,n=t.length-1;n>=0;n--)if(t[n]===o||t[n].listener===o){r=t[n].listener,h=n;break}if(h<0)return this;h===0?t.shift():function(s,i){for(;i+1<s.length;i++)s[i]=s[i+1];s.pop()}(t,h),t.length===1&&(l[e]=t[0]),l.removeListener!==void 0&&this.emit("removeListener",e,r||o)}return this},Se.prototype.off=Se.prototype.removeListener,Se.prototype.removeAllListeners=function(e){var o,t,l;if((t=this._events)===void 0)return this;if(t.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):t[e]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete t[e]),this;if(arguments.length===0){var h,n=Object.keys(t);for(l=0;l<n.length;++l)(h=n[l])!=="removeListener"&&this.removeAllListeners(h);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(o=t[e])=="function")this.removeListener(e,o);else if(o!==void 0)for(l=o.length-1;l>=0;l--)this.removeListener(e,o[l]);return this},Se.prototype.listeners=function(e){return mn(this,e,!0)},Se.prototype.rawListeners=function(e){return mn(this,e,!1)},Se.listenerCount=function(e,o){return typeof e.listenerCount=="function"?e.listenerCount(o):yn.call(e,o)},Se.prototype.listenerCount=yn,Se.prototype.eventNames=function(){return this._eventsCount>0?vn(this._events):[]},qe=wn,qe.EventEmitter,qe.defaultMaxListeners,qe.init,qe.listenerCount,qe.EventEmitter,qe.defaultMaxListeners,qe.init,qe.listenerCount}),xt={};Pt(xt,{EventEmitter:()=>wo,default:()=>qe,defaultMaxListeners:()=>vo,init:()=>_o,listenerCount:()=>Eo,on:()=>So,once:()=>Ao});var wo,vo,_o,Eo,So,Ao,Dt=Ue(()=>{ie(),re(),te(),_n(),_n(),qe.once=function(e,o){return new Promise((t,l)=>{function h(...r){n!==void 0&&e.removeListener("error",n),t(r)}let n;o!=="error"&&(n=r=>{e.removeListener(name,h),l(r)},e.once("error",n)),e.once(o,h)})},qe.on=function(e,o){let t=[],l=[],h=null,n=!1,r={async next(){let a=t.shift();if(a)return createIterResult(a,!1);if(h){let c=Promise.reject(h);return h=null,c}return n?createIterResult(void 0,!0):new Promise((c,d)=>l.push({resolve:c,reject:d}))},async return(){e.removeListener(o,s),e.removeListener("error",i),n=!0;for(let a of l)a.resolve(createIterResult(void 0,!0));return createIterResult(void 0,!0)},throw(a){h=a,e.removeListener(o,s),e.removeListener("error",i)},[Symbol.asyncIterator](){return this}};return e.on(o,s),e.on("error",i),r;function s(...a){let c=l.shift();c?c.resolve(createIterResult(a,!1)):t.push(a)}function i(a){n=!0;let c=l.shift();c?c.reject(a):h=a,r.return()}},{EventEmitter:wo,defaultMaxListeners:vo,init:_o,listenerCount:Eo,on:So,once:Ao}=qe}),sn=he((e,o)=>{ie(),re(),te();var{ArrayIsArray:t,ObjectSetPrototypeOf:l}=xe(),{EventEmitter:h}=(Dt(),Ie(xt));function n(s){h.call(this,s)}l(n.prototype,h.prototype),l(n,h),n.prototype.pipe=function(s,i){let a=this;function c(S){s.writable&&s.write(S)===!1&&a.pause&&a.pause()}a.on("data",c);function d(){a.readable&&a.resume&&a.resume()}s.on("drain",d),!s._isStdio&&(!i||i.end!==!1)&&(a.on("end",y),a.on("close",g));let b=!1;function y(){b||(b=!0,s.end())}function g(){b||(b=!0,typeof s.destroy=="function"&&s.destroy())}function m(S){w(),h.listenerCount(this,"error")===0&&this.emit("error",S)}r(a,"error",m),r(s,"error",m);function w(){a.removeListener("data",c),s.removeListener("drain",d),a.removeListener("end",y),a.removeListener("close",g),a.removeListener("error",m),s.removeListener("error",m),a.removeListener("end",w),a.removeListener("close",w),s.removeListener("close",w)}return a.on("end",w),a.on("close",w),s.on("close",w),s.emit("pipe",a),s};function r(s,i,a){if(typeof s.prependListener=="function")return s.prependListener(i,a);!s._events||!s._events[i]?s.on(i,a):t(s._events[i])?s._events[i].unshift(a):s._events[i]=[a,s._events[i]]}o.exports={Stream:n,prependListener:r}}),pr=he((e,o)=>{ie(),re(),te();var{AbortError:t,codes:l}=Fe(),{isNodeStream:h,isWebStream:n,kControllerErrorFunction:r}=ct(),s=bt(),{ERR_INVALID_ARG_TYPE:i}=l,a=(c,d)=>{if(typeof c!="object"||!("aborted"in c))throw new i(d,"AbortSignal",c)};o.exports.addAbortSignal=function(c,d){if(a(c,"signal"),!h(d)&&!n(d))throw new i("stream",["ReadableStream","WritableStream","Stream"],d);return o.exports.addAbortSignalNoValidate(c,d)},o.exports.addAbortSignalNoValidate=function(c,d){if(typeof c!="object"||!("aborted"in c))return d;let b=h(d)?()=>{d.destroy(new t(void 0,{cause:c.reason}))}:()=>{d[r](new t(void 0,{cause:c.reason}))};return c.aborted?b():(c.addEventListener("abort",b),s(d,()=>c.removeEventListener("abort",b))),d}}),na=he((e,o)=>{ie(),re(),te();var{StringPrototypeSlice:t,SymbolIterator:l,TypedArrayPrototypeSet:h,Uint8Array:n}=xe(),{Buffer:r}=(Ne(),Ie(Le)),{inspect:s}=lt();o.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(i){let a={data:i,next:null};this.length>0?this.tail.next=a:this.head=a,this.tail=a,++this.length}unshift(i){let a={data:i,next:this.head};this.length===0&&(this.tail=a),this.head=a,++this.length}shift(){if(this.length===0)return;let i=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,i}clear(){this.head=this.tail=null,this.length=0}join(i){if(this.length===0)return"";let a=this.head,c=""+a.data;for(;(a=a.next)!==null;)c+=i+a.data;return c}concat(i){if(this.length===0)return r.alloc(0);let a=r.allocUnsafe(i>>>0),c=this.head,d=0;for(;c;)h(a,c.data,d),d+=c.data.length,c=c.next;return a}consume(i,a){let c=this.head.data;if(i<c.length){let d=c.slice(0,i);return this.head.data=c.slice(i),d}return i===c.length?this.shift():a?this._getString(i):this._getBuffer(i)}first(){return this.head.data}*[l](){for(let i=this.head;i;i=i.next)yield i.data}_getString(i){let a="",c=this.head,d=0;do{let b=c.data;if(i>b.length)a+=b,i-=b.length;else{i===b.length?(a+=b,++d,c.next?this.head=c.next:this.head=this.tail=null):(a+=t(b,0,i),this.head=c,c.data=t(b,i));break}++d}while((c=c.next)!==null);return this.length-=d,a}_getBuffer(i){let a=r.allocUnsafe(i),c=i,d=this.head,b=0;do{let y=d.data;if(i>y.length)h(a,y,c-i),i-=y.length;else{i===y.length?(h(a,y,c-i),++b,d.next?this.head=d.next:this.head=this.tail=null):(h(a,new n(y.buffer,y.byteOffset,i),c-i),this.head=d,d.data=y.slice(i));break}++b}while((d=d.next)!==null);return this.length-=b,a}[Symbol.for("nodejs.util.inspect.custom")](i,a){return s(this,{...a,depth:0,customInspect:!1})}}}),an=he((e,o)=>{ie(),re(),te();var{MathFloor:t,NumberIsInteger:l}=xe(),{ERR_INVALID_ARG_VALUE:h}=Fe().codes;function n(i,a,c){return i.highWaterMark!=null?i.highWaterMark:a?i[c]:null}function r(i){return i?16:16*1024}function s(i,a,c,d){let b=n(a,d,c);if(b!=null){if(!l(b)||b<0){let y=d?`options.${c}`:"options.highWaterMark";throw new h(y,b)}return t(b)}return r(i.objectMode)}o.exports={getHighWaterMark:s,getDefaultHighWaterMark:r}});function En(e){var o=e.length;if(o%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=e.indexOf("=");return t===-1&&(t=o),[t,t===o?0:4-t%4]}function oa(e,o,t){for(var l,h,n=[],r=o;r<t;r+=3)l=(e[r]<<16&16711680)+(e[r+1]<<8&65280)+(255&e[r+2]),n.push(Qe[(h=l)>>18&63]+Qe[h>>12&63]+Qe[h>>6&63]+Qe[63&h]);return n.join("")}function st(e){if(e>2147483647)throw new RangeError('The value "'+e+'" is invalid for option "size"');var o=new Uint8Array(e);return Object.setPrototypeOf(o,oe.prototype),o}function oe(e,o,t){if(typeof e=="number"){if(typeof o=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return $i(e)}return Io(e,o,t)}function Io(e,o,t){if(typeof e=="string")return function(n,r){if(typeof r=="string"&&r!==""||(r="utf8"),!oe.isEncoding(r))throw new TypeError("Unknown encoding: "+r);var s=0|ko(n,r),i=st(s),a=i.write(n,r);return a!==s&&(i=i.slice(0,a)),i}(e,o);if(ArrayBuffer.isView(e))return Tr(e);if(e==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(at(e,ArrayBuffer)||e&&at(e.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(at(e,SharedArrayBuffer)||e&&at(e.buffer,SharedArrayBuffer)))return sa(e,o,t);if(typeof e=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var l=e.valueOf&&e.valueOf();if(l!=null&&l!==e)return oe.from(l,o,t);var h=function(n){if(oe.isBuffer(n)){var r=0|ln(n.length),s=st(r);return s.length===0||n.copy(s,0,0,r),s}if(n.length!==void 0)return typeof n.length!="number"||un(n.length)?st(0):Tr(n);if(n.type==="Buffer"&&Array.isArray(n.data))return Tr(n.data)}(e);if(h)return h;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof e[Symbol.toPrimitive]=="function")return oe.from(e[Symbol.toPrimitive]("string"),o,t);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function To(e){if(typeof e!="number")throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function $i(e){return To(e),st(e<0?0:0|ln(e))}function Tr(e){for(var o=e.length<0?0:0|ln(e.length),t=st(o),l=0;l<o;l+=1)t[l]=255&e[l];return t}function sa(e,o,t){if(o<0||e.byteLength<o)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<o+(t||0))throw new RangeError('"length" is outside of buffer bounds');var l;return l=o===void 0&&t===void 0?new Uint8Array(e):t===void 0?new Uint8Array(e,o):new Uint8Array(e,o,t),Object.setPrototypeOf(l,oe.prototype),l}function ln(e){if(e>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|e}function ko(e,o){if(oe.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||at(e,ArrayBuffer))return e.byteLength;if(typeof e!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var t=e.length,l=arguments.length>2&&arguments[2]===!0;if(!l&&t===0)return 0;for(var h=!1;;)switch(o){case"ascii":case"latin1":case"binary":return t;case"utf8":case"utf-8":return qi(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*t;case"hex":return t>>>1;case"base64":return Po(e).length;default:if(h)return l?-1:qi(e).length;o=(""+o).toLowerCase(),h=!0}}function aa(e,o,t){var l=!1;if((o===void 0||o<0)&&(o=0),o>this.length||((t===void 0||t>this.length)&&(t=this.length),t<=0)||(t>>>=0)<=(o>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return ba(this,o,t);case"utf8":case"utf-8":return Ro(this,o,t);case"ascii":return pa(this,o,t);case"latin1":case"binary":return ga(this,o,t);case"base64":return da(this,o,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ma(this,o,t);default:if(l)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),l=!0}}function wt(e,o,t){var l=e[o];e[o]=e[t],e[t]=l}function Sn(e,o,t,l,h){if(e.length===0)return-1;if(typeof t=="string"?(l=t,t=0):t>2147483647?t=2147483647:t<-2147483648&&(t=-2147483648),un(t=+t)&&(t=h?0:e.length-1),t<0&&(t=e.length+t),t>=e.length){if(h)return-1;t=e.length-1}else if(t<0){if(!h)return-1;t=0}if(typeof o=="string"&&(o=oe.from(o,l)),oe.isBuffer(o))return o.length===0?-1:An(e,o,t,l,h);if(typeof o=="number")return o&=255,typeof Uint8Array.prototype.indexOf=="function"?h?Uint8Array.prototype.indexOf.call(e,o,t):Uint8Array.prototype.lastIndexOf.call(e,o,t):An(e,[o],t,l,h);throw new TypeError("val must be string, number or Buffer")}function An(e,o,t,l,h){var n,r=1,s=e.length,i=o.length;if(l!==void 0&&((l=String(l).toLowerCase())==="ucs2"||l==="ucs-2"||l==="utf16le"||l==="utf-16le")){if(e.length<2||o.length<2)return-1;r=2,s/=2,i/=2,t/=2}function a(y,g){return r===1?y[g]:y.readUInt16BE(g*r)}if(h){var c=-1;for(n=t;n<s;n++)if(a(e,n)===a(o,c===-1?0:n-c)){if(c===-1&&(c=n),n-c+1===i)return c*r}else c!==-1&&(n-=n-c),c=-1}else for(t+i>s&&(t=s-i),n=t;n>=0;n--){for(var d=!0,b=0;b<i;b++)if(a(e,n+b)!==a(o,b)){d=!1;break}if(d)return n}return-1}function la(e,o,t,l){t=Number(t)||0;var h=e.length-t;l?(l=Number(l))>h&&(l=h):l=h;var n=o.length;l>n/2&&(l=n/2);for(var r=0;r<l;++r){var s=parseInt(o.substr(2*r,2),16);if(un(s))return r;e[t+r]=s}return r}function ua(e,o,t,l){return gr(qi(o,e.length-t),e,t,l)}function Oo(e,o,t,l){return gr(function(h){for(var n=[],r=0;r<h.length;++r)n.push(255&h.charCodeAt(r));return n}(o),e,t,l)}function ha(e,o,t,l){return Oo(e,o,t,l)}function ca(e,o,t,l){return gr(Po(o),e,t,l)}function fa(e,o,t,l){return gr(function(h,n){for(var r,s,i,a=[],c=0;c<h.length&&!((n-=2)<0);++c)r=h.charCodeAt(c),s=r>>8,i=r%256,a.push(i),a.push(s);return a}(o,e.length-t),e,t,l)}function da(e,o,t){return o===0&&t===e.length?ur.fromByteArray(e):ur.fromByteArray(e.slice(o,t))}function Ro(e,o,t){t=Math.min(e.length,t);for(var l=[],h=o;h<t;){var n,r,s,i,a=e[h],c=null,d=a>239?4:a>223?3:a>191?2:1;if(h+d<=t)switch(d){case 1:a<128&&(c=a);break;case 2:(192&(n=e[h+1]))==128&&(i=(31&a)<<6|63&n)>127&&(c=i);break;case 3:n=e[h+1],r=e[h+2],(192&n)==128&&(192&r)==128&&(i=(15&a)<<12|(63&n)<<6|63&r)>2047&&(i<55296||i>57343)&&(c=i);break;case 4:n=e[h+1],r=e[h+2],s=e[h+3],(192&n)==128&&(192&r)==128&&(192&s)==128&&(i=(15&a)<<18|(63&n)<<12|(63&r)<<6|63&s)>65535&&i<1114112&&(c=i)}c===null?(c=65533,d=1):c>65535&&(c-=65536,l.push(c>>>10&1023|55296),c=56320|1023&c),l.push(c),h+=d}return function(b){var y=b.length;if(y<=4096)return String.fromCharCode.apply(String,b);for(var g="",m=0;m<y;)g+=String.fromCharCode.apply(String,b.slice(m,m+=4096));return g}(l)}function pa(e,o,t){var l="";t=Math.min(e.length,t);for(var h=o;h<t;++h)l+=String.fromCharCode(127&e[h]);return l}function ga(e,o,t){var l="";t=Math.min(e.length,t);for(var h=o;h<t;++h)l+=String.fromCharCode(e[h]);return l}function ba(e,o,t){var l=e.length;(!o||o<0)&&(o=0),(!t||t<0||t>l)&&(t=l);for(var h="",n=o;n<t;++n)h+=xo[e[n]];return h}function ma(e,o,t){for(var l=e.slice(o,t),h="",n=0;n<l.length;n+=2)h+=String.fromCharCode(l[n]+256*l[n+1]);return h}function Me(e,o,t){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+o>t)throw new RangeError("Trying to access beyond buffer length")}function De(e,o,t,l,h,n){if(!oe.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(o>h||o<n)throw new RangeError('"value" argument is out of bounds');if(t+l>e.length)throw new RangeError("Index out of range")}function Co(e,o,t,l,h,n){if(t+l>e.length)throw new RangeError("Index out of range");if(t<0)throw new RangeError("Index out of range")}function In(e,o,t,l,h){return o=+o,t>>>=0,h||Co(e,0,t,4),It.write(e,o,t,l,23,4),t+4}function Tn(e,o,t,l,h){return o=+o,t>>>=0,h||Co(e,0,t,8),It.write(e,o,t,l,52,8),t+8}function qi(e,o){var t;o=o||1/0;for(var l=e.length,h=null,n=[],r=0;r<l;++r){if((t=e.charCodeAt(r))>55295&&t<57344){if(!h){if(t>56319){(o-=3)>-1&&n.push(239,191,189);continue}if(r+1===l){(o-=3)>-1&&n.push(239,191,189);continue}h=t;continue}if(t<56320){(o-=3)>-1&&n.push(239,191,189),h=t;continue}t=65536+(h-55296<<10|t-56320)}else h&&(o-=3)>-1&&n.push(239,191,189);if(h=null,t<128){if((o-=1)<0)break;n.push(t)}else if(t<2048){if((o-=2)<0)break;n.push(t>>6|192,63&t|128)}else if(t<65536){if((o-=3)<0)break;n.push(t>>12|224,t>>6&63|128,63&t|128)}else{if(!(t<1114112))throw new Error("Invalid code point");if((o-=4)<0)break;n.push(t>>18|240,t>>12&63|128,t>>6&63|128,63&t|128)}}return n}function Po(e){return ur.toByteArray(function(o){if((o=(o=o.split("=")[0]).trim().replace(Bo,"")).length<2)return"";for(;o.length%4!=0;)o+="=";return o}(e))}function gr(e,o,t,l){for(var h=0;h<l&&!(h+t>=o.length||h>=e.length);++h)o[h+t]=e[h];return h}function at(e,o){return e instanceof o||e!=null&&e.constructor!=null&&e.constructor.name!=null&&e.constructor.name===o.name}function un(e){return e!=e}function kn(e,o){for(var t in e)o[t]=e[t]}function vt(e,o,t){return ze(e,o,t)}function Wt(e){var o;switch(this.encoding=function(t){var l=function(h){if(!h)return"utf8";for(var n;;)switch(h){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return h;default:if(n)return;h=(""+h).toLowerCase(),n=!0}}(t);if(typeof l!="string"&&(hr.isEncoding===Vi||!Vi(t)))throw new Error("Unknown encoding: "+t);return l||t}(e),this.encoding){case"utf16le":this.text=wa,this.end=va,o=4;break;case"utf8":this.fillLast=ya,o=4;break;case"base64":this.text=_a,this.end=Ea,o=3;break;default:return this.write=Sa,this.end=Aa,void 0}this.lastNeed=0,this.lastTotal=0,this.lastChar=hr.allocUnsafe(o)}function kr(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function ya(e){var o=this.lastTotal-this.lastNeed,t=function(l,h,n){if((192&h[0])!=128)return l.lastNeed=0,"";if(l.lastNeed>1&&h.length>1){if((192&h[1])!=128)return l.lastNeed=1,"";if(l.lastNeed>2&&h.length>2&&(192&h[2])!=128)return l.lastNeed=2,""}}(this,e);return t!==void 0?t:this.lastNeed<=e.length?(e.copy(this.lastChar,o,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,o,0,e.length),this.lastNeed-=e.length,void 0)}function wa(e,o){if((e.length-o)%2==0){var t=e.toString("utf16le",o);if(t){var l=t.charCodeAt(t.length-1);if(l>=55296&&l<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],t.slice(0,-1)}return t}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",o,e.length-1)}function va(e){var o=e&&e.length?this.write(e):"";if(this.lastNeed){var t=this.lastTotal-this.lastNeed;return o+this.lastChar.toString("utf16le",0,t)}return o}function _a(e,o){var t=(e.length-o)%3;return t===0?e.toString("base64",o):(this.lastNeed=3-t,this.lastTotal=3,t===1?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",o,e.length-t))}function Ea(e){var o=e&&e.length?this.write(e):"";return this.lastNeed?o+this.lastChar.toString("base64",0,3-this.lastNeed):o}function Sa(e){return e.toString(this.encoding)}function Aa(e){return e&&e.length?this.write(e):""}var On,Qe,We,Rn,Jt,_t,Cn,Pn,Ye,ur,It,Or,Bo,xo,$t,qt,ze,Bn,Nt,hr,Vi,xn=Ue(()=>{for(ie(),re(),te(),On={byteLength:function(e){var o=En(e),t=o[0],l=o[1];return 3*(t+l)/4-l},toByteArray:function(e){var o,t,l=En(e),h=l[0],n=l[1],r=new Rn(function(a,c,d){return 3*(c+d)/4-d}(0,h,n)),s=0,i=n>0?h-4:h;for(t=0;t<i;t+=4)o=We[e.charCodeAt(t)]<<18|We[e.charCodeAt(t+1)]<<12|We[e.charCodeAt(t+2)]<<6|We[e.charCodeAt(t+3)],r[s++]=o>>16&255,r[s++]=o>>8&255,r[s++]=255&o;return n===2&&(o=We[e.charCodeAt(t)]<<2|We[e.charCodeAt(t+1)]>>4,r[s++]=255&o),n===1&&(o=We[e.charCodeAt(t)]<<10|We[e.charCodeAt(t+1)]<<4|We[e.charCodeAt(t+2)]>>2,r[s++]=o>>8&255,r[s++]=255&o),r},fromByteArray:function(e){for(var o,t=e.length,l=t%3,h=[],n=0,r=t-l;n<r;n+=16383)h.push(oa(e,n,n+16383>r?r:n+16383));return l===1?(o=e[t-1],h.push(Qe[o>>2]+Qe[o<<4&63]+"==")):l===2&&(o=(e[t-2]<<8)+e[t-1],h.push(Qe[o>>10]+Qe[o>>4&63]+Qe[o<<2&63]+"=")),h.join("")}},Qe=[],We=[],Rn=typeof Uint8Array<"u"?Uint8Array:Array,Jt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",_t=0,Cn=Jt.length;_t<Cn;++_t)Qe[_t]=Jt[_t],We[Jt.charCodeAt(_t)]=_t;We[45]=62,We[95]=63,Pn={read:function(e,o,t,l,h){var n,r,s=8*h-l-1,i=(1<<s)-1,a=i>>1,c=-7,d=t?h-1:0,b=t?-1:1,y=e[o+d];for(d+=b,n=y&(1<<-c)-1,y>>=-c,c+=s;c>0;n=256*n+e[o+d],d+=b,c-=8);for(r=n&(1<<-c)-1,n>>=-c,c+=l;c>0;r=256*r+e[o+d],d+=b,c-=8);if(n===0)n=1-a;else{if(n===i)return r?NaN:1/0*(y?-1:1);r+=Math.pow(2,l),n-=a}return(y?-1:1)*r*Math.pow(2,n-l)},write:function(e,o,t,l,h,n){var r,s,i,a=8*n-h-1,c=(1<<a)-1,d=c>>1,b=h===23?Math.pow(2,-24)-Math.pow(2,-77):0,y=l?0:n-1,g=l?1:-1,m=o<0||o===0&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(s=isNaN(o)?1:0,r=c):(r=Math.floor(Math.log(o)/Math.LN2),o*(i=Math.pow(2,-r))<1&&(r--,i*=2),(o+=r+d>=1?b/i:b*Math.pow(2,1-d))*i>=2&&(r++,i/=2),r+d>=c?(s=0,r=c):r+d>=1?(s=(o*i-1)*Math.pow(2,h),r+=d):(s=o*Math.pow(2,d-1)*Math.pow(2,h),r=0));h>=8;e[t+y]=255&s,y+=g,s/=256,h-=8);for(r=r<<h|s,a+=h;a>0;e[t+y]=255&r,y+=g,r/=256,a-=8);e[t+y-g]|=128*m}},Ye={},ur=On,It=Pn,Or=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null,Ye.Buffer=oe,Ye.SlowBuffer=function(e){return+e!=e&&(e=0),oe.alloc(+e)},Ye.INSPECT_MAX_BYTES=50,Ye.kMaxLength=2147483647,oe.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),o={foo:function(){return 42}};return Object.setPrototypeOf(o,Uint8Array.prototype),Object.setPrototypeOf(e,o),e.foo()===42}catch{return!1}}(),oe.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(oe.prototype,"parent",{enumerable:!0,get:function(){if(oe.isBuffer(this))return this.buffer}}),Object.defineProperty(oe.prototype,"offset",{enumerable:!0,get:function(){if(oe.isBuffer(this))return this.byteOffset}}),oe.poolSize=8192,oe.from=function(e,o,t){return Io(e,o,t)},Object.setPrototypeOf(oe.prototype,Uint8Array.prototype),Object.setPrototypeOf(oe,Uint8Array),oe.alloc=function(e,o,t){return function(l,h,n){return To(l),l<=0?st(l):h!==void 0?typeof n=="string"?st(l).fill(h,n):st(l).fill(h):st(l)}(e,o,t)},oe.allocUnsafe=function(e){return $i(e)},oe.allocUnsafeSlow=function(e){return $i(e)},oe.isBuffer=function(e){return e!=null&&e._isBuffer===!0&&e!==oe.prototype},oe.compare=function(e,o){if(at(e,Uint8Array)&&(e=oe.from(e,e.offset,e.byteLength)),at(o,Uint8Array)&&(o=oe.from(o,o.offset,o.byteLength)),!oe.isBuffer(e)||!oe.isBuffer(o))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===o)return 0;for(var t=e.length,l=o.length,h=0,n=Math.min(t,l);h<n;++h)if(e[h]!==o[h]){t=e[h],l=o[h];break}return t<l?-1:l<t?1:0},oe.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},oe.concat=function(e,o){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return oe.alloc(0);var t;if(o===void 0)for(o=0,t=0;t<e.length;++t)o+=e[t].length;var l=oe.allocUnsafe(o),h=0;for(t=0;t<e.length;++t){var n=e[t];if(at(n,Uint8Array)&&(n=oe.from(n)),!oe.isBuffer(n))throw new TypeError('"list" argument must be an Array of Buffers');n.copy(l,h),h+=n.length}return l},oe.byteLength=ko,oe.prototype._isBuffer=!0,oe.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var o=0;o<e;o+=2)wt(this,o,o+1);return this},oe.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var o=0;o<e;o+=4)wt(this,o,o+3),wt(this,o+1,o+2);return this},oe.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var o=0;o<e;o+=8)wt(this,o,o+7),wt(this,o+1,o+6),wt(this,o+2,o+5),wt(this,o+3,o+4);return this},oe.prototype.toString=function(){var e=this.length;return e===0?"":arguments.length===0?Ro(this,0,e):aa.apply(this,arguments)},oe.prototype.toLocaleString=oe.prototype.toString,oe.prototype.equals=function(e){if(!oe.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||oe.compare(this,e)===0},oe.prototype.inspect=function(){var e="",o=Ye.INSPECT_MAX_BYTES;return e=this.toString("hex",0,o).replace(/(.{2})/g,"$1 ").trim(),this.length>o&&(e+=" ... "),"<Buffer "+e+">"},Or&&(oe.prototype[Or]=oe.prototype.inspect),oe.prototype.compare=function(e,o,t,l,h){if(at(e,Uint8Array)&&(e=oe.from(e,e.offset,e.byteLength)),!oe.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(o===void 0&&(o=0),t===void 0&&(t=e?e.length:0),l===void 0&&(l=0),h===void 0&&(h=this.length),o<0||t>e.length||l<0||h>this.length)throw new RangeError("out of range index");if(l>=h&&o>=t)return 0;if(l>=h)return-1;if(o>=t)return 1;if(this===e)return 0;for(var n=(h>>>=0)-(l>>>=0),r=(t>>>=0)-(o>>>=0),s=Math.min(n,r),i=this.slice(l,h),a=e.slice(o,t),c=0;c<s;++c)if(i[c]!==a[c]){n=i[c],r=a[c];break}return n<r?-1:r<n?1:0},oe.prototype.includes=function(e,o,t){return this.indexOf(e,o,t)!==-1},oe.prototype.indexOf=function(e,o,t){return Sn(this,e,o,t,!0)},oe.prototype.lastIndexOf=function(e,o,t){return Sn(this,e,o,t,!1)},oe.prototype.write=function(e,o,t,l){if(o===void 0)l="utf8",t=this.length,o=0;else if(t===void 0&&typeof o=="string")l=o,t=this.length,o=0;else{if(!isFinite(o))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");o>>>=0,isFinite(t)?(t>>>=0,l===void 0&&(l="utf8")):(l=t,t=void 0)}var h=this.length-o;if((t===void 0||t>h)&&(t=h),e.length>0&&(t<0||o<0)||o>this.length)throw new RangeError("Attempt to write outside buffer bounds");l||(l="utf8");for(var n=!1;;)switch(l){case"hex":return la(this,e,o,t);case"utf8":case"utf-8":return ua(this,e,o,t);case"ascii":return Oo(this,e,o,t);case"latin1":case"binary":return ha(this,e,o,t);case"base64":return ca(this,e,o,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return fa(this,e,o,t);default:if(n)throw new TypeError("Unknown encoding: "+l);l=(""+l).toLowerCase(),n=!0}},oe.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},oe.prototype.slice=function(e,o){var t=this.length;(e=~~e)<0?(e+=t)<0&&(e=0):e>t&&(e=t),(o=o===void 0?t:~~o)<0?(o+=t)<0&&(o=0):o>t&&(o=t),o<e&&(o=e);var l=this.subarray(e,o);return Object.setPrototypeOf(l,oe.prototype),l},oe.prototype.readUIntLE=function(e,o,t){e>>>=0,o>>>=0,t||Me(e,o,this.length);for(var l=this[e],h=1,n=0;++n<o&&(h*=256);)l+=this[e+n]*h;return l},oe.prototype.readUIntBE=function(e,o,t){e>>>=0,o>>>=0,t||Me(e,o,this.length);for(var l=this[e+--o],h=1;o>0&&(h*=256);)l+=this[e+--o]*h;return l},oe.prototype.readUInt8=function(e,o){return e>>>=0,o||Me(e,1,this.length),this[e]},oe.prototype.readUInt16LE=function(e,o){return e>>>=0,o||Me(e,2,this.length),this[e]|this[e+1]<<8},oe.prototype.readUInt16BE=function(e,o){return e>>>=0,o||Me(e,2,this.length),this[e]<<8|this[e+1]},oe.prototype.readUInt32LE=function(e,o){return e>>>=0,o||Me(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},oe.prototype.readUInt32BE=function(e,o){return e>>>=0,o||Me(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},oe.prototype.readIntLE=function(e,o,t){e>>>=0,o>>>=0,t||Me(e,o,this.length);for(var l=this[e],h=1,n=0;++n<o&&(h*=256);)l+=this[e+n]*h;return l>=(h*=128)&&(l-=Math.pow(2,8*o)),l},oe.prototype.readIntBE=function(e,o,t){e>>>=0,o>>>=0,t||Me(e,o,this.length);for(var l=o,h=1,n=this[e+--l];l>0&&(h*=256);)n+=this[e+--l]*h;return n>=(h*=128)&&(n-=Math.pow(2,8*o)),n},oe.prototype.readInt8=function(e,o){return e>>>=0,o||Me(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},oe.prototype.readInt16LE=function(e,o){e>>>=0,o||Me(e,2,this.length);var t=this[e]|this[e+1]<<8;return 32768&t?4294901760|t:t},oe.prototype.readInt16BE=function(e,o){e>>>=0,o||Me(e,2,this.length);var t=this[e+1]|this[e]<<8;return 32768&t?4294901760|t:t},oe.prototype.readInt32LE=function(e,o){return e>>>=0,o||Me(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},oe.prototype.readInt32BE=function(e,o){return e>>>=0,o||Me(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},oe.prototype.readFloatLE=function(e,o){return e>>>=0,o||Me(e,4,this.length),It.read(this,e,!0,23,4)},oe.prototype.readFloatBE=function(e,o){return e>>>=0,o||Me(e,4,this.length),It.read(this,e,!1,23,4)},oe.prototype.readDoubleLE=function(e,o){return e>>>=0,o||Me(e,8,this.length),It.read(this,e,!0,52,8)},oe.prototype.readDoubleBE=function(e,o){return e>>>=0,o||Me(e,8,this.length),It.read(this,e,!1,52,8)},oe.prototype.writeUIntLE=function(e,o,t,l){e=+e,o>>>=0,t>>>=0,l||De(this,e,o,t,Math.pow(2,8*t)-1,0);var h=1,n=0;for(this[o]=255&e;++n<t&&(h*=256);)this[o+n]=e/h&255;return o+t},oe.prototype.writeUIntBE=function(e,o,t,l){e=+e,o>>>=0,t>>>=0,l||De(this,e,o,t,Math.pow(2,8*t)-1,0);var h=t-1,n=1;for(this[o+h]=255&e;--h>=0&&(n*=256);)this[o+h]=e/n&255;return o+t},oe.prototype.writeUInt8=function(e,o,t){return e=+e,o>>>=0,t||De(this,e,o,1,255,0),this[o]=255&e,o+1},oe.prototype.writeUInt16LE=function(e,o,t){return e=+e,o>>>=0,t||De(this,e,o,2,65535,0),this[o]=255&e,this[o+1]=e>>>8,o+2},oe.prototype.writeUInt16BE=function(e,o,t){return e=+e,o>>>=0,t||De(this,e,o,2,65535,0),this[o]=e>>>8,this[o+1]=255&e,o+2},oe.prototype.writeUInt32LE=function(e,o,t){return e=+e,o>>>=0,t||De(this,e,o,4,4294967295,0),this[o+3]=e>>>24,this[o+2]=e>>>16,this[o+1]=e>>>8,this[o]=255&e,o+4},oe.prototype.writeUInt32BE=function(e,o,t){return e=+e,o>>>=0,t||De(this,e,o,4,4294967295,0),this[o]=e>>>24,this[o+1]=e>>>16,this[o+2]=e>>>8,this[o+3]=255&e,o+4},oe.prototype.writeIntLE=function(e,o,t,l){if(e=+e,o>>>=0,!l){var h=Math.pow(2,8*t-1);De(this,e,o,t,h-1,-h)}var n=0,r=1,s=0;for(this[o]=255&e;++n<t&&(r*=256);)e<0&&s===0&&this[o+n-1]!==0&&(s=1),this[o+n]=(e/r>>0)-s&255;return o+t},oe.prototype.writeIntBE=function(e,o,t,l){if(e=+e,o>>>=0,!l){var h=Math.pow(2,8*t-1);De(this,e,o,t,h-1,-h)}var n=t-1,r=1,s=0;for(this[o+n]=255&e;--n>=0&&(r*=256);)e<0&&s===0&&this[o+n+1]!==0&&(s=1),this[o+n]=(e/r>>0)-s&255;return o+t},oe.prototype.writeInt8=function(e,o,t){return e=+e,o>>>=0,t||De(this,e,o,1,127,-128),e<0&&(e=255+e+1),this[o]=255&e,o+1},oe.prototype.writeInt16LE=function(e,o,t){return e=+e,o>>>=0,t||De(this,e,o,2,32767,-32768),this[o]=255&e,this[o+1]=e>>>8,o+2},oe.prototype.writeInt16BE=function(e,o,t){return e=+e,o>>>=0,t||De(this,e,o,2,32767,-32768),this[o]=e>>>8,this[o+1]=255&e,o+2},oe.prototype.writeInt32LE=function(e,o,t){return e=+e,o>>>=0,t||De(this,e,o,4,2147483647,-2147483648),this[o]=255&e,this[o+1]=e>>>8,this[o+2]=e>>>16,this[o+3]=e>>>24,o+4},oe.prototype.writeInt32BE=function(e,o,t){return e=+e,o>>>=0,t||De(this,e,o,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[o]=e>>>24,this[o+1]=e>>>16,this[o+2]=e>>>8,this[o+3]=255&e,o+4},oe.prototype.writeFloatLE=function(e,o,t){return In(this,e,o,!0,t)},oe.prototype.writeFloatBE=function(e,o,t){return In(this,e,o,!1,t)},oe.prototype.writeDoubleLE=function(e,o,t){return Tn(this,e,o,!0,t)},oe.prototype.writeDoubleBE=function(e,o,t){return Tn(this,e,o,!1,t)},oe.prototype.copy=function(e,o,t,l){if(!oe.isBuffer(e))throw new TypeError("argument should be a Buffer");if(t||(t=0),l||l===0||(l=this.length),o>=e.length&&(o=e.length),o||(o=0),l>0&&l<t&&(l=t),l===t||e.length===0||this.length===0)return 0;if(o<0)throw new RangeError("targetStart out of bounds");if(t<0||t>=this.length)throw new RangeError("Index out of range");if(l<0)throw new RangeError("sourceEnd out of bounds");l>this.length&&(l=this.length),e.length-o<l-t&&(l=e.length-o+t);var h=l-t;if(this===e&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(o,t,l);else if(this===e&&t<o&&o<l)for(var n=h-1;n>=0;--n)e[n+o]=this[n+t];else Uint8Array.prototype.set.call(e,this.subarray(t,l),o);return h},oe.prototype.fill=function(e,o,t,l){if(typeof e=="string"){if(typeof o=="string"?(l=o,o=0,t=this.length):typeof t=="string"&&(l=t,t=this.length),l!==void 0&&typeof l!="string")throw new TypeError("encoding must be a string");if(typeof l=="string"&&!oe.isEncoding(l))throw new TypeError("Unknown encoding: "+l);if(e.length===1){var h=e.charCodeAt(0);(l==="utf8"&&h<128||l==="latin1")&&(e=h)}}else typeof e=="number"?e&=255:typeof e=="boolean"&&(e=Number(e));if(o<0||this.length<o||this.length<t)throw new RangeError("Out of range index");if(t<=o)return this;var n;if(o>>>=0,t=t===void 0?this.length:t>>>0,e||(e=0),typeof e=="number")for(n=o;n<t;++n)this[n]=e;else{var r=oe.isBuffer(e)?e:oe.from(e,l),s=r.length;if(s===0)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(n=0;n<t-o;++n)this[n+o]=r[n%s]}return this},Bo=/[^+/0-9A-Za-z-_]/g,xo=function(){for(var e=new Array(256),o=0;o<16;++o)for(var t=16*o,l=0;l<16;++l)e[t+l]="0123456789abcdef"[o]+"0123456789abcdef"[l];return e}(),Ye.Buffer,Ye.INSPECT_MAX_BYTES,Ye.kMaxLength,$t={},qt=Ye,ze=qt.Buffer,ze.from&&ze.alloc&&ze.allocUnsafe&&ze.allocUnsafeSlow?$t=qt:(kn(qt,$t),$t.Buffer=vt),vt.prototype=Object.create(ze.prototype),kn(ze,vt),vt.from=function(e,o,t){if(typeof e=="number")throw new TypeError("Argument must not be a number");return ze(e,o,t)},vt.alloc=function(e,o,t){if(typeof e!="number")throw new TypeError("Argument must be a number");var l=ze(e);return o!==void 0?typeof t=="string"?l.fill(o,t):l.fill(o):l.fill(0),l},vt.allocUnsafe=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return ze(e)},vt.allocUnsafeSlow=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return qt.SlowBuffer(e)},Bn=$t,Nt={},hr=Bn.Buffer,Vi=hr.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},Nt.StringDecoder=Wt,Wt.prototype.write=function(e){if(e.length===0)return"";var o,t;if(this.lastNeed){if((o=this.fillLast(e))===void 0)return"";t=this.lastNeed,this.lastNeed=0}else t=0;return t<e.length?o?o+this.text(e,t):this.text(e,t):o||""},Wt.prototype.end=function(e){var o=e&&e.length?this.write(e):"";return this.lastNeed?o+"":o},Wt.prototype.text=function(e,o){var t=function(h,n,r){var s=n.length-1;if(s<r)return 0;var i=kr(n[s]);return i>=0?(i>0&&(h.lastNeed=i-1),i):--s<r||i===-2?0:(i=kr(n[s]))>=0?(i>0&&(h.lastNeed=i-2),i):--s<r||i===-2?0:(i=kr(n[s]))>=0?(i>0&&(i===2?i=0:h.lastNeed=i-3),i):0}(this,e,o);if(!this.lastNeed)return e.toString("utf8",o);this.lastTotal=t;var l=e.length-(t-this.lastNeed);return e.copy(this.lastChar,0,l),e.toString("utf8",o,l)},Wt.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length},Nt.StringDecoder,Nt.StringDecoder}),Mo={};Pt(Mo,{StringDecoder:()=>Uo,default:()=>Nt});var Uo,Ia=Ue(()=>{ie(),re(),te(),xn(),xn(),Uo=Nt.StringDecoder}),Lo=he((e,o)=>{ie(),re(),te();var t=Bt(),{PromisePrototypeThen:l,SymbolAsyncIterator:h,SymbolIterator:n}=xe(),{Buffer:r}=(Ne(),Ie(Le)),{ERR_INVALID_ARG_TYPE:s,ERR_STREAM_NULL_VALUES:i}=Fe().codes;function a(c,d,b){let y;if(typeof d=="string"||d instanceof r)return new c({objectMode:!0,...b,read(){this.push(d),this.push(null)}});let g;if(d&&d[h])g=!0,y=d[h]();else if(d&&d[n])g=!1,y=d[n]();else throw new s("iterable",["Iterable"],d);let m=new c({objectMode:!0,highWaterMark:1,...b}),w=!1;m._read=function(){w||(w=!0,v())},m._destroy=function(_,x){l(S(_),()=>t.nextTick(x,_),M=>t.nextTick(x,M||_))};async function S(_){let x=_!=null,M=typeof y.throw=="function";if(x&&M){let{value:k,done:O}=await y.throw(_);if(await k,O)return}if(typeof y.return=="function"){let{value:k}=await y.return();await k}}async function v(){for(;;){try{let{value:_,done:x}=g?await y.next():y.next();if(x)m.push(null);else{let M=_&&typeof _.then=="function"?await _:_;if(M===null)throw w=!1,new i;if(m.push(M))continue;w=!1}}catch(_){m.destroy(_)}break}}return m}o.exports=a}),br=he((e,o)=>{ie(),re(),te();var t=Bt(),{ArrayPrototypeIndexOf:l,NumberIsInteger:h,NumberIsNaN:n,NumberParseInt:r,ObjectDefineProperties:s,ObjectKeys:i,ObjectSetPrototypeOf:a,Promise:c,SafeSet:d,SymbolAsyncIterator:b,Symbol:y}=xe();o.exports=I,I.ReadableState=ge;var{EventEmitter:g}=(Dt(),Ie(xt)),{Stream:m,prependListener:w}=sn(),{Buffer:S}=(Ne(),Ie(Le)),{addAbortSignal:v}=pr(),_=bt(),x=lt().debuglog("stream",u=>{x=u}),M=na(),k=jt(),{getHighWaterMark:O,getDefaultHighWaterMark:P}=an(),{aggregateTwoErrors:W,codes:{ERR_INVALID_ARG_TYPE:z,ERR_METHOD_NOT_IMPLEMENTED:ee,ERR_OUT_OF_RANGE:T,ERR_STREAM_PUSH_AFTER_EOF:F,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:H}}=Fe(),{validateObject:V}=dr(),le=y("kPaused"),{StringDecoder:G}=(Ia(),Ie(Mo)),D=Lo();a(I.prototype,m.prototype),a(I,m);var de=()=>{},{errorOrDestroy:Z}=k;function ge(u,p,E){typeof E!="boolean"&&(E=p instanceof ut()),this.objectMode=!!(u&&u.objectMode),E&&(this.objectMode=this.objectMode||!!(u&&u.readableObjectMode)),this.highWaterMark=u?O(this,u,"readableHighWaterMark",E):P(!1),this.buffer=new M,this.length=0,this.pipes=[],this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.constructed=!0,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this[le]=null,this.errorEmitted=!1,this.emitClose=!u||u.emitClose!==!1,this.autoDestroy=!u||u.autoDestroy!==!1,this.destroyed=!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this.defaultEncoding=u&&u.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.multiAwaitDrain=!1,this.readingMore=!1,this.dataEmitted=!1,this.decoder=null,this.encoding=null,u&&u.encoding&&(this.decoder=new G(u.encoding),this.encoding=u.encoding)}function I(u){if(!(this instanceof I))return new I(u);let p=this instanceof ut();this._readableState=new ge(u,this,p),u&&(typeof u.read=="function"&&(this._read=u.read),typeof u.destroy=="function"&&(this._destroy=u.destroy),typeof u.construct=="function"&&(this._construct=u.construct),u.signal&&!p&&v(u.signal,this)),m.call(this,u),k.construct(this,()=>{this._readableState.needReadable&&J(this,this._readableState)})}I.prototype.destroy=k.destroy,I.prototype._undestroy=k.undestroy,I.prototype._destroy=function(u,p){p(u)},I.prototype[g.captureRejectionSymbol]=function(u){this.destroy(u)},I.prototype.push=function(u,p){return K(this,u,p,!1)},I.prototype.unshift=function(u,p){return K(this,u,p,!0)};function K(u,p,E,C){x("readableAddChunk",p);let j=u._readableState,se;if(j.objectMode||(typeof p=="string"?(E=E||j.defaultEncoding,j.encoding!==E&&(C&&j.encoding?p=S.from(p,E).toString(j.encoding):(p=S.from(p,E),E=""))):p instanceof S?E="":m._isUint8Array(p)?(p=m._uint8ArrayToBuffer(p),E=""):p!=null&&(se=new z("chunk",["string","Buffer","Uint8Array"],p))),se)Z(u,se);else if(p===null)j.reading=!1,A(u,j);else if(j.objectMode||p&&p.length>0)if(C)if(j.endEmitted)Z(u,new H);else{if(j.destroyed||j.errored)return!1;pe(u,j,p,!0)}else if(j.ended)Z(u,new F);else{if(j.destroyed||j.errored)return!1;j.reading=!1,j.decoder&&!E?(p=j.decoder.write(p),j.objectMode||p.length!==0?pe(u,j,p,!1):J(u,j)):pe(u,j,p,!1)}else C||(j.reading=!1,J(u,j));return!j.ended&&(j.length<j.highWaterMark||j.length===0)}function pe(u,p,E,C){p.flowing&&p.length===0&&!p.sync&&u.listenerCount("data")>0?(p.multiAwaitDrain?p.awaitDrainWriters.clear():p.awaitDrainWriters=null,p.dataEmitted=!0,u.emit("data",E)):(p.length+=p.objectMode?1:E.length,C?p.buffer.unshift(E):p.buffer.push(E),p.needReadable&&$(u)),J(u,p)}I.prototype.isPaused=function(){let u=this._readableState;return u[le]===!0||u.flowing===!1},I.prototype.setEncoding=function(u){let p=new G(u);this._readableState.decoder=p,this._readableState.encoding=this._readableState.decoder.encoding;let E=this._readableState.buffer,C="";for(let j of E)C+=p.write(j);return E.clear(),C!==""&&E.push(C),this._readableState.length=C.length,this};var be=1073741824;function ue(u){if(u>be)throw new T("size","<= 1GiB",u);return u--,u|=u>>>1,u|=u>>>2,u|=u>>>4,u|=u>>>8,u|=u>>>16,u++,u}function B(u,p){return u<=0||p.length===0&&p.ended?0:p.objectMode?1:n(u)?p.flowing&&p.length?p.buffer.first().length:p.length:u<=p.length?u:p.ended?p.length:0}I.prototype.read=function(u){x("read",u),u===void 0?u=NaN:h(u)||(u=r(u,10));let p=this._readableState,E=u;if(u>p.highWaterMark&&(p.highWaterMark=ue(u)),u!==0&&(p.emittedReadable=!1),u===0&&p.needReadable&&((p.highWaterMark!==0?p.length>=p.highWaterMark:p.length>0)||p.ended))return x("read: emitReadable",p.length,p.ended),p.length===0&&p.ended?fe(this):$(this),null;if(u=B(u,p),u===0&&p.ended)return p.length===0&&fe(this),null;let C=p.needReadable;if(x("need readable",C),(p.length===0||p.length-u<p.highWaterMark)&&(C=!0,x("length less than watermark",C)),p.ended||p.reading||p.destroyed||p.errored||!p.constructed)C=!1,x("reading, ended or constructing",C);else if(C){x("do read"),p.reading=!0,p.sync=!0,p.length===0&&(p.needReadable=!0);try{this._read(p.highWaterMark)}catch(se){Z(this,se)}p.sync=!1,p.reading||(u=B(E,p))}let j;return u>0?j=q(u,p):j=null,j===null?(p.needReadable=p.length<=p.highWaterMark,u=0):(p.length-=u,p.multiAwaitDrain?p.awaitDrainWriters.clear():p.awaitDrainWriters=null),p.length===0&&(p.ended||(p.needReadable=!0),E!==u&&p.ended&&fe(this)),j!==null&&!p.errorEmitted&&!p.closeEmitted&&(p.dataEmitted=!0,this.emit("data",j)),j};function A(u,p){if(x("onEofChunk"),!p.ended){if(p.decoder){let E=p.decoder.end();E&&E.length&&(p.buffer.push(E),p.length+=p.objectMode?1:E.length)}p.ended=!0,p.sync?$(u):(p.needReadable=!1,p.emittedReadable=!0,ae(u))}}function $(u){let p=u._readableState;x("emitReadable",p.needReadable,p.emittedReadable),p.needReadable=!1,p.emittedReadable||(x("emitReadable",p.flowing),p.emittedReadable=!0,t.nextTick(ae,u))}function ae(u){let p=u._readableState;x("emitReadable_",p.destroyed,p.length,p.ended),!p.destroyed&&!p.errored&&(p.length||p.ended)&&(u.emit("readable"),p.emittedReadable=!1),p.needReadable=!p.flowing&&!p.ended&&p.length<=p.highWaterMark,X(u)}function J(u,p){!p.readingMore&&p.constructed&&(p.readingMore=!0,t.nextTick(Q,u,p))}function Q(u,p){for(;!p.reading&&!p.ended&&(p.length<p.highWaterMark||p.flowing&&p.length===0);){let E=p.length;if(x("maybeReadMore read 0"),u.read(0),E===p.length)break}p.readingMore=!1}I.prototype._read=function(u){throw new ee("_read()")},I.prototype.pipe=function(u,p){let E=this,C=this._readableState;C.pipes.length===1&&(C.multiAwaitDrain||(C.multiAwaitDrain=!0,C.awaitDrainWriters=new d(C.awaitDrainWriters?[C.awaitDrainWriters]:[]))),C.pipes.push(u),x("pipe count=%d opts=%j",C.pipes.length,p);let j=(!p||p.end!==!1)&&u!==t.stdout&&u!==t.stderr?we:Ft;C.endEmitted?t.nextTick(j):E.once("end",j),u.on("unpipe",se);function se(mt,Ze){x("onunpipe"),mt===E&&Ze&&Ze.hasUnpiped===!1&&(Ze.hasUnpiped=!0,_e())}function we(){x("onend"),u.end()}let ke,Ae=!1;function _e(){x("cleanup"),u.removeListener("close",vr),u.removeListener("finish",_r),ke&&u.removeListener("drain",ke),u.removeListener("error",wr),u.removeListener("unpipe",se),E.removeListener("end",we),E.removeListener("end",Ft),E.removeListener("data",pn),Ae=!0,ke&&C.awaitDrainWriters&&(!u._writableState||u._writableState.needDrain)&&ke()}function Ce(){Ae||(C.pipes.length===1&&C.pipes[0]===u?(x("false write response, pause",0),C.awaitDrainWriters=u,C.multiAwaitDrain=!1):C.pipes.length>1&&C.pipes.includes(u)&&(x("false write response, pause",C.awaitDrainWriters.size),C.awaitDrainWriters.add(u)),E.pause()),ke||(ke=ce(E,u),u.on("drain",ke))}E.on("data",pn);function pn(mt){x("ondata");let Ze=u.write(mt);x("dest.write",Ze),Ze===!1&&Ce()}function wr(mt){if(x("onerror",mt),Ft(),u.removeListener("error",wr),u.listenerCount("error")===0){let Ze=u._writableState||u._readableState;Ze&&!Ze.errorEmitted?Z(u,mt):u.emit("error",mt)}}w(u,"error",wr);function vr(){u.removeListener("finish",_r),Ft()}u.once("close",vr);function _r(){x("onfinish"),u.removeListener("close",vr),Ft()}u.once("finish",_r);function Ft(){x("unpipe"),E.unpipe(u)}return u.emit("pipe",E),u.writableNeedDrain===!0?C.flowing&&Ce():C.flowing||(x("pipe resume"),E.resume()),u};function ce(u,p){return function(){let E=u._readableState;E.awaitDrainWriters===p?(x("pipeOnDrain",1),E.awaitDrainWriters=null):E.multiAwaitDrain&&(x("pipeOnDrain",E.awaitDrainWriters.size),E.awaitDrainWriters.delete(p)),(!E.awaitDrainWriters||E.awaitDrainWriters.size===0)&&u.listenerCount("data")&&u.resume()}}I.prototype.unpipe=function(u){let p=this._readableState,E={hasUnpiped:!1};if(p.pipes.length===0)return this;if(!u){let j=p.pipes;p.pipes=[],this.pause();for(let se=0;se<j.length;se++)j[se].emit("unpipe",this,{hasUnpiped:!1});return this}let C=l(p.pipes,u);return C===-1?this:(p.pipes.splice(C,1),p.pipes.length===0&&this.pause(),u.emit("unpipe",this,E),this)},I.prototype.on=function(u,p){let E=m.prototype.on.call(this,u,p),C=this._readableState;return u==="data"?(C.readableListening=this.listenerCount("readable")>0,C.flowing!==!1&&this.resume()):u==="readable"&&!C.endEmitted&&!C.readableListening&&(C.readableListening=C.needReadable=!0,C.flowing=!1,C.emittedReadable=!1,x("on readable",C.length,C.reading),C.length?$(this):C.reading||t.nextTick(R,this)),E},I.prototype.addListener=I.prototype.on,I.prototype.removeListener=function(u,p){let E=m.prototype.removeListener.call(this,u,p);return u==="readable"&&t.nextTick(ne,this),E},I.prototype.off=I.prototype.removeListener,I.prototype.removeAllListeners=function(u){let p=m.prototype.removeAllListeners.apply(this,arguments);return(u==="readable"||u===void 0)&&t.nextTick(ne,this),p};function ne(u){let p=u._readableState;p.readableListening=u.listenerCount("readable")>0,p.resumeScheduled&&p[le]===!1?p.flowing=!0:u.listenerCount("data")>0?u.resume():p.readableListening||(p.flowing=null)}function R(u){x("readable nexttick read 0"),u.read(0)}I.prototype.resume=function(){let u=this._readableState;return u.flowing||(x("resume"),u.flowing=!u.readableListening,L(this,u)),u[le]=!1,this};function L(u,p){p.resumeScheduled||(p.resumeScheduled=!0,t.nextTick(N,u,p))}function N(u,p){x("resume",p.reading),p.reading||u.read(0),p.resumeScheduled=!1,u.emit("resume"),X(u),p.flowing&&!p.reading&&u.read(0)}I.prototype.pause=function(){return x("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(x("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[le]=!0,this};function X(u){let p=u._readableState;for(x("flow",p.flowing);p.flowing&&u.read()!==null;);}I.prototype.wrap=function(u){let p=!1;u.on("data",C=>{!this.push(C)&&u.pause&&(p=!0,u.pause())}),u.on("end",()=>{this.push(null)}),u.on("error",C=>{Z(this,C)}),u.on("close",()=>{this.destroy()}),u.on("destroy",()=>{this.destroy()}),this._read=()=>{p&&u.resume&&(p=!1,u.resume())};let E=i(u);for(let C=1;C<E.length;C++){let j=E[C];this[j]===void 0&&typeof u[j]=="function"&&(this[j]=u[j].bind(u))}return this},I.prototype[b]=function(){return Y(this)},I.prototype.iterator=function(u){return u!==void 0&&V(u,"options"),Y(this,u)};function Y(u,p){typeof u.read!="function"&&(u=I.wrap(u,{objectMode:!0}));let E=U(u,p);return E.stream=u,E}async function*U(u,p){let E=de;function C(we){this===u?(E(),E=de):E=we}u.on("readable",C);let j,se=_(u,{writable:!1},we=>{j=we?W(j,we):null,E(),E=de});try{for(;;){let we=u.destroyed?null:u.read();if(we!==null)yield we;else{if(j)throw j;if(j===null)return;await new c(C)}}}catch(we){throw j=W(j,we),j}finally{(j||p?.destroyOnReturn!==!1)&&(j===void 0||u._readableState.autoDestroy)?k.destroyer(u,null):(u.off("readable",C),se())}}s(I.prototype,{readable:{__proto__:null,get(){let u=this._readableState;return!!u&&u.readable!==!1&&!u.destroyed&&!u.errorEmitted&&!u.endEmitted},set(u){this._readableState&&(this._readableState.readable=!!u)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(u){this._readableState&&(this._readableState.flowing=u)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(u){this._readableState&&(this._readableState.destroyed=u)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),s(ge.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[le]!==!1},set(u){this[le]=!!u}}}),I._fromList=q;function q(u,p){if(p.length===0)return null;let E;return p.objectMode?E=p.buffer.shift():!u||u>=p.length?(p.decoder?E=p.buffer.join(""):p.buffer.length===1?E=p.buffer.first():E=p.buffer.concat(p.length),p.buffer.clear()):E=p.buffer.consume(u,p.decoder),E}function fe(u){let p=u._readableState;x("endReadable",p.endEmitted),p.endEmitted||(p.ended=!0,t.nextTick(ye,p,u))}function ye(u,p){if(x("endReadableNT",u.endEmitted,u.length),!u.errored&&!u.closeEmitted&&!u.endEmitted&&u.length===0){if(u.endEmitted=!0,p.emit("end"),p.writable&&p.allowHalfOpen===!1)t.nextTick(me,p);else if(u.autoDestroy){let E=p._writableState;(!E||E.autoDestroy&&(E.finished||E.writable===!1))&&p.destroy()}}}function me(u){u.writable&&!u.writableEnded&&!u.destroyed&&u.end()}I.from=function(u,p){return D(I,u,p)};var ve;function f(){return ve===void 0&&(ve={}),ve}I.fromWeb=function(u,p){return f().newStreamReadableFromReadableStream(u,p)},I.toWeb=function(u,p){return f().newReadableStreamFromStreamReadable(u,p)},I.wrap=function(u,p){var E,C;return new I({objectMode:(E=(C=u.readableObjectMode)!==null&&C!==void 0?C:u.objectMode)!==null&&E!==void 0?E:!0,...p,destroy(j,se){k.destroyer(u,j),se(j)}}).wrap(u)}}),No=he((e,o)=>{ie(),re(),te();var t=Bt(),{ArrayPrototypeSlice:l,Error:h,FunctionPrototypeSymbolHasInstance:n,ObjectDefineProperty:r,ObjectDefineProperties:s,ObjectSetPrototypeOf:i,StringPrototypeToLowerCase:a,Symbol:c,SymbolHasInstance:d}=xe();o.exports=G,G.WritableState=V;var{EventEmitter:b}=(Dt(),Ie(xt)),y=sn().Stream,{Buffer:g}=(Ne(),Ie(Le)),m=jt(),{addAbortSignal:w}=pr(),{getHighWaterMark:S,getDefaultHighWaterMark:v}=an(),{ERR_INVALID_ARG_TYPE:_,ERR_METHOD_NOT_IMPLEMENTED:x,ERR_MULTIPLE_CALLBACK:M,ERR_STREAM_CANNOT_PIPE:k,ERR_STREAM_DESTROYED:O,ERR_STREAM_ALREADY_FINISHED:P,ERR_STREAM_NULL_VALUES:W,ERR_STREAM_WRITE_AFTER_END:z,ERR_UNKNOWN_ENCODING:ee}=Fe().codes,{errorOrDestroy:T}=m;i(G.prototype,y.prototype),i(G,y);function F(){}var H=c("kOnFinished");function V(R,L,N){typeof N!="boolean"&&(N=L instanceof ut()),this.objectMode=!!(R&&R.objectMode),N&&(this.objectMode=this.objectMode||!!(R&&R.writableObjectMode)),this.highWaterMark=R?S(this,R,"writableHighWaterMark",N):v(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;let X=!!(R&&R.decodeStrings===!1);this.decodeStrings=!X,this.defaultEncoding=R&&R.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=I.bind(void 0,L),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,le(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!R||R.emitClose!==!1,this.autoDestroy=!R||R.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[H]=[]}function le(R){R.buffered=[],R.bufferedIndex=0,R.allBuffers=!0,R.allNoop=!0}V.prototype.getBuffer=function(){return l(this.buffered,this.bufferedIndex)},r(V.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function G(R){let L=this instanceof ut();if(!L&&!n(G,this))return new G(R);this._writableState=new V(R,this,L),R&&(typeof R.write=="function"&&(this._write=R.write),typeof R.writev=="function"&&(this._writev=R.writev),typeof R.destroy=="function"&&(this._destroy=R.destroy),typeof R.final=="function"&&(this._final=R.final),typeof R.construct=="function"&&(this._construct=R.construct),R.signal&&w(R.signal,this)),y.call(this,R),m.construct(this,()=>{let N=this._writableState;N.writing||ue(this,N),ae(this,N)})}r(G,d,{__proto__:null,value:function(R){return n(this,R)?!0:this!==G?!1:R&&R._writableState instanceof V}}),G.prototype.pipe=function(){T(this,new k)};function D(R,L,N,X){let Y=R._writableState;if(typeof N=="function")X=N,N=Y.defaultEncoding;else{if(!N)N=Y.defaultEncoding;else if(N!=="buffer"&&!g.isEncoding(N))throw new ee(N);typeof X!="function"&&(X=F)}if(L===null)throw new W;if(!Y.objectMode)if(typeof L=="string")Y.decodeStrings!==!1&&(L=g.from(L,N),N="buffer");else if(L instanceof g)N="buffer";else if(y._isUint8Array(L))L=y._uint8ArrayToBuffer(L),N="buffer";else throw new _("chunk",["string","Buffer","Uint8Array"],L);let U;return Y.ending?U=new z:Y.destroyed&&(U=new O("write")),U?(t.nextTick(X,U),T(R,U,!0),U):(Y.pendingcb++,de(R,Y,L,N,X))}G.prototype.write=function(R,L,N){return D(this,R,L,N)===!0},G.prototype.cork=function(){this._writableState.corked++},G.prototype.uncork=function(){let R=this._writableState;R.corked&&(R.corked--,R.writing||ue(this,R))},G.prototype.setDefaultEncoding=function(R){if(typeof R=="string"&&(R=a(R)),!g.isEncoding(R))throw new ee(R);return this._writableState.defaultEncoding=R,this};function de(R,L,N,X,Y){let U=L.objectMode?1:N.length;L.length+=U;let q=L.length<L.highWaterMark;return q||(L.needDrain=!0),L.writing||L.corked||L.errored||!L.constructed?(L.buffered.push({chunk:N,encoding:X,callback:Y}),L.allBuffers&&X!=="buffer"&&(L.allBuffers=!1),L.allNoop&&Y!==F&&(L.allNoop=!1)):(L.writelen=U,L.writecb=Y,L.writing=!0,L.sync=!0,R._write(N,X,L.onwrite),L.sync=!1),q&&!L.errored&&!L.destroyed}function Z(R,L,N,X,Y,U,q){L.writelen=X,L.writecb=q,L.writing=!0,L.sync=!0,L.destroyed?L.onwrite(new O("write")):N?R._writev(Y,L.onwrite):R._write(Y,U,L.onwrite),L.sync=!1}function ge(R,L,N,X){--L.pendingcb,X(N),be(L),T(R,N)}function I(R,L){let N=R._writableState,X=N.sync,Y=N.writecb;if(typeof Y!="function"){T(R,new M);return}N.writing=!1,N.writecb=null,N.length-=N.writelen,N.writelen=0,L?(L.stack,N.errored||(N.errored=L),R._readableState&&!R._readableState.errored&&(R._readableState.errored=L),X?t.nextTick(ge,R,N,L,Y):ge(R,N,L,Y)):(N.buffered.length>N.bufferedIndex&&ue(R,N),X?N.afterWriteTickInfo!==null&&N.afterWriteTickInfo.cb===Y?N.afterWriteTickInfo.count++:(N.afterWriteTickInfo={count:1,cb:Y,stream:R,state:N},t.nextTick(K,N.afterWriteTickInfo)):pe(R,N,1,Y))}function K({stream:R,state:L,count:N,cb:X}){return L.afterWriteTickInfo=null,pe(R,L,N,X)}function pe(R,L,N,X){for(!L.ending&&!R.destroyed&&L.length===0&&L.needDrain&&(L.needDrain=!1,R.emit("drain"));N-- >0;)L.pendingcb--,X();L.destroyed&&be(L),ae(R,L)}function be(R){if(R.writing)return;for(let Y=R.bufferedIndex;Y<R.buffered.length;++Y){var L;let{chunk:U,callback:q}=R.buffered[Y],fe=R.objectMode?1:U.length;R.length-=fe,q((L=R.errored)!==null&&L!==void 0?L:new O("write"))}let N=R[H].splice(0);for(let Y=0;Y<N.length;Y++){var X;N[Y]((X=R.errored)!==null&&X!==void 0?X:new O("end"))}le(R)}function ue(R,L){if(L.corked||L.bufferProcessing||L.destroyed||!L.constructed)return;let{buffered:N,bufferedIndex:X,objectMode:Y}=L,U=N.length-X;if(!U)return;let q=X;if(L.bufferProcessing=!0,U>1&&R._writev){L.pendingcb-=U-1;let fe=L.allNoop?F:me=>{for(let ve=q;ve<N.length;++ve)N[ve].callback(me)},ye=L.allNoop&&q===0?N:l(N,q);ye.allBuffers=L.allBuffers,Z(R,L,!0,L.length,ye,"",fe),le(L)}else{do{let{chunk:fe,encoding:ye,callback:me}=N[q];N[q++]=null;let ve=Y?1:fe.length;Z(R,L,!1,ve,fe,ye,me)}while(q<N.length&&!L.writing);q===N.length?le(L):q>256?(N.splice(0,q),L.bufferedIndex=0):L.bufferedIndex=q}L.bufferProcessing=!1}G.prototype._write=function(R,L,N){if(this._writev)this._writev([{chunk:R,encoding:L}],N);else throw new x("_write()")},G.prototype._writev=null,G.prototype.end=function(R,L,N){let X=this._writableState;typeof R=="function"?(N=R,R=null,L=null):typeof L=="function"&&(N=L,L=null);let Y;if(R!=null){let U=D(this,R,L);U instanceof h&&(Y=U)}return X.corked&&(X.corked=1,this.uncork()),Y||(!X.errored&&!X.ending?(X.ending=!0,ae(this,X,!0),X.ended=!0):X.finished?Y=new P("end"):X.destroyed&&(Y=new O("end"))),typeof N=="function"&&(Y||X.finished?t.nextTick(N,Y):X[H].push(N)),this};function B(R){return R.ending&&!R.destroyed&&R.constructed&&R.length===0&&!R.errored&&R.buffered.length===0&&!R.finished&&!R.writing&&!R.errorEmitted&&!R.closeEmitted}function A(R,L){let N=!1;function X(Y){if(N){T(R,Y??M());return}if(N=!0,L.pendingcb--,Y){let U=L[H].splice(0);for(let q=0;q<U.length;q++)U[q](Y);T(R,Y,L.sync)}else B(L)&&(L.prefinished=!0,R.emit("prefinish"),L.pendingcb++,t.nextTick(J,R,L))}L.sync=!0,L.pendingcb++;try{R._final(X)}catch(Y){X(Y)}L.sync=!1}function $(R,L){!L.prefinished&&!L.finalCalled&&(typeof R._final=="function"&&!L.destroyed?(L.finalCalled=!0,A(R,L)):(L.prefinished=!0,R.emit("prefinish")))}function ae(R,L,N){B(L)&&($(R,L),L.pendingcb===0&&(N?(L.pendingcb++,t.nextTick((X,Y)=>{B(Y)?J(X,Y):Y.pendingcb--},R,L)):B(L)&&(L.pendingcb++,J(R,L))))}function J(R,L){L.pendingcb--,L.finished=!0;let N=L[H].splice(0);for(let X=0;X<N.length;X++)N[X]();if(R.emit("finish"),L.autoDestroy){let X=R._readableState;(!X||X.autoDestroy&&(X.endEmitted||X.readable===!1))&&R.destroy()}}s(G.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(R){this._writableState&&(this._writableState.destroyed=R)}},writable:{__proto__:null,get(){let R=this._writableState;return!!R&&R.writable!==!1&&!R.destroyed&&!R.errored&&!R.ending&&!R.ended},set(R){this._writableState&&(this._writableState.writable=!!R)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){let R=this._writableState;return R?!R.destroyed&&!R.ending&&R.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});var Q=m.destroy;G.prototype.destroy=function(R,L){let N=this._writableState;return!N.destroyed&&(N.bufferedIndex<N.buffered.length||N[H].length)&&t.nextTick(be,N),Q.call(this,R,L),this},G.prototype._undestroy=m.undestroy,G.prototype._destroy=function(R,L){L(R)},G.prototype[b.captureRejectionSymbol]=function(R){this.destroy(R)};var ce;function ne(){return ce===void 0&&(ce={}),ce}G.fromWeb=function(R,L){return ne().newStreamWritableFromWritableStream(R,L)},G.toWeb=function(R){return ne().newWritableStreamFromStreamWritable(R)}}),Ta=he((e,o)=>{ie(),re(),te();var t=Bt(),l=(Ne(),Ie(Le)),{isReadable:h,isWritable:n,isIterable:r,isNodeStream:s,isReadableNodeStream:i,isWritableNodeStream:a,isDuplexNodeStream:c}=ct(),d=bt(),{AbortError:b,codes:{ERR_INVALID_ARG_TYPE:y,ERR_INVALID_RETURN_VALUE:g}}=Fe(),{destroyer:m}=jt(),w=ut(),S=br(),{createDeferredPromise:v}=lt(),_=Lo(),x=globalThis.Blob||l.Blob,M=typeof x<"u"?function(ee){return ee instanceof x}:function(ee){return!1},k=globalThis.AbortController||on().AbortController,{FunctionPrototypeCall:O}=xe(),P=class extends w{constructor(ee){super(ee),ee?.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),ee?.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}};o.exports=function ee(T,F){if(c(T))return T;if(i(T))return z({readable:T});if(a(T))return z({writable:T});if(s(T))return z({writable:!1,readable:!1});if(typeof T=="function"){let{value:V,write:le,final:G,destroy:D}=W(T);if(r(V))return _(P,V,{objectMode:!0,write:le,final:G,destroy:D});let de=V?.then;if(typeof de=="function"){let Z,ge=O(de,V,I=>{if(I!=null)throw new g("nully","body",I)},I=>{m(Z,I)});return Z=new P({objectMode:!0,readable:!1,write:le,final(I){G(async()=>{try{await ge,t.nextTick(I,null)}catch(K){t.nextTick(I,K)}})},destroy:D})}throw new g("Iterable, AsyncIterable or AsyncFunction",F,V)}if(M(T))return ee(T.arrayBuffer());if(r(T))return _(P,T,{objectMode:!0,writable:!1});if(typeof T?.writable=="object"||typeof T?.readable=="object"){let V=T!=null&&T.readable?i(T?.readable)?T?.readable:ee(T.readable):void 0,le=T!=null&&T.writable?a(T?.writable)?T?.writable:ee(T.writable):void 0;return z({readable:V,writable:le})}let H=T?.then;if(typeof H=="function"){let V;return O(H,T,le=>{le!=null&&V.push(le),V.push(null)},le=>{m(V,le)}),V=new P({objectMode:!0,writable:!1,read(){}})}throw new y(F,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],T)};function W(ee){let{promise:T,resolve:F}=v(),H=new k,V=H.signal;return{value:ee(async function*(){for(;;){let le=T;T=null;let{chunk:G,done:D,cb:de}=await le;if(t.nextTick(de),D)return;if(V.aborted)throw new b(void 0,{cause:V.reason});({promise:T,resolve:F}=v()),yield G}}(),{signal:V}),write(le,G,D){let de=F;F=null,de({chunk:le,done:!1,cb:D})},final(le){let G=F;F=null,G({done:!0,cb:le})},destroy(le,G){H.abort(),G(le)}}}function z(ee){let T=ee.readable&&typeof ee.readable.read!="function"?S.wrap(ee.readable):ee.readable,F=ee.writable,H=!!h(T),V=!!n(F),le,G,D,de,Z;function ge(I){let K=de;de=null,K?K(I):I&&Z.destroy(I)}return Z=new P({readableObjectMode:!!(T!=null&&T.readableObjectMode),writableObjectMode:!!(F!=null&&F.writableObjectMode),readable:H,writable:V}),V&&(d(F,I=>{V=!1,I&&m(T,I),ge(I)}),Z._write=function(I,K,pe){F.write(I,K)?pe():le=pe},Z._final=function(I){F.end(),G=I},F.on("drain",function(){if(le){let I=le;le=null,I()}}),F.on("finish",function(){if(G){let I=G;G=null,I()}})),H&&(d(T,I=>{H=!1,I&&m(T,I),ge(I)}),T.on("readable",function(){if(D){let I=D;D=null,I()}}),T.on("end",function(){Z.push(null)}),Z._read=function(){for(;;){let I=T.read();if(I===null){D=Z._read;return}if(!Z.push(I))return}}),Z._destroy=function(I,K){!I&&de!==null&&(I=new b),D=null,le=null,G=null,de===null?K(I):(de=K,m(F,I),m(T,I))},Z}}),ut=he((e,o)=>{ie(),re(),te();var{ObjectDefineProperties:t,ObjectGetOwnPropertyDescriptor:l,ObjectKeys:h,ObjectSetPrototypeOf:n}=xe();o.exports=i;var r=br(),s=No();n(i.prototype,r.prototype),n(i,r);{let b=h(s.prototype);for(let y=0;y<b.length;y++){let g=b[y];i.prototype[g]||(i.prototype[g]=s.prototype[g])}}function i(b){if(!(this instanceof i))return new i(b);r.call(this,b),s.call(this,b),b?(this.allowHalfOpen=b.allowHalfOpen!==!1,b.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),b.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}t(i.prototype,{writable:{__proto__:null,...l(s.prototype,"writable")},writableHighWaterMark:{__proto__:null,...l(s.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...l(s.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...l(s.prototype,"writableBuffer")},writableLength:{__proto__:null,...l(s.prototype,"writableLength")},writableFinished:{__proto__:null,...l(s.prototype,"writableFinished")},writableCorked:{__proto__:null,...l(s.prototype,"writableCorked")},writableEnded:{__proto__:null,...l(s.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...l(s.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(b){this._readableState&&this._writableState&&(this._readableState.destroyed=b,this._writableState.destroyed=b)}}});var a;function c(){return a===void 0&&(a={}),a}i.fromWeb=function(b,y){return c().newStreamDuplexFromReadableWritablePair(b,y)},i.toWeb=function(b){return c().newReadableWritablePairFromDuplex(b)};var d;i.from=function(b){return d||(d=Ta()),d(b,"body")}}),jo=he((e,o)=>{ie(),re(),te();var{ObjectSetPrototypeOf:t,Symbol:l}=xe();o.exports=i;var{ERR_METHOD_NOT_IMPLEMENTED:h}=Fe().codes,n=ut(),{getHighWaterMark:r}=an();t(i.prototype,n.prototype),t(i,n);var s=l("kCallback");function i(d){if(!(this instanceof i))return new i(d);let b=d?r(this,d,"readableHighWaterMark",!0):null;b===0&&(d={...d,highWaterMark:null,readableHighWaterMark:b,writableHighWaterMark:d.writableHighWaterMark||0}),n.call(this,d),this._readableState.sync=!1,this[s]=null,d&&(typeof d.transform=="function"&&(this._transform=d.transform),typeof d.flush=="function"&&(this._flush=d.flush)),this.on("prefinish",c)}function a(d){typeof this._flush=="function"&&!this.destroyed?this._flush((b,y)=>{if(b){d?d(b):this.destroy(b);return}y!=null&&this.push(y),this.push(null),d&&d()}):(this.push(null),d&&d())}function c(){this._final!==a&&a.call(this)}i.prototype._final=a,i.prototype._transform=function(d,b,y){throw new h("_transform()")},i.prototype._write=function(d,b,y){let g=this._readableState,m=this._writableState,w=g.length;this._transform(d,b,(S,v)=>{if(S){y(S);return}v!=null&&this.push(v),m.ended||w===g.length||g.length<g.highWaterMark?y():this[s]=y})},i.prototype._read=function(){if(this[s]){let d=this[s];this[s]=null,d()}}}),Do=he((e,o)=>{ie(),re(),te();var{ObjectSetPrototypeOf:t}=xe();o.exports=h;var l=jo();t(h.prototype,l.prototype),t(h,l);function h(n){if(!(this instanceof h))return new h(n);l.call(this,n)}h.prototype._transform=function(n,r,s){s(null,n)}}),hn=he((e,o)=>{ie(),re(),te();var t=Bt(),{ArrayIsArray:l,Promise:h,SymbolAsyncIterator:n}=xe(),r=bt(),{once:s}=lt(),i=jt(),a=ut(),{aggregateTwoErrors:c,codes:{ERR_INVALID_ARG_TYPE:d,ERR_INVALID_RETURN_VALUE:b,ERR_MISSING_ARGS:y,ERR_STREAM_DESTROYED:g,ERR_STREAM_PREMATURE_CLOSE:m},AbortError:w}=Fe(),{validateFunction:S,validateAbortSignal:v}=dr(),{isIterable:_,isReadable:x,isReadableNodeStream:M,isNodeStream:k,isTransformStream:O,isWebStream:P,isReadableStream:W,isReadableEnded:z}=ct(),ee=globalThis.AbortController||on().AbortController,T,F;function H(K,pe,be){let ue=!1;K.on("close",()=>{ue=!0});let B=r(K,{readable:pe,writable:be},A=>{ue=!A});return{destroy:A=>{ue||(ue=!0,i.destroyer(K,A||new g("pipe")))},cleanup:B}}function V(K){return S(K[K.length-1],"streams[stream.length - 1]"),K.pop()}function le(K){if(_(K))return K;if(M(K))return G(K);throw new d("val",["Readable","Iterable","AsyncIterable"],K)}async function*G(K){F||(F=br()),yield*F.prototype[n].call(K)}async function D(K,pe,be,{end:ue}){let B,A=null,$=Q=>{if(Q&&(B=Q),A){let ce=A;A=null,ce()}},ae=()=>new h((Q,ce)=>{B?ce(B):A=()=>{B?ce(B):Q()}});pe.on("drain",$);let J=r(pe,{readable:!1},$);try{pe.writableNeedDrain&&await ae();for await(let Q of K)pe.write(Q)||await ae();ue&&pe.end(),await ae(),be()}catch(Q){be(B!==Q?c(B,Q):Q)}finally{J(),pe.off("drain",$)}}async function de(K,pe,be,{end:ue}){O(pe)&&(pe=pe.writable);let B=pe.getWriter();try{for await(let A of K)await B.ready,B.write(A).catch(()=>{});await B.ready,ue&&await B.close(),be()}catch(A){try{await B.abort(A),be(A)}catch($){be($)}}}function Z(...K){return ge(K,s(V(K)))}function ge(K,pe,be){if(K.length===1&&l(K[0])&&(K=K[0]),K.length<2)throw new y("streams");let ue=new ee,B=ue.signal,A=be?.signal,$=[];v(A,"options.signal");function ae(){L(new w)}A?.addEventListener("abort",ae);let J,Q,ce=[],ne=0;function R(U){L(U,--ne===0)}function L(U,q){if(U&&(!J||J.code==="ERR_STREAM_PREMATURE_CLOSE")&&(J=U),!(!J&&!q)){for(;ce.length;)ce.shift()(J);A?.removeEventListener("abort",ae),ue.abort(),q&&(J||$.forEach(fe=>fe()),t.nextTick(pe,J,Q))}}let N;for(let U=0;U<K.length;U++){let q=K[U],fe=U<K.length-1,ye=U>0,me=fe||be?.end!==!1,ve=U===K.length-1;if(k(q)){let f=function(u){u&&u.name!=="AbortError"&&u.code!=="ERR_STREAM_PREMATURE_CLOSE"&&R(u)};if(me){let{destroy:u,cleanup:p}=H(q,fe,ye);ce.push(u),x(q)&&ve&&$.push(p)}q.on("error",f),x(q)&&ve&&$.push(()=>{q.removeListener("error",f)})}if(U===0)if(typeof q=="function"){if(N=q({signal:B}),!_(N))throw new b("Iterable, AsyncIterable or Stream","source",N)}else _(q)||M(q)||O(q)?N=q:N=a.from(q);else if(typeof q=="function"){if(O(N)){var X;N=le((X=N)===null||X===void 0?void 0:X.readable)}else N=le(N);if(N=q(N,{signal:B}),fe){if(!_(N,!0))throw new b("AsyncIterable",`transform[${U-1}]`,N)}else{var Y;T||(T=Do());let f=new T({objectMode:!0}),u=(Y=N)===null||Y===void 0?void 0:Y.then;if(typeof u=="function")ne++,u.call(N,C=>{Q=C,C!=null&&f.write(C),me&&f.end(),t.nextTick(R)},C=>{f.destroy(C),t.nextTick(R,C)});else if(_(N,!0))ne++,D(N,f,R,{end:me});else if(W(N)||O(N)){let C=N.readable||N;ne++,D(C,f,R,{end:me})}else throw new b("AsyncIterable or Promise","destination",N);N=f;let{destroy:p,cleanup:E}=H(N,!1,!0);ce.push(p),ve&&$.push(E)}}else if(k(q)){if(M(N)){ne+=2;let f=I(N,q,R,{end:me});x(q)&&ve&&$.push(f)}else if(O(N)||W(N)){let f=N.readable||N;ne++,D(f,q,R,{end:me})}else if(_(N))ne++,D(N,q,R,{end:me});else throw new d("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],N);N=q}else if(P(q)){if(M(N))ne++,de(le(N),q,R,{end:me});else if(W(N)||_(N))ne++,de(N,q,R,{end:me});else if(O(N))ne++,de(N.readable,q,R,{end:me});else throw new d("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],N);N=q}else N=a.from(q)}return(B!=null&&B.aborted||A!=null&&A.aborted)&&t.nextTick(ae),N}function I(K,pe,be,{end:ue}){let B=!1;if(pe.on("close",()=>{B||be(new m)}),K.pipe(pe,{end:!1}),ue){let A=function(){B=!0,pe.end()};z(K)?t.nextTick(A):K.once("end",A)}else be();return r(K,{readable:!0,writable:!1},A=>{let $=K._readableState;A&&A.code==="ERR_STREAM_PREMATURE_CLOSE"&&$&&$.ended&&!$.errored&&!$.errorEmitted?K.once("end",be).once("error",be):be(A)}),r(pe,{readable:!1,writable:!0},be)}o.exports={pipelineImpl:ge,pipeline:Z}}),Fo=he((e,o)=>{ie(),re(),te();var{pipeline:t}=hn(),l=ut(),{destroyer:h}=jt(),{isNodeStream:n,isReadable:r,isWritable:s,isWebStream:i,isTransformStream:a,isWritableStream:c,isReadableStream:d}=ct(),{AbortError:b,codes:{ERR_INVALID_ARG_VALUE:y,ERR_MISSING_ARGS:g}}=Fe(),m=bt();o.exports=function(...w){if(w.length===0)throw new g("streams");if(w.length===1)return l.from(w[0]);let S=[...w];if(typeof w[0]=="function"&&(w[0]=l.from(w[0])),typeof w[w.length-1]=="function"){let T=w.length-1;w[T]=l.from(w[T])}for(let T=0;T<w.length;++T)if(!(!n(w[T])&&!i(w[T]))){if(T<w.length-1&&!(r(w[T])||d(w[T])||a(w[T])))throw new y(`streams[${T}]`,S[T],"must be readable");if(T>0&&!(s(w[T])||c(w[T])||a(w[T])))throw new y(`streams[${T}]`,S[T],"must be writable")}let v,_,x,M,k;function O(T){let F=M;M=null,F?F(T):T?k.destroy(T):!ee&&!z&&k.destroy()}let P=w[0],W=t(w,O),z=!!(s(P)||c(P)||a(P)),ee=!!(r(W)||d(W)||a(W));if(k=new l({writableObjectMode:!!(P!=null&&P.writableObjectMode),readableObjectMode:!!(W!=null&&W.writableObjectMode),writable:z,readable:ee}),z){if(n(P))k._write=function(F,H,V){P.write(F,H)?V():v=V},k._final=function(F){P.end(),_=F},P.on("drain",function(){if(v){let F=v;v=null,F()}});else if(i(P)){let F=(a(P)?P.writable:P).getWriter();k._write=async function(H,V,le){try{await F.ready,F.write(H).catch(()=>{}),le()}catch(G){le(G)}},k._final=async function(H){try{await F.ready,F.close().catch(()=>{}),_=H}catch(V){H(V)}}}let T=a(W)?W.readable:W;m(T,()=>{if(_){let F=_;_=null,F()}})}if(ee){if(n(W))W.on("readable",function(){if(x){let T=x;x=null,T()}}),W.on("end",function(){k.push(null)}),k._read=function(){for(;;){let T=W.read();if(T===null){x=k._read;return}if(!k.push(T))return}};else if(i(W)){let T=(a(W)?W.readable:W).getReader();k._read=async function(){for(;;)try{let{value:F,done:H}=await T.read();if(!k.push(F))return;if(H){k.push(null);return}}catch{return}}}}return k._destroy=function(T,F){!T&&M!==null&&(T=new b),x=null,v=null,_=null,M===null?F(T):(M=F,n(W)&&h(W,T))},k}}),ka=he((e,o)=>{ie(),re(),te();var t=globalThis.AbortController||on().AbortController,{codes:{ERR_INVALID_ARG_VALUE:l,ERR_INVALID_ARG_TYPE:h,ERR_MISSING_ARGS:n,ERR_OUT_OF_RANGE:r},AbortError:s}=Fe(),{validateAbortSignal:i,validateInteger:a,validateObject:c}=dr(),d=xe().Symbol("kWeak"),{finished:b}=bt(),y=Fo(),{addAbortSignalNoValidate:g}=pr(),{isWritable:m,isNodeStream:w}=ct(),{ArrayPrototypePush:S,MathFloor:v,Number:_,NumberIsNaN:x,Promise:M,PromiseReject:k,PromisePrototypeThen:O,Symbol:P}=xe(),W=P("kEmpty"),z=P("kEof");function ee(ue,B){if(B!=null&&c(B,"options"),B?.signal!=null&&i(B.signal,"options.signal"),w(ue)&&!m(ue))throw new l("stream",ue,"must be writable");let A=y(this,ue);return B!=null&&B.signal&&g(B.signal,A),A}function T(ue,B){if(typeof ue!="function")throw new h("fn",["Function","AsyncFunction"],ue);B!=null&&c(B,"options"),B?.signal!=null&&i(B.signal,"options.signal");let A=1;return B?.concurrency!=null&&(A=v(B.concurrency)),a(A,"concurrency",1),async function*(){var $,ae;let J=new t,Q=this,ce=[],ne=J.signal,R={signal:ne},L=()=>J.abort();B!=null&&($=B.signal)!==null&&$!==void 0&&$.aborted&&L(),B==null||(ae=B.signal)===null||ae===void 0||ae.addEventListener("abort",L);let N,X,Y=!1;function U(){Y=!0}async function q(){try{for await(let me of Q){var fe;if(Y)return;if(ne.aborted)throw new s;try{me=ue(me,R)}catch(ve){me=k(ve)}me!==W&&(typeof((fe=me)===null||fe===void 0?void 0:fe.catch)=="function"&&me.catch(U),ce.push(me),N&&(N(),N=null),!Y&&ce.length&&ce.length>=A&&await new M(ve=>{X=ve}))}ce.push(z)}catch(me){let ve=k(me);O(ve,void 0,U),ce.push(ve)}finally{var ye;Y=!0,N&&(N(),N=null),B==null||(ye=B.signal)===null||ye===void 0||ye.removeEventListener("abort",L)}}q();try{for(;;){for(;ce.length>0;){let fe=await ce[0];if(fe===z)return;if(ne.aborted)throw new s;fe!==W&&(yield fe),ce.shift(),X&&(X(),X=null)}await new M(fe=>{N=fe})}}finally{J.abort(),Y=!0,X&&(X(),X=null)}}.call(this)}function F(ue=void 0){return ue!=null&&c(ue,"options"),ue?.signal!=null&&i(ue.signal,"options.signal"),async function*(){let B=0;for await(let $ of this){var A;if(ue!=null&&(A=ue.signal)!==null&&A!==void 0&&A.aborted)throw new s({cause:ue.signal.reason});yield[B++,$]}}.call(this)}async function H(ue,B=void 0){for await(let A of D.call(this,ue,B))return!0;return!1}async function V(ue,B=void 0){if(typeof ue!="function")throw new h("fn",["Function","AsyncFunction"],ue);return!await H.call(this,async(...A)=>!await ue(...A),B)}async function le(ue,B){for await(let A of D.call(this,ue,B))return A}async function G(ue,B){if(typeof ue!="function")throw new h("fn",["Function","AsyncFunction"],ue);async function A($,ae){return await ue($,ae),W}for await(let $ of T.call(this,A,B));}function D(ue,B){if(typeof ue!="function")throw new h("fn",["Function","AsyncFunction"],ue);async function A($,ae){return await ue($,ae)?$:W}return T.call(this,A,B)}var de=class extends n{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}};async function Z(ue,B,A){var $;if(typeof ue!="function")throw new h("reducer",["Function","AsyncFunction"],ue);A!=null&&c(A,"options"),A?.signal!=null&&i(A.signal,"options.signal");let ae=arguments.length>1;if(A!=null&&($=A.signal)!==null&&$!==void 0&&$.aborted){let R=new s(void 0,{cause:A.signal.reason});throw this.once("error",()=>{}),await b(this.destroy(R)),R}let J=new t,Q=J.signal;if(A!=null&&A.signal){let R={once:!0,[d]:this};A.signal.addEventListener("abort",()=>J.abort(),R)}let ce=!1;try{for await(let R of this){var ne;if(ce=!0,A!=null&&(ne=A.signal)!==null&&ne!==void 0&&ne.aborted)throw new s;ae?B=await ue(B,R,{signal:Q}):(B=R,ae=!0)}if(!ce&&!ae)throw new de}finally{J.abort()}return B}async function ge(ue){ue!=null&&c(ue,"options"),ue?.signal!=null&&i(ue.signal,"options.signal");let B=[];for await(let $ of this){var A;if(ue!=null&&(A=ue.signal)!==null&&A!==void 0&&A.aborted)throw new s(void 0,{cause:ue.signal.reason});S(B,$)}return B}function I(ue,B){let A=T.call(this,ue,B);return async function*(){for await(let $ of A)yield*$}.call(this)}function K(ue){if(ue=_(ue),x(ue))return 0;if(ue<0)throw new r("number",">= 0",ue);return ue}function pe(ue,B=void 0){return B!=null&&c(B,"options"),B?.signal!=null&&i(B.signal,"options.signal"),ue=K(ue),async function*(){var A;if(B!=null&&(A=B.signal)!==null&&A!==void 0&&A.aborted)throw new s;for await(let ae of this){var $;if(B!=null&&($=B.signal)!==null&&$!==void 0&&$.aborted)throw new s;ue--<=0&&(yield ae)}}.call(this)}function be(ue,B=void 0){return B!=null&&c(B,"options"),B?.signal!=null&&i(B.signal,"options.signal"),ue=K(ue),async function*(){var A;if(B!=null&&(A=B.signal)!==null&&A!==void 0&&A.aborted)throw new s;for await(let ae of this){var $;if(B!=null&&($=B.signal)!==null&&$!==void 0&&$.aborted)throw new s;if(ue-- >0)yield ae;else return}}.call(this)}o.exports.streamReturningOperators={asIndexedPairs:F,drop:pe,filter:D,flatMap:I,map:T,take:be,compose:ee},o.exports.promiseReturningOperators={every:V,forEach:G,reduce:Z,toArray:ge,some:H,find:le}}),Wo=he((e,o)=>{ie(),re(),te();var{ArrayPrototypePop:t,Promise:l}=xe(),{isIterable:h,isNodeStream:n,isWebStream:r}=ct(),{pipelineImpl:s}=hn(),{finished:i}=bt();$o();function a(...c){return new l((d,b)=>{let y,g,m=c[c.length-1];if(m&&typeof m=="object"&&!n(m)&&!h(m)&&!r(m)){let w=t(c);y=w.signal,g=w.end}s(c,(w,S)=>{w?b(w):d(S)},{signal:y,end:g})})}o.exports={finished:i,pipeline:a}}),$o=he((e,o)=>{ie(),re(),te();var{Buffer:t}=(Ne(),Ie(Le)),{ObjectDefineProperty:l,ObjectKeys:h,ReflectApply:n}=xe(),{promisify:{custom:r}}=lt(),{streamReturningOperators:s,promiseReturningOperators:i}=ka(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:a}}=Fe(),c=Fo(),{pipeline:d}=hn(),{destroyer:b}=jt(),y=bt(),g=Wo(),m=ct(),w=o.exports=sn().Stream;w.isDisturbed=m.isDisturbed,w.isErrored=m.isErrored,w.isReadable=m.isReadable,w.Readable=br();for(let v of h(s)){let _=function(...M){if(new.target)throw a();return w.Readable.from(n(x,this,M))},x=s[v];l(_,"name",{__proto__:null,value:x.name}),l(_,"length",{__proto__:null,value:x.length}),l(w.Readable.prototype,v,{__proto__:null,value:_,enumerable:!1,configurable:!0,writable:!0})}for(let v of h(i)){let _=function(...M){if(new.target)throw a();return n(x,this,M)},x=i[v];l(_,"name",{__proto__:null,value:x.name}),l(_,"length",{__proto__:null,value:x.length}),l(w.Readable.prototype,v,{__proto__:null,value:_,enumerable:!1,configurable:!0,writable:!0})}w.Writable=No(),w.Duplex=ut(),w.Transform=jo(),w.PassThrough=Do(),w.pipeline=d;var{addAbortSignal:S}=pr();w.addAbortSignal=S,w.finished=y,w.destroy=b,w.compose=c,l(w,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return g}}),l(d,r,{__proto__:null,enumerable:!0,get(){return g.pipeline}}),l(y,r,{__proto__:null,enumerable:!0,get(){return g.finished}}),w.Stream=w,w._isUint8Array=function(v){return v instanceof Uint8Array},w._uint8ArrayToBuffer=function(v){return t.from(v.buffer,v.byteOffset,v.byteLength)}}),Mt=he((e,o)=>{ie(),re(),te();var t=$o(),l=Wo(),h=t.Readable.destroy;o.exports=t.Readable,o.exports._uint8ArrayToBuffer=t._uint8ArrayToBuffer,o.exports._isUint8Array=t._isUint8Array,o.exports.isDisturbed=t.isDisturbed,o.exports.isErrored=t.isErrored,o.exports.isReadable=t.isReadable,o.exports.Readable=t.Readable,o.exports.Writable=t.Writable,o.exports.Duplex=t.Duplex,o.exports.Transform=t.Transform,o.exports.PassThrough=t.PassThrough,o.exports.addAbortSignal=t.addAbortSignal,o.exports.finished=t.finished,o.exports.destroy=t.destroy,o.exports.destroy=h,o.exports.pipeline=t.pipeline,o.exports.compose=t.compose,Object.defineProperty(t,"promises",{configurable:!0,enumerable:!0,get(){return l}}),o.exports.Stream=t.Stream,o.exports.default=o.exports}),Oa=he((e,o)=>{ie(),re(),te(),typeof Object.create=="function"?o.exports=function(t,l){l&&(t.super_=l,t.prototype=Object.create(l.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:o.exports=function(t,l){if(l){t.super_=l;var h=function(){};h.prototype=l.prototype,t.prototype=new h,t.prototype.constructor=t}}}),Ra=he((e,o)=>{ie(),re(),te();var{Buffer:t}=(Ne(),Ie(Le)),l=Symbol.for("BufferList");function h(n){if(!(this instanceof h))return new h(n);h._init.call(this,n)}h._init=function(n){Object.defineProperty(this,l,{value:!0}),this._bufs=[],this.length=0,n&&this.append(n)},h.prototype._new=function(n){return new h(n)},h.prototype._offset=function(n){if(n===0)return[0,0];let r=0;for(let s=0;s<this._bufs.length;s++){let i=r+this._bufs[s].length;if(n<i||s===this._bufs.length-1)return[s,n-r];r=i}},h.prototype._reverseOffset=function(n){let r=n[0],s=n[1];for(let i=0;i<r;i++)s+=this._bufs[i].length;return s},h.prototype.get=function(n){if(n>this.length||n<0)return;let r=this._offset(n);return this._bufs[r[0]][r[1]]},h.prototype.slice=function(n,r){return typeof n=="number"&&n<0&&(n+=this.length),typeof r=="number"&&r<0&&(r+=this.length),this.copy(null,0,n,r)},h.prototype.copy=function(n,r,s,i){if((typeof s!="number"||s<0)&&(s=0),(typeof i!="number"||i>this.length)&&(i=this.length),s>=this.length||i<=0)return n||t.alloc(0);let a=!!n,c=this._offset(s),d=i-s,b=d,y=a&&r||0,g=c[1];if(s===0&&i===this.length){if(!a)return this._bufs.length===1?this._bufs[0]:t.concat(this._bufs,this.length);for(let m=0;m<this._bufs.length;m++)this._bufs[m].copy(n,y),y+=this._bufs[m].length;return n}if(b<=this._bufs[c[0]].length-g)return a?this._bufs[c[0]].copy(n,r,g,g+b):this._bufs[c[0]].slice(g,g+b);a||(n=t.allocUnsafe(d));for(let m=c[0];m<this._bufs.length;m++){let w=this._bufs[m].length-g;if(b>w)this._bufs[m].copy(n,y,g),y+=w;else{this._bufs[m].copy(n,y,g,g+b),y+=w;break}b-=w,g&&(g=0)}return n.length>y?n.slice(0,y):n},h.prototype.shallowSlice=function(n,r){if(n=n||0,r=typeof r!="number"?this.length:r,n<0&&(n+=this.length),r<0&&(r+=this.length),n===r)return this._new();let s=this._offset(n),i=this._offset(r),a=this._bufs.slice(s[0],i[0]+1);return i[1]===0?a.pop():a[a.length-1]=a[a.length-1].slice(0,i[1]),s[1]!==0&&(a[0]=a[0].slice(s[1])),this._new(a)},h.prototype.toString=function(n,r,s){return this.slice(r,s).toString(n)},h.prototype.consume=function(n){if(n=Math.trunc(n),Number.isNaN(n)||n<=0)return this;for(;this._bufs.length;)if(n>=this._bufs[0].length)n-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift();else{this._bufs[0]=this._bufs[0].slice(n),this.length-=n;break}return this},h.prototype.duplicate=function(){let n=this._new();for(let r=0;r<this._bufs.length;r++)n.append(this._bufs[r]);return n},h.prototype.append=function(n){if(n==null)return this;if(n.buffer)this._appendBuffer(t.from(n.buffer,n.byteOffset,n.byteLength));else if(Array.isArray(n))for(let r=0;r<n.length;r++)this.append(n[r]);else if(this._isBufferList(n))for(let r=0;r<n._bufs.length;r++)this.append(n._bufs[r]);else typeof n=="number"&&(n=n.toString()),this._appendBuffer(t.from(n));return this},h.prototype._appendBuffer=function(n){this._bufs.push(n),this.length+=n.length},h.prototype.indexOf=function(n,r,s){if(s===void 0&&typeof r=="string"&&(s=r,r=void 0),typeof n=="function"||Array.isArray(n))throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if(typeof n=="number"?n=t.from([n]):typeof n=="string"?n=t.from(n,s):this._isBufferList(n)?n=n.slice():Array.isArray(n.buffer)?n=t.from(n.buffer,n.byteOffset,n.byteLength):t.isBuffer(n)||(n=t.from(n)),r=Number(r||0),isNaN(r)&&(r=0),r<0&&(r=this.length+r),r<0&&(r=0),n.length===0)return r>this.length?this.length:r;let i=this._offset(r),a=i[0],c=i[1];for(;a<this._bufs.length;a++){let d=this._bufs[a];for(;c<d.length;)if(d.length-c>=n.length){let b=d.indexOf(n,c);if(b!==-1)return this._reverseOffset([a,b]);c=d.length-n.length+1}else{let b=this._reverseOffset([a,c]);if(this._match(b,n))return b;c++}c=0}return-1},h.prototype._match=function(n,r){if(this.length-n<r.length)return!1;for(let s=0;s<r.length;s++)if(this.get(n+s)!==r[s])return!1;return!0},function(){let n={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readBigInt64BE:8,readBigInt64LE:8,readBigUInt64BE:8,readBigUInt64LE:8,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(let r in n)(function(s){n[s]===null?h.prototype[s]=function(i,a){return this.slice(i,i+a)[s](0,a)}:h.prototype[s]=function(i=0){return this.slice(i,i+n[s])[s](0)}})(r)}(),h.prototype._isBufferList=function(n){return n instanceof h||h.isBufferList(n)},h.isBufferList=function(n){return n!=null&&n[l]},o.exports=h}),Ca=he((e,o)=>{ie(),re(),te();var t=Mt().Duplex,l=Oa(),h=Ra();function n(r){if(!(this instanceof n))return new n(r);if(typeof r=="function"){this._callback=r;let s=function(i){this._callback&&(this._callback(i),this._callback=null)}.bind(this);this.on("pipe",function(i){i.on("error",s)}),this.on("unpipe",function(i){i.removeListener("error",s)}),r=null}h._init.call(this,r),t.call(this)}l(n,t),Object.assign(n.prototype,h.prototype),n.prototype._new=function(r){return new n(r)},n.prototype._write=function(r,s,i){this._appendBuffer(r),typeof i=="function"&&i()},n.prototype._read=function(r){if(!this.length)return this.push(null);r=Math.min(r,this.length),this.push(this.slice(0,r)),this.consume(r)},n.prototype.end=function(r){t.prototype.end.call(this,r),this._callback&&(this._callback(null,this.slice()),this._callback=null)},n.prototype._destroy=function(r,s){this._bufs.length=0,this.length=0,s(r)},n.prototype._isBufferList=function(r){return r instanceof n||r instanceof h||n.isBufferList(r)},n.isBufferList=h.isBufferList,o.exports=n,o.exports.BufferListStream=n,o.exports.BufferList=h}),Pa=he((e,o)=>{ie(),re(),te();var t=class{constructor(){this.cmd=null,this.retain=!1,this.qos=0,this.dup=!1,this.length=-1,this.topic=null,this.payload=null}};o.exports=t}),qo=he((e,o)=>{ie(),re(),te();var t=o.exports,{Buffer:l}=(Ne(),Ie(Le));t.types={0:"reserved",1:"connect",2:"connack",3:"publish",4:"puback",5:"pubrec",6:"pubrel",7:"pubcomp",8:"subscribe",9:"suback",10:"unsubscribe",11:"unsuback",12:"pingreq",13:"pingresp",14:"disconnect",15:"auth"},t.requiredHeaderFlags={1:0,2:0,4:0,5:0,6:2,7:0,8:2,9:0,10:2,11:0,12:0,13:0,14:0,15:0},t.requiredHeaderFlagsErrors={};for(let n in t.requiredHeaderFlags){let r=t.requiredHeaderFlags[n];t.requiredHeaderFlagsErrors[n]="Invalid header flag bits, must be 0x"+r.toString(16)+" for "+t.types[n]+" packet"}t.codes={};for(let n in t.types){let r=t.types[n];t.codes[r]=n}t.CMD_SHIFT=4,t.CMD_MASK=240,t.DUP_MASK=8,t.QOS_MASK=3,t.QOS_SHIFT=1,t.RETAIN_MASK=1,t.VARBYTEINT_MASK=127,t.VARBYTEINT_FIN_MASK=128,t.VARBYTEINT_MAX=268435455,t.SESSIONPRESENT_MASK=1,t.SESSIONPRESENT_HEADER=l.from([t.SESSIONPRESENT_MASK]),t.CONNACK_HEADER=l.from([t.codes.connack<<t.CMD_SHIFT]),t.USERNAME_MASK=128,t.PASSWORD_MASK=64,t.WILL_RETAIN_MASK=32,t.WILL_QOS_MASK=24,t.WILL_QOS_SHIFT=3,t.WILL_FLAG_MASK=4,t.CLEAN_SESSION_MASK=2,t.CONNECT_HEADER=l.from([t.codes.connect<<t.CMD_SHIFT]),t.properties={sessionExpiryInterval:17,willDelayInterval:24,receiveMaximum:33,maximumPacketSize:39,topicAliasMaximum:34,requestResponseInformation:25,requestProblemInformation:23,userProperties:38,authenticationMethod:21,authenticationData:22,payloadFormatIndicator:1,messageExpiryInterval:2,contentType:3,responseTopic:8,correlationData:9,maximumQoS:36,retainAvailable:37,assignedClientIdentifier:18,reasonString:31,wildcardSubscriptionAvailable:40,subscriptionIdentifiersAvailable:41,sharedSubscriptionAvailable:42,serverKeepAlive:19,responseInformation:26,serverReference:28,topicAlias:35,subscriptionIdentifier:11},t.propertiesCodes={};for(let n in t.properties){let r=t.properties[n];t.propertiesCodes[r]=n}t.propertiesTypes={sessionExpiryInterval:"int32",willDelayInterval:"int32",receiveMaximum:"int16",maximumPacketSize:"int32",topicAliasMaximum:"int16",requestResponseInformation:"byte",requestProblemInformation:"byte",userProperties:"pair",authenticationMethod:"string",authenticationData:"binary",payloadFormatIndicator:"byte",messageExpiryInterval:"int32",contentType:"string",responseTopic:"string",correlationData:"binary",maximumQoS:"int8",retainAvailable:"byte",assignedClientIdentifier:"string",reasonString:"string",wildcardSubscriptionAvailable:"byte",subscriptionIdentifiersAvailable:"byte",sharedSubscriptionAvailable:"byte",serverKeepAlive:"int16",responseInformation:"string",serverReference:"string",topicAlias:"int16",subscriptionIdentifier:"var"};function h(n){return[0,1,2].map(r=>[0,1].map(s=>[0,1].map(i=>{let a=l.alloc(1);return a.writeUInt8(t.codes[n]<<t.CMD_SHIFT|(s?t.DUP_MASK:0)|r<<t.QOS_SHIFT|i,0,!0),a})))}t.PUBLISH_HEADER=h("publish"),t.SUBSCRIBE_HEADER=h("subscribe"),t.SUBSCRIBE_OPTIONS_QOS_MASK=3,t.SUBSCRIBE_OPTIONS_NL_MASK=1,t.SUBSCRIBE_OPTIONS_NL_SHIFT=2,t.SUBSCRIBE_OPTIONS_RAP_MASK=1,t.SUBSCRIBE_OPTIONS_RAP_SHIFT=3,t.SUBSCRIBE_OPTIONS_RH_MASK=3,t.SUBSCRIBE_OPTIONS_RH_SHIFT=4,t.SUBSCRIBE_OPTIONS_RH=[0,16,32],t.SUBSCRIBE_OPTIONS_NL=4,t.SUBSCRIBE_OPTIONS_RAP=8,t.SUBSCRIBE_OPTIONS_QOS=[0,1,2],t.UNSUBSCRIBE_HEADER=h("unsubscribe"),t.ACKS={unsuback:h("unsuback"),puback:h("puback"),pubcomp:h("pubcomp"),pubrel:h("pubrel"),pubrec:h("pubrec")},t.SUBACK_HEADER=l.from([t.codes.suback<<t.CMD_SHIFT]),t.VERSION3=l.from([3]),t.VERSION4=l.from([4]),t.VERSION5=l.from([5]),t.VERSION131=l.from([131]),t.VERSION132=l.from([132]),t.QOS=[0,1,2].map(n=>l.from([n])),t.EMPTY={pingreq:l.from([t.codes.pingreq<<4,0]),pingresp:l.from([t.codes.pingresp<<4,0]),disconnect:l.from([t.codes.disconnect<<4,0])},t.MQTT5_PUBACK_PUBREC_CODES={0:"Success",16:"No matching subscribers",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",144:"Topic Name invalid",145:"Packet identifier in use",151:"Quota exceeded",153:"Payload format invalid"},t.MQTT5_PUBREL_PUBCOMP_CODES={0:"Success",146:"Packet Identifier not found"},t.MQTT5_SUBACK_CODES={0:"Granted QoS 0",1:"Granted QoS 1",2:"Granted QoS 2",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",143:"Topic Filter invalid",145:"Packet Identifier in use",151:"Quota exceeded",158:"Shared Subscriptions not supported",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"},t.MQTT5_UNSUBACK_CODES={0:"Success",17:"No subscription existed",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",143:"Topic Filter invalid",145:"Packet Identifier in use"},t.MQTT5_DISCONNECT_CODES={0:"Normal disconnection",4:"Disconnect with Will Message",128:"Unspecified error",129:"Malformed Packet",130:"Protocol Error",131:"Implementation specific error",135:"Not authorized",137:"Server busy",139:"Server shutting down",141:"Keep Alive timeout",142:"Session taken over",143:"Topic Filter invalid",144:"Topic Name invalid",147:"Receive Maximum exceeded",148:"Topic Alias invalid",149:"Packet too large",150:"Message rate too high",151:"Quota exceeded",152:"Administrative action",153:"Payload format invalid",154:"Retain not supported",155:"QoS not supported",156:"Use another server",157:"Server moved",158:"Shared Subscriptions not supported",159:"Connection rate exceeded",160:"Maximum connect time",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"},t.MQTT5_AUTH_CODES={0:"Success",24:"Continue authentication",25:"Re-authenticate"}}),Ba=he((e,o)=>{ie(),re(),te();var t=1e3,l=t*60,h=l*60,n=h*24,r=n*7,s=n*365.25;o.exports=function(b,y){y=y||{};var g=typeof b;if(g==="string"&&b.length>0)return i(b);if(g==="number"&&isFinite(b))return y.long?c(b):a(b);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(b))};function i(b){if(b=String(b),!(b.length>100)){var y=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(b);if(y){var g=parseFloat(y[1]),m=(y[2]||"ms").toLowerCase();switch(m){case"years":case"year":case"yrs":case"yr":case"y":return g*s;case"weeks":case"week":case"w":return g*r;case"days":case"day":case"d":return g*n;case"hours":case"hour":case"hrs":case"hr":case"h":return g*h;case"minutes":case"minute":case"mins":case"min":case"m":return g*l;case"seconds":case"second":case"secs":case"sec":case"s":return g*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return g;default:return}}}}function a(b){var y=Math.abs(b);return y>=n?Math.round(b/n)+"d":y>=h?Math.round(b/h)+"h":y>=l?Math.round(b/l)+"m":y>=t?Math.round(b/t)+"s":b+"ms"}function c(b){var y=Math.abs(b);return y>=n?d(b,y,n,"day"):y>=h?d(b,y,h,"hour"):y>=l?d(b,y,l,"minute"):y>=t?d(b,y,t,"second"):b+" ms"}function d(b,y,g,m){var w=y>=g*1.5;return Math.round(b/g)+" "+m+(w?"s":"")}}),xa=he((e,o)=>{ie(),re(),te();function t(l){n.debug=n,n.default=n,n.coerce=d,n.disable=i,n.enable=s,n.enabled=a,n.humanize=Ba(),n.destroy=b,Object.keys(l).forEach(y=>{n[y]=l[y]}),n.names=[],n.skips=[],n.formatters={};function h(y){let g=0;for(let m=0;m<y.length;m++)g=(g<<5)-g+y.charCodeAt(m),g|=0;return n.colors[Math.abs(g)%n.colors.length]}n.selectColor=h;function n(y){let g,m=null,w,S;function v(..._){if(!v.enabled)return;let x=v,M=Number(new Date),k=M-(g||M);x.diff=k,x.prev=g,x.curr=M,g=M,_[0]=n.coerce(_[0]),typeof _[0]!="string"&&_.unshift("%O");let O=0;_[0]=_[0].replace(/%([a-zA-Z%])/g,(P,W)=>{if(P==="%%")return"%";O++;let z=n.formatters[W];if(typeof z=="function"){let ee=_[O];P=z.call(x,ee),_.splice(O,1),O--}return P}),n.formatArgs.call(x,_),(x.log||n.log).apply(x,_)}return v.namespace=y,v.useColors=n.useColors(),v.color=n.selectColor(y),v.extend=r,v.destroy=n.destroy,Object.defineProperty(v,"enabled",{enumerable:!0,configurable:!1,get:()=>m!==null?m:(w!==n.namespaces&&(w=n.namespaces,S=n.enabled(y)),S),set:_=>{m=_}}),typeof n.init=="function"&&n.init(v),v}function r(y,g){let m=n(this.namespace+(typeof g>"u"?":":g)+y);return m.log=this.log,m}function s(y){n.save(y),n.namespaces=y,n.names=[],n.skips=[];let g,m=(typeof y=="string"?y:"").split(/[\s,]+/),w=m.length;for(g=0;g<w;g++)m[g]&&(y=m[g].replace(/\*/g,".*?"),y[0]==="-"?n.skips.push(new RegExp("^"+y.slice(1)+"$")):n.names.push(new RegExp("^"+y+"$")))}function i(){let y=[...n.names.map(c),...n.skips.map(c).map(g=>"-"+g)].join(",");return n.enable(""),y}function a(y){if(y[y.length-1]==="*")return!0;let g,m;for(g=0,m=n.skips.length;g<m;g++)if(n.skips[g].test(y))return!1;for(g=0,m=n.names.length;g<m;g++)if(n.names[g].test(y))return!0;return!1}function c(y){return y.toString().substring(2,y.toString().length-2).replace(/\.\*\?$/,"*")}function d(y){return y instanceof Error?y.stack||y.message:y}function b(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return n.enable(n.load()),n}o.exports=t}),ht=he((e,o)=>{ie(),re(),te(),e.formatArgs=l,e.save=h,e.load=n,e.useColors=t,e.storage=r(),e.destroy=(()=>{let i=!1;return()=>{i||(i=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function t(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof $e<"u"&&$e.userAgent&&$e.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof $e<"u"&&$e.userAgent&&$e.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof $e<"u"&&$e.userAgent&&$e.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function l(i){if(i[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+i[0]+(this.useColors?"%c ":" ")+"+"+o.exports.humanize(this.diff),!this.useColors)return;let a="color: "+this.color;i.splice(1,0,a,"color: inherit");let c=0,d=0;i[0].replace(/%[a-zA-Z%]/g,b=>{b!=="%%"&&(c++,b==="%c"&&(d=c))}),i.splice(d,0,a)}e.log=console.debug||console.log||(()=>{});function h(i){try{i?e.storage.setItem("debug",i):e.storage.removeItem("debug")}catch{}}function n(){let i;try{i=e.storage.getItem("debug")}catch{}return!i&&typeof Te<"u"&&"env"in Te&&(i=Te.env.DEBUG),i}function r(){try{return localStorage}catch{}}o.exports=xa()(e);var{formatters:s}=o.exports;s.j=function(i){try{return JSON.stringify(i)}catch(a){return"[UnexpectedJSONParseError]: "+a.message}}}),Ma=he((e,o)=>{ie(),re(),te();var t=Ca(),{EventEmitter:l}=(Dt(),Ie(xt)),h=Pa(),n=qo(),r=ht()("mqtt-packet:parser"),s=class Hi extends l{constructor(){super(),this.parser=this.constructor.parser}static parser(a){return this instanceof Hi?(this.settings=a||{},this._states=["_parseHeader","_parseLength","_parsePayload","_newPacket"],this._resetState(),this):new Hi().parser(a)}_resetState(){r("_resetState: resetting packet, error, _list, and _stateCounter"),this.packet=new h,this.error=null,this._list=t(),this._stateCounter=0}parse(a){for(this.error&&this._resetState(),this._list.append(a),r("parse: current state: %s",this._states[this._stateCounter]);(this.packet.length!==-1||this._list.length>0)&&this[this._states[this._stateCounter]]()&&!this.error;)this._stateCounter++,r("parse: state complete. _stateCounter is now: %d",this._stateCounter),r("parse: packet.length: %d, buffer list length: %d",this.packet.length,this._list.length),this._stateCounter>=this._states.length&&(this._stateCounter=0);return r("parse: exited while loop. packet: %d, buffer list length: %d",this.packet.length,this._list.length),this._list.length}_parseHeader(){let a=this._list.readUInt8(0),c=a>>n.CMD_SHIFT;this.packet.cmd=n.types[c];let d=a&15,b=n.requiredHeaderFlags[c];return b!=null&&d!==b?this._emitError(new Error(n.requiredHeaderFlagsErrors[c])):(this.packet.retain=(a&n.RETAIN_MASK)!==0,this.packet.qos=a>>n.QOS_SHIFT&n.QOS_MASK,this.packet.qos>2?this._emitError(new Error("Packet must not have both QoS bits set to 1")):(this.packet.dup=(a&n.DUP_MASK)!==0,r("_parseHeader: packet: %o",this.packet),this._list.consume(1),!0))}_parseLength(){let a=this._parseVarByteNum(!0);return a&&(this.packet.length=a.value,this._list.consume(a.bytes)),r("_parseLength %d",a.value),!!a}_parsePayload(){r("_parsePayload: payload %O",this._list);let a=!1;if(this.packet.length===0||this._list.length>=this.packet.length){switch(this._pos=0,this.packet.cmd){case"connect":this._parseConnect();break;case"connack":this._parseConnack();break;case"publish":this._parsePublish();break;case"puback":case"pubrec":case"pubrel":case"pubcomp":this._parseConfirmation();break;case"subscribe":this._parseSubscribe();break;case"suback":this._parseSuback();break;case"unsubscribe":this._parseUnsubscribe();break;case"unsuback":this._parseUnsuback();break;case"pingreq":case"pingresp":break;case"disconnect":this._parseDisconnect();break;case"auth":this._parseAuth();break;default:this._emitError(new Error("Not supported"))}a=!0}return r("_parsePayload complete result: %s",a),a}_parseConnect(){r("_parseConnect");let a,c,d,b,y={},g=this.packet,m=this._parseString();if(m===null)return this._emitError(new Error("Cannot parse protocolId"));if(m!=="MQTT"&&m!=="MQIsdp")return this._emitError(new Error("Invalid protocolId"));if(g.protocolId=m,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(g.protocolVersion=this._list.readUInt8(this._pos),g.protocolVersion>=128&&(g.bridgeMode=!0,g.protocolVersion=g.protocolVersion-128),g.protocolVersion!==3&&g.protocolVersion!==4&&g.protocolVersion!==5)return this._emitError(new Error("Invalid protocol version"));if(this._pos++,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(this._list.readUInt8(this._pos)&1)return this._emitError(new Error("Connect flag bit 0 must be 0, but got 1"));y.username=this._list.readUInt8(this._pos)&n.USERNAME_MASK,y.password=this._list.readUInt8(this._pos)&n.PASSWORD_MASK,y.will=this._list.readUInt8(this._pos)&n.WILL_FLAG_MASK;let w=!!(this._list.readUInt8(this._pos)&n.WILL_RETAIN_MASK),S=(this._list.readUInt8(this._pos)&n.WILL_QOS_MASK)>>n.WILL_QOS_SHIFT;if(y.will)g.will={},g.will.retain=w,g.will.qos=S;else{if(w)return this._emitError(new Error("Will Retain Flag must be set to zero when Will Flag is set to 0"));if(S)return this._emitError(new Error("Will QoS must be set to zero when Will Flag is set to 0"))}if(g.clean=(this._list.readUInt8(this._pos)&n.CLEAN_SESSION_MASK)!==0,this._pos++,g.keepalive=this._parseNum(),g.keepalive===-1)return this._emitError(new Error("Packet too short"));if(g.protocolVersion===5){let _=this._parseProperties();Object.getOwnPropertyNames(_).length&&(g.properties=_)}let v=this._parseString();if(v===null)return this._emitError(new Error("Packet too short"));if(g.clientId=v,r("_parseConnect: packet.clientId: %s",g.clientId),y.will){if(g.protocolVersion===5){let _=this._parseProperties();Object.getOwnPropertyNames(_).length&&(g.will.properties=_)}if(a=this._parseString(),a===null)return this._emitError(new Error("Cannot parse will topic"));if(g.will.topic=a,r("_parseConnect: packet.will.topic: %s",g.will.topic),c=this._parseBuffer(),c===null)return this._emitError(new Error("Cannot parse will payload"));g.will.payload=c,r("_parseConnect: packet.will.paylaod: %s",g.will.payload)}if(y.username){if(b=this._parseString(),b===null)return this._emitError(new Error("Cannot parse username"));g.username=b,r("_parseConnect: packet.username: %s",g.username)}if(y.password){if(d=this._parseBuffer(),d===null)return this._emitError(new Error("Cannot parse password"));g.password=d}return this.settings=g,r("_parseConnect: complete"),g}_parseConnack(){r("_parseConnack");let a=this.packet;if(this._list.length<1)return null;let c=this._list.readUInt8(this._pos++);if(c>1)return this._emitError(new Error("Invalid connack flags, bits 7-1 must be set to 0"));if(a.sessionPresent=!!(c&n.SESSIONPRESENT_MASK),this.settings.protocolVersion===5)this._list.length>=2?a.reasonCode=this._list.readUInt8(this._pos++):a.reasonCode=0;else{if(this._list.length<2)return null;a.returnCode=this._list.readUInt8(this._pos++)}if(a.returnCode===-1||a.reasonCode===-1)return this._emitError(new Error("Cannot parse return code"));if(this.settings.protocolVersion===5){let d=this._parseProperties();Object.getOwnPropertyNames(d).length&&(a.properties=d)}r("_parseConnack: complete")}_parsePublish(){r("_parsePublish");let a=this.packet;if(a.topic=this._parseString(),a.topic===null)return this._emitError(new Error("Cannot parse topic"));if(!(a.qos>0&&!this._parseMessageId())){if(this.settings.protocolVersion===5){let c=this._parseProperties();Object.getOwnPropertyNames(c).length&&(a.properties=c)}a.payload=this._list.slice(this._pos,a.length),r("_parsePublish: payload from buffer list: %o",a.payload)}}_parseSubscribe(){r("_parseSubscribe");let a=this.packet,c,d,b,y,g,m,w;if(a.subscriptions=[],!!this._parseMessageId()){if(this.settings.protocolVersion===5){let S=this._parseProperties();Object.getOwnPropertyNames(S).length&&(a.properties=S)}if(a.length<=0)return this._emitError(new Error("Malformed subscribe, no payload specified"));for(;this._pos<a.length;){if(c=this._parseString(),c===null)return this._emitError(new Error("Cannot parse topic"));if(this._pos>=a.length)return this._emitError(new Error("Malformed Subscribe Payload"));if(d=this._parseByte(),this.settings.protocolVersion===5){if(d&192)return this._emitError(new Error("Invalid subscribe topic flag bits, bits 7-6 must be 0"))}else if(d&252)return this._emitError(new Error("Invalid subscribe topic flag bits, bits 7-2 must be 0"));if(b=d&n.SUBSCRIBE_OPTIONS_QOS_MASK,b>2)return this._emitError(new Error("Invalid subscribe QoS, must be <= 2"));if(m=(d>>n.SUBSCRIBE_OPTIONS_NL_SHIFT&n.SUBSCRIBE_OPTIONS_NL_MASK)!==0,g=(d>>n.SUBSCRIBE_OPTIONS_RAP_SHIFT&n.SUBSCRIBE_OPTIONS_RAP_MASK)!==0,y=d>>n.SUBSCRIBE_OPTIONS_RH_SHIFT&n.SUBSCRIBE_OPTIONS_RH_MASK,y>2)return this._emitError(new Error("Invalid retain handling, must be <= 2"));w={topic:c,qos:b},this.settings.protocolVersion===5?(w.nl=m,w.rap=g,w.rh=y):this.settings.bridgeMode&&(w.rh=0,w.rap=!0,w.nl=!0),r("_parseSubscribe: push subscription `%s` to subscription",w),a.subscriptions.push(w)}}}_parseSuback(){r("_parseSuback");let a=this.packet;if(this.packet.granted=[],!!this._parseMessageId()){if(this.settings.protocolVersion===5){let c=this._parseProperties();Object.getOwnPropertyNames(c).length&&(a.properties=c)}if(a.length<=0)return this._emitError(new Error("Malformed suback, no payload specified"));for(;this._pos<this.packet.length;){let c=this._list.readUInt8(this._pos++);if(this.settings.protocolVersion===5){if(!n.MQTT5_SUBACK_CODES[c])return this._emitError(new Error("Invalid suback code"))}else if(c>2&&c!==128)return this._emitError(new Error("Invalid suback QoS, must be 0, 1, 2 or 128"));this.packet.granted.push(c)}}}_parseUnsubscribe(){r("_parseUnsubscribe");let a=this.packet;if(a.unsubscriptions=[],!!this._parseMessageId()){if(this.settings.protocolVersion===5){let c=this._parseProperties();Object.getOwnPropertyNames(c).length&&(a.properties=c)}if(a.length<=0)return this._emitError(new Error("Malformed unsubscribe, no payload specified"));for(;this._pos<a.length;){let c=this._parseString();if(c===null)return this._emitError(new Error("Cannot parse topic"));r("_parseUnsubscribe: push topic `%s` to unsubscriptions",c),a.unsubscriptions.push(c)}}}_parseUnsuback(){r("_parseUnsuback");let a=this.packet;if(!this._parseMessageId())return this._emitError(new Error("Cannot parse messageId"));if((this.settings.protocolVersion===3||this.settings.protocolVersion===4)&&a.length!==2)return this._emitError(new Error("Malformed unsuback, payload length must be 2"));if(a.length<=0)return this._emitError(new Error("Malformed unsuback, no payload specified"));if(this.settings.protocolVersion===5){let c=this._parseProperties();for(Object.getOwnPropertyNames(c).length&&(a.properties=c),a.granted=[];this._pos<this.packet.length;){let d=this._list.readUInt8(this._pos++);if(!n.MQTT5_UNSUBACK_CODES[d])return this._emitError(new Error("Invalid unsuback code"));this.packet.granted.push(d)}}}_parseConfirmation(){r("_parseConfirmation: packet.cmd: `%s`",this.packet.cmd);let a=this.packet;if(this._parseMessageId(),this.settings.protocolVersion===5){if(a.length>2){switch(a.reasonCode=this._parseByte(),this.packet.cmd){case"puback":case"pubrec":if(!n.MQTT5_PUBACK_PUBREC_CODES[a.reasonCode])return this._emitError(new Error("Invalid "+this.packet.cmd+" reason code"));break;case"pubrel":case"pubcomp":if(!n.MQTT5_PUBREL_PUBCOMP_CODES[a.reasonCode])return this._emitError(new Error("Invalid "+this.packet.cmd+" reason code"));break}r("_parseConfirmation: packet.reasonCode `%d`",a.reasonCode)}else a.reasonCode=0;if(a.length>3){let c=this._parseProperties();Object.getOwnPropertyNames(c).length&&(a.properties=c)}}return!0}_parseDisconnect(){let a=this.packet;if(r("_parseDisconnect"),this.settings.protocolVersion===5){this._list.length>0?(a.reasonCode=this._parseByte(),n.MQTT5_DISCONNECT_CODES[a.reasonCode]||this._emitError(new Error("Invalid disconnect reason code"))):a.reasonCode=0;let c=this._parseProperties();Object.getOwnPropertyNames(c).length&&(a.properties=c)}return r("_parseDisconnect result: true"),!0}_parseAuth(){r("_parseAuth");let a=this.packet;if(this.settings.protocolVersion!==5)return this._emitError(new Error("Not supported auth packet for this version MQTT"));if(a.reasonCode=this._parseByte(),!n.MQTT5_AUTH_CODES[a.reasonCode])return this._emitError(new Error("Invalid auth reason code"));let c=this._parseProperties();return Object.getOwnPropertyNames(c).length&&(a.properties=c),r("_parseAuth: result: true"),!0}_parseMessageId(){let a=this.packet;return a.messageId=this._parseNum(),a.messageId===null?(this._emitError(new Error("Cannot parse messageId")),!1):(r("_parseMessageId: packet.messageId %d",a.messageId),!0)}_parseString(a){let c=this._parseNum(),d=c+this._pos;if(c===-1||d>this._list.length||d>this.packet.length)return null;let b=this._list.toString("utf8",this._pos,d);return this._pos+=c,r("_parseString: result: %s",b),b}_parseStringPair(){return r("_parseStringPair"),{name:this._parseString(),value:this._parseString()}}_parseBuffer(){let a=this._parseNum(),c=a+this._pos;if(a===-1||c>this._list.length||c>this.packet.length)return null;let d=this._list.slice(this._pos,c);return this._pos+=a,r("_parseBuffer: result: %o",d),d}_parseNum(){if(this._list.length-this._pos<2)return-1;let a=this._list.readUInt16BE(this._pos);return this._pos+=2,r("_parseNum: result: %s",a),a}_parse4ByteNum(){if(this._list.length-this._pos<4)return-1;let a=this._list.readUInt32BE(this._pos);return this._pos+=4,r("_parse4ByteNum: result: %s",a),a}_parseVarByteNum(a){r("_parseVarByteNum");let c=4,d=0,b=1,y=0,g=!1,m,w=this._pos?this._pos:0;for(;d<c&&w+d<this._list.length;){if(m=this._list.readUInt8(w+d++),y+=b*(m&n.VARBYTEINT_MASK),b*=128,!(m&n.VARBYTEINT_FIN_MASK)){g=!0;break}if(this._list.length<=d)break}return!g&&d===c&&this._list.length>=d&&this._emitError(new Error("Invalid variable byte integer")),w&&(this._pos+=d),g?a?g={bytes:d,value:y}:g=y:g=!1,r("_parseVarByteNum: result: %o",g),g}_parseByte(){let a;return this._pos<this._list.length&&(a=this._list.readUInt8(this._pos),this._pos++),r("_parseByte: result: %o",a),a}_parseByType(a){switch(r("_parseByType: type: %s",a),a){case"byte":return this._parseByte()!==0;case"int8":return this._parseByte();case"int16":return this._parseNum();case"int32":return this._parse4ByteNum();case"var":return this._parseVarByteNum();case"string":return this._parseString();case"pair":return this._parseStringPair();case"binary":return this._parseBuffer()}}_parseProperties(){r("_parseProperties");let a=this._parseVarByteNum(),c=this._pos+a,d={};for(;this._pos<c;){let b=this._parseByte();if(!b)return this._emitError(new Error("Cannot parse property code type")),!1;let y=n.propertiesCodes[b];if(!y)return this._emitError(new Error("Unknown property")),!1;if(y==="userProperties"){d[y]||(d[y]=Object.create(null));let g=this._parseByType(n.propertiesTypes[y]);if(d[y][g.name])if(Array.isArray(d[y][g.name]))d[y][g.name].push(g.value);else{let m=d[y][g.name];d[y][g.name]=[m],d[y][g.name].push(g.value)}else d[y][g.name]=g.value;continue}d[y]?Array.isArray(d[y])?d[y].push(this._parseByType(n.propertiesTypes[y])):(d[y]=[d[y]],d[y].push(this._parseByType(n.propertiesTypes[y]))):d[y]=this._parseByType(n.propertiesTypes[y])}return d}_newPacket(){return r("_newPacket"),this.packet&&(this._list.consume(this.packet.length),r("_newPacket: parser emit packet: packet.cmd: %s, packet.payload: %s, packet.length: %d",this.packet.cmd,this.packet.payload,this.packet.length),this.emit("packet",this.packet)),r("_newPacket: new packet"),this.packet=new h,this._pos=0,!0}_emitError(a){r("_emitError",a),this.error=a,this.emit("error",a)}};o.exports=s}),Ua=he((e,o)=>{ie(),re(),te();var{Buffer:t}=(Ne(),Ie(Le)),l=65536,h={},n=t.isBuffer(t.from([1,2]).subarray(0,1));function r(c){let d=t.allocUnsafe(2);return d.writeUInt8(c>>8,0),d.writeUInt8(c&255,1),d}function s(){for(let c=0;c<l;c++)h[c]=r(c)}function i(c){let d=0,b=0,y=t.allocUnsafe(4);do d=c%128|0,c=c/128|0,c>0&&(d=d|128),y.writeUInt8(d,b++);while(c>0&&b<4);return c>0&&(b=0),n?y.subarray(0,b):y.slice(0,b)}function a(c){let d=t.allocUnsafe(4);return d.writeUInt32BE(c,0),d}o.exports={cache:h,generateCache:s,generateNumber:r,genBufVariableByteInt:i,generate4ByteBuffer:a}}),La=he((e,o)=>{ie(),re(),te(),typeof Te>"u"||!Te.version||Te.version.indexOf("v0.")===0||Te.version.indexOf("v1.")===0&&Te.version.indexOf("v1.8.")!==0?o.exports={nextTick:t}:o.exports=Te;function t(l,h,n,r){if(typeof l!="function")throw new TypeError('"callback" argument must be a function');var s=arguments.length,i,a;switch(s){case 0:case 1:return Te.nextTick(l);case 2:return Te.nextTick(function(){l.call(null,h)});case 3:return Te.nextTick(function(){l.call(null,h,n)});case 4:return Te.nextTick(function(){l.call(null,h,n,r)});default:for(i=new Array(s-1),a=0;a<i.length;)i[a++]=arguments[a];return Te.nextTick(function(){l.apply(null,i)})}}}),Vo=he((e,o)=>{ie(),re(),te();var t=qo(),{Buffer:l}=(Ne(),Ie(Le)),h=l.allocUnsafe(0),n=l.from([0]),r=Ua(),s=La().nextTick,i=ht()("mqtt-packet:writeToStream"),a=r.cache,c=r.generateNumber,d=r.generateCache,b=r.genBufVariableByteInt,y=r.generate4ByteBuffer,g=G,m=!0;function w(B,A,$){switch(i("generate called"),A.cork&&(A.cork(),s(S,A)),m&&(m=!1,d()),i("generate: packet.cmd: %s",B.cmd),B.cmd){case"connect":return v(B,A);case"connack":return _(B,A,$);case"publish":return x(B,A,$);case"puback":case"pubrec":case"pubrel":case"pubcomp":return M(B,A,$);case"subscribe":return k(B,A,$);case"suback":return O(B,A,$);case"unsubscribe":return P(B,A,$);case"unsuback":return W(B,A,$);case"pingreq":case"pingresp":return z(B,A);case"disconnect":return ee(B,A,$);case"auth":return T(B,A,$);default:return A.destroy(new Error("Unknown command")),!1}}Object.defineProperty(w,"cacheNumbers",{get(){return g===G},set(B){B?((!a||Object.keys(a).length===0)&&(m=!0),g=G):(m=!1,g=D)}});function S(B){B.uncork()}function v(B,A,$){let ae=B||{},J=ae.protocolId||"MQTT",Q=ae.protocolVersion||4,ce=ae.will,ne=ae.clean,R=ae.keepalive||0,L=ae.clientId||"",N=ae.username,X=ae.password,Y=ae.properties;ne===void 0&&(ne=!0);let U=0;if(!J||typeof J!="string"&&!l.isBuffer(J))return A.destroy(new Error("Invalid protocolId")),!1;if(U+=J.length+2,Q!==3&&Q!==4&&Q!==5)return A.destroy(new Error("Invalid protocol version")),!1;if(U+=1,(typeof L=="string"||l.isBuffer(L))&&(L||Q>=4)&&(L||ne))U+=l.byteLength(L)+2;else{if(Q<4)return A.destroy(new Error("clientId must be supplied before 3.1.1")),!1;if(ne*1===0)return A.destroy(new Error("clientId must be given if cleanSession set to 0")),!1}if(typeof R!="number"||R<0||R>65535||R%1!==0)return A.destroy(new Error("Invalid keepalive")),!1;U+=2,U+=1;let q,fe;if(Q===5){if(q=ge(A,Y),!q)return!1;U+=q.length}if(ce){if(typeof ce!="object")return A.destroy(new Error("Invalid will")),!1;if(!ce.topic||typeof ce.topic!="string")return A.destroy(new Error("Invalid will topic")),!1;if(U+=l.byteLength(ce.topic)+2,U+=2,ce.payload)if(ce.payload.length>=0)typeof ce.payload=="string"?U+=l.byteLength(ce.payload):U+=ce.payload.length;else return A.destroy(new Error("Invalid will payload")),!1;if(fe={},Q===5){if(fe=ge(A,ce.properties),!fe)return!1;U+=fe.length}}let ye=!1;if(N!=null)if(ue(N))ye=!0,U+=l.byteLength(N)+2;else return A.destroy(new Error("Invalid username")),!1;if(X!=null){if(!ye)return A.destroy(new Error("Username is required to use password")),!1;if(ue(X))U+=be(X)+2;else return A.destroy(new Error("Invalid password")),!1}A.write(t.CONNECT_HEADER),H(A,U),Z(A,J),ae.bridgeMode&&(Q+=128),A.write(Q===131?t.VERSION131:Q===132?t.VERSION132:Q===4?t.VERSION4:Q===5?t.VERSION5:t.VERSION3);let me=0;return me|=N!=null?t.USERNAME_MASK:0,me|=X!=null?t.PASSWORD_MASK:0,me|=ce&&ce.retain?t.WILL_RETAIN_MASK:0,me|=ce&&ce.qos?ce.qos<<t.WILL_QOS_SHIFT:0,me|=ce?t.WILL_FLAG_MASK:0,me|=ne?t.CLEAN_SESSION_MASK:0,A.write(l.from([me])),g(A,R),Q===5&&q.write(),Z(A,L),ce&&(Q===5&&fe.write(),V(A,ce.topic),Z(A,ce.payload)),N!=null&&Z(A,N),X!=null&&Z(A,X),!0}function _(B,A,$){let ae=$?$.protocolVersion:4,J=B||{},Q=ae===5?J.reasonCode:J.returnCode,ce=J.properties,ne=2;if(typeof Q!="number")return A.destroy(new Error("Invalid return code")),!1;let R=null;if(ae===5){if(R=ge(A,ce),!R)return!1;ne+=R.length}return A.write(t.CONNACK_HEADER),H(A,ne),A.write(J.sessionPresent?t.SESSIONPRESENT_HEADER:n),A.write(l.from([Q])),R?.write(),!0}function x(B,A,$){i("publish: packet: %o",B);let ae=$?$.protocolVersion:4,J=B||{},Q=J.qos||0,ce=J.retain?t.RETAIN_MASK:0,ne=J.topic,R=J.payload||h,L=J.messageId,N=J.properties,X=0;if(typeof ne=="string")X+=l.byteLength(ne)+2;else if(l.isBuffer(ne))X+=ne.length+2;else return A.destroy(new Error("Invalid topic")),!1;if(l.isBuffer(R)?X+=R.length:X+=l.byteLength(R),Q&&typeof L!="number")return A.destroy(new Error("Invalid messageId")),!1;Q&&(X+=2);let Y=null;if(ae===5){if(Y=ge(A,N),!Y)return!1;X+=Y.length}return A.write(t.PUBLISH_HEADER[Q][J.dup?1:0][ce?1:0]),H(A,X),g(A,be(ne)),A.write(ne),Q>0&&g(A,L),Y?.write(),i("publish: payload: %o",R),A.write(R)}function M(B,A,$){let ae=$?$.protocolVersion:4,J=B||{},Q=J.cmd||"puback",ce=J.messageId,ne=J.dup&&Q==="pubrel"?t.DUP_MASK:0,R=0,L=J.reasonCode,N=J.properties,X=ae===5?3:2;if(Q==="pubrel"&&(R=1),typeof ce!="number")return A.destroy(new Error("Invalid messageId")),!1;let Y=null;if(ae===5&&typeof N=="object"){if(Y=I(A,N,$,X),!Y)return!1;X+=Y.length}return A.write(t.ACKS[Q][R][ne][0]),X===3&&(X+=L!==0?1:-1),H(A,X),g(A,ce),ae===5&&X!==2&&A.write(l.from([L])),Y!==null?Y.write():X===4&&A.write(l.from([0])),!0}function k(B,A,$){i("subscribe: packet: ");let ae=$?$.protocolVersion:4,J=B||{},Q=J.dup?t.DUP_MASK:0,ce=J.messageId,ne=J.subscriptions,R=J.properties,L=0;if(typeof ce!="number")return A.destroy(new Error("Invalid messageId")),!1;L+=2;let N=null;if(ae===5){if(N=ge(A,R),!N)return!1;L+=N.length}if(typeof ne=="object"&&ne.length)for(let Y=0;Y<ne.length;Y+=1){let U=ne[Y].topic,q=ne[Y].qos;if(typeof U!="string")return A.destroy(new Error("Invalid subscriptions - invalid topic")),!1;if(typeof q!="number")return A.destroy(new Error("Invalid subscriptions - invalid qos")),!1;if(ae===5){if(typeof(ne[Y].nl||!1)!="boolean")return A.destroy(new Error("Invalid subscriptions - invalid No Local")),!1;if(typeof(ne[Y].rap||!1)!="boolean")return A.destroy(new Error("Invalid subscriptions - invalid Retain as Published")),!1;let fe=ne[Y].rh||0;if(typeof fe!="number"||fe>2)return A.destroy(new Error("Invalid subscriptions - invalid Retain Handling")),!1}L+=l.byteLength(U)+2+1}else return A.destroy(new Error("Invalid subscriptions")),!1;i("subscribe: writing to stream: %o",t.SUBSCRIBE_HEADER),A.write(t.SUBSCRIBE_HEADER[1][Q?1:0][0]),H(A,L),g(A,ce),N!==null&&N.write();let X=!0;for(let Y of ne){let U=Y.topic,q=Y.qos,fe=+Y.nl,ye=+Y.rap,me=Y.rh,ve;V(A,U),ve=t.SUBSCRIBE_OPTIONS_QOS[q],ae===5&&(ve|=fe?t.SUBSCRIBE_OPTIONS_NL:0,ve|=ye?t.SUBSCRIBE_OPTIONS_RAP:0,ve|=me?t.SUBSCRIBE_OPTIONS_RH[me]:0),X=A.write(l.from([ve]))}return X}function O(B,A,$){let ae=$?$.protocolVersion:4,J=B||{},Q=J.messageId,ce=J.granted,ne=J.properties,R=0;if(typeof Q!="number")return A.destroy(new Error("Invalid messageId")),!1;if(R+=2,typeof ce=="object"&&ce.length)for(let N=0;N<ce.length;N+=1){if(typeof ce[N]!="number")return A.destroy(new Error("Invalid qos vector")),!1;R+=1}else return A.destroy(new Error("Invalid qos vector")),!1;let L=null;if(ae===5){if(L=I(A,ne,$,R),!L)return!1;R+=L.length}return A.write(t.SUBACK_HEADER),H(A,R),g(A,Q),L!==null&&L.write(),A.write(l.from(ce))}function P(B,A,$){let ae=$?$.protocolVersion:4,J=B||{},Q=J.messageId,ce=J.dup?t.DUP_MASK:0,ne=J.unsubscriptions,R=J.properties,L=0;if(typeof Q!="number")return A.destroy(new Error("Invalid messageId")),!1;if(L+=2,typeof ne=="object"&&ne.length)for(let Y=0;Y<ne.length;Y+=1){if(typeof ne[Y]!="string")return A.destroy(new Error("Invalid unsubscriptions")),!1;L+=l.byteLength(ne[Y])+2}else return A.destroy(new Error("Invalid unsubscriptions")),!1;let N=null;if(ae===5){if(N=ge(A,R),!N)return!1;L+=N.length}A.write(t.UNSUBSCRIBE_HEADER[1][ce?1:0][0]),H(A,L),g(A,Q),N!==null&&N.write();let X=!0;for(let Y=0;Y<ne.length;Y++)X=V(A,ne[Y]);return X}function W(B,A,$){let ae=$?$.protocolVersion:4,J=B||{},Q=J.messageId,ce=J.dup?t.DUP_MASK:0,ne=J.granted,R=J.properties,L=J.cmd,N=0,X=2;if(typeof Q!="number")return A.destroy(new Error("Invalid messageId")),!1;if(ae===5)if(typeof ne=="object"&&ne.length)for(let U=0;U<ne.length;U+=1){if(typeof ne[U]!="number")return A.destroy(new Error("Invalid qos vector")),!1;X+=1}else return A.destroy(new Error("Invalid qos vector")),!1;let Y=null;if(ae===5){if(Y=I(A,R,$,X),!Y)return!1;X+=Y.length}return A.write(t.ACKS[L][N][ce][0]),H(A,X),g(A,Q),Y!==null&&Y.write(),ae===5&&A.write(l.from(ne)),!0}function z(B,A,$){return A.write(t.EMPTY[B.cmd])}function ee(B,A,$){let ae=$?$.protocolVersion:4,J=B||{},Q=J.reasonCode,ce=J.properties,ne=ae===5?1:0,R=null;if(ae===5){if(R=I(A,ce,$,ne),!R)return!1;ne+=R.length}return A.write(l.from([t.codes.disconnect<<4])),H(A,ne),ae===5&&A.write(l.from([Q])),R!==null&&R.write(),!0}function T(B,A,$){let ae=$?$.protocolVersion:4,J=B||{},Q=J.reasonCode,ce=J.properties,ne=ae===5?1:0;ae!==5&&A.destroy(new Error("Invalid mqtt version for auth packet"));let R=I(A,ce,$,ne);return R?(ne+=R.length,A.write(l.from([t.codes.auth<<4])),H(A,ne),A.write(l.from([Q])),R!==null&&R.write(),!0):!1}var F={};function H(B,A){if(A>t.VARBYTEINT_MAX)return B.destroy(new Error(`Invalid variable byte integer: ${A}`)),!1;let $=F[A];return $||($=b(A),A<16384&&(F[A]=$)),i("writeVarByteInt: writing to stream: %o",$),B.write($)}function V(B,A){let $=l.byteLength(A);return g(B,$),i("writeString: %s",A),B.write(A,"utf8")}function le(B,A,$){V(B,A),V(B,$)}function G(B,A){return i("writeNumberCached: number: %d",A),i("writeNumberCached: %o",a[A]),B.write(a[A])}function D(B,A){let $=c(A);return i("writeNumberGenerated: %o",$),B.write($)}function de(B,A){let $=y(A);return i("write4ByteNumber: %o",$),B.write($)}function Z(B,A){typeof A=="string"?V(B,A):A?(g(B,A.length),B.write(A)):g(B,0)}function ge(B,A){if(typeof A!="object"||A.length!=null)return{length:1,write(){pe(B,{},0)}};let $=0;function ae(J,Q){let ce=t.propertiesTypes[J],ne=0;switch(ce){case"byte":{if(typeof Q!="boolean")return B.destroy(new Error(`Invalid ${J}: ${Q}`)),!1;ne+=2;break}case"int8":{if(typeof Q!="number"||Q<0||Q>255)return B.destroy(new Error(`Invalid ${J}: ${Q}`)),!1;ne+=2;break}case"binary":{if(Q&&Q===null)return B.destroy(new Error(`Invalid ${J}: ${Q}`)),!1;ne+=1+l.byteLength(Q)+2;break}case"int16":{if(typeof Q!="number"||Q<0||Q>65535)return B.destroy(new Error(`Invalid ${J}: ${Q}`)),!1;ne+=3;break}case"int32":{if(typeof Q!="number"||Q<0||Q>4294967295)return B.destroy(new Error(`Invalid ${J}: ${Q}`)),!1;ne+=5;break}case"var":{if(typeof Q!="number"||Q<0||Q>268435455)return B.destroy(new Error(`Invalid ${J}: ${Q}`)),!1;ne+=1+l.byteLength(b(Q));break}case"string":{if(typeof Q!="string")return B.destroy(new Error(`Invalid ${J}: ${Q}`)),!1;ne+=3+l.byteLength(Q.toString());break}case"pair":{if(typeof Q!="object")return B.destroy(new Error(`Invalid ${J}: ${Q}`)),!1;ne+=Object.getOwnPropertyNames(Q).reduce((R,L)=>{let N=Q[L];return Array.isArray(N)?R+=N.reduce((X,Y)=>(X+=3+l.byteLength(L.toString())+2+l.byteLength(Y.toString()),X),0):R+=3+l.byteLength(L.toString())+2+l.byteLength(Q[L].toString()),R},0);break}default:return B.destroy(new Error(`Invalid property ${J}: ${Q}`)),!1}return ne}if(A)for(let J in A){let Q=0,ce=0,ne=A[J];if(Array.isArray(ne))for(let R=0;R<ne.length;R++){if(ce=ae(J,ne[R]),!ce)return!1;Q+=ce}else{if(ce=ae(J,ne),!ce)return!1;Q=ce}if(!Q)return!1;$+=Q}return{length:l.byteLength(b($))+$,write(){pe(B,A,$)}}}function I(B,A,$,ae){let J=["reasonString","userProperties"],Q=$&&$.properties&&$.properties.maximumPacketSize?$.properties.maximumPacketSize:0,ce=ge(B,A);if(Q)for(;ae+ce.length>Q;){let ne=J.shift();if(ne&&A[ne])delete A[ne],ce=ge(B,A);else return!1}return ce}function K(B,A,$){switch(t.propertiesTypes[A]){case"byte":{B.write(l.from([t.properties[A]])),B.write(l.from([+$]));break}case"int8":{B.write(l.from([t.properties[A]])),B.write(l.from([$]));break}case"binary":{B.write(l.from([t.properties[A]])),Z(B,$);break}case"int16":{B.write(l.from([t.properties[A]])),g(B,$);break}case"int32":{B.write(l.from([t.properties[A]])),de(B,$);break}case"var":{B.write(l.from([t.properties[A]])),H(B,$);break}case"string":{B.write(l.from([t.properties[A]])),V(B,$);break}case"pair":{Object.getOwnPropertyNames($).forEach(ae=>{let J=$[ae];Array.isArray(J)?J.forEach(Q=>{B.write(l.from([t.properties[A]])),le(B,ae.toString(),Q.toString())}):(B.write(l.from([t.properties[A]])),le(B,ae.toString(),J.toString()))});break}default:return B.destroy(new Error(`Invalid property ${A} value: ${$}`)),!1}}function pe(B,A,$){H(B,$);for(let ae in A)if(Object.prototype.hasOwnProperty.call(A,ae)&&A[ae]!==null){let J=A[ae];if(Array.isArray(J))for(let Q=0;Q<J.length;Q++)K(B,ae,J[Q]);else K(B,ae,J)}}function be(B){return B?B instanceof l?B.length:l.byteLength(B):0}function ue(B){return typeof B=="string"||B instanceof l}o.exports=w}),Na=he((e,o)=>{ie(),re(),te();var t=Vo(),{EventEmitter:l}=(Dt(),Ie(xt)),{Buffer:h}=(Ne(),Ie(Le));function n(s,i){let a=new r;return t(s,a,i),a.concat()}var r=class extends l{constructor(){super(),this._array=new Array(20),this._i=0}write(s){return this._array[this._i++]=s,!0}concat(){let s=0,i=new Array(this._array.length),a=this._array,c=0,d;for(d=0;d<a.length&&a[d]!==void 0;d++)typeof a[d]!="string"?i[d]=a[d].length:i[d]=h.byteLength(a[d]),s+=i[d];let b=h.allocUnsafe(s);for(d=0;d<a.length&&a[d]!==void 0;d++)typeof a[d]!="string"?(a[d].copy(b,c),c+=i[d]):(b.write(a[d],c),c+=i[d]);return b}destroy(s){s&&this.emit("error",s)}};o.exports=n}),ja=he(e=>{ie(),re(),te(),e.parser=Ma().parser,e.generate=Na(),e.writeToStream=Vo()}),Ho=he(e=>{ie(),re(),te(),Object.defineProperty(e,"__esModule",{value:!0});var o=class{constructor(){this.nextId=Math.max(1,Math.floor(Math.random()*65535))}allocate(){let t=this.nextId++;return this.nextId===65536&&(this.nextId=1),t}getLastAllocated(){return this.nextId===1?65535:this.nextId-1}register(t){return!0}deallocate(t){}clear(){}};e.default=o}),Da=he((e,o)=>{ie(),re(),te(),o.exports=l;function t(n){return n instanceof lr?lr.from(n):new n.constructor(n.buffer.slice(),n.byteOffset,n.length)}function l(n){if(n=n||{},n.circles)return h(n);return n.proto?i:s;function r(a,c){for(var d=Object.keys(a),b=new Array(d.length),y=0;y<d.length;y++){var g=d[y],m=a[g];typeof m!="object"||m===null?b[g]=m:m instanceof Date?b[g]=new Date(m):ArrayBuffer.isView(m)?b[g]=t(m):b[g]=c(m)}return b}function s(a){if(typeof a!="object"||a===null)return a;if(a instanceof Date)return new Date(a);if(Array.isArray(a))return r(a,s);if(a instanceof Map)return new Map(r(Array.from(a),s));if(a instanceof Set)return new Set(r(Array.from(a),s));var c={};for(var d in a)if(Object.hasOwnProperty.call(a,d)!==!1){var b=a[d];typeof b!="object"||b===null?c[d]=b:b instanceof Date?c[d]=new Date(b):b instanceof Map?c[d]=new Map(r(Array.from(b),s)):b instanceof Set?c[d]=new Set(r(Array.from(b),s)):ArrayBuffer.isView(b)?c[d]=t(b):c[d]=s(b)}return c}function i(a){if(typeof a!="object"||a===null)return a;if(a instanceof Date)return new Date(a);if(Array.isArray(a))return r(a,i);if(a instanceof Map)return new Map(r(Array.from(a),i));if(a instanceof Set)return new Set(r(Array.from(a),i));var c={};for(var d in a){var b=a[d];typeof b!="object"||b===null?c[d]=b:b instanceof Date?c[d]=new Date(b):b instanceof Map?c[d]=new Map(r(Array.from(b),i)):b instanceof Set?c[d]=new Set(r(Array.from(b),i)):ArrayBuffer.isView(b)?c[d]=t(b):c[d]=i(b)}return c}}function h(n){var r=[],s=[];return n.proto?c:a;function i(d,b){for(var y=Object.keys(d),g=new Array(y.length),m=0;m<y.length;m++){var w=y[m],S=d[w];if(typeof S!="object"||S===null)g[w]=S;else if(S instanceof Date)g[w]=new Date(S);else if(ArrayBuffer.isView(S))g[w]=t(S);else{var v=r.indexOf(S);v!==-1?g[w]=s[v]:g[w]=b(S)}}return g}function a(d){if(typeof d!="object"||d===null)return d;if(d instanceof Date)return new Date(d);if(Array.isArray(d))return i(d,a);if(d instanceof Map)return new Map(i(Array.from(d),a));if(d instanceof Set)return new Set(i(Array.from(d),a));var b={};r.push(d),s.push(b);for(var y in d)if(Object.hasOwnProperty.call(d,y)!==!1){var g=d[y];if(typeof g!="object"||g===null)b[y]=g;else if(g instanceof Date)b[y]=new Date(g);else if(g instanceof Map)b[y]=new Map(i(Array.from(g),a));else if(g instanceof Set)b[y]=new Set(i(Array.from(g),a));else if(ArrayBuffer.isView(g))b[y]=t(g);else{var m=r.indexOf(g);m!==-1?b[y]=s[m]:b[y]=a(g)}}return r.pop(),s.pop(),b}function c(d){if(typeof d!="object"||d===null)return d;if(d instanceof Date)return new Date(d);if(Array.isArray(d))return i(d,c);if(d instanceof Map)return new Map(i(Array.from(d),c));if(d instanceof Set)return new Set(i(Array.from(d),c));var b={};r.push(d),s.push(b);for(var y in d){var g=d[y];if(typeof g!="object"||g===null)b[y]=g;else if(g instanceof Date)b[y]=new Date(g);else if(g instanceof Map)b[y]=new Map(i(Array.from(g),c));else if(g instanceof Set)b[y]=new Set(i(Array.from(g),c));else if(ArrayBuffer.isView(g))b[y]=t(g);else{var m=r.indexOf(g);m!==-1?b[y]=s[m]:b[y]=c(g)}}return r.pop(),s.pop(),b}}}),Fa=he((e,o)=>{ie(),re(),te(),o.exports=Da()()}),Wa=he(e=>{ie(),re(),te(),Object.defineProperty(e,"__esModule",{value:!0}),e.validateTopics=e.validateTopic=void 0;function o(l){let h=l.split("/");for(let n=0;n<h.length;n++)if(h[n]!=="+"){if(h[n]==="#")return n===h.length-1;if(h[n].indexOf("+")!==-1||h[n].indexOf("#")!==-1)return!1}return!0}e.validateTopic=o;function t(l){if(l.length===0)return"empty_topic_list";for(let h=0;h<l.length;h++)if(!o(l[h]))return l[h];return null}e.validateTopics=t}),zo=he(e=>{ie(),re(),te(),Object.defineProperty(e,"__esModule",{value:!0});var o=Mt(),t={objectMode:!0},l={clean:!0},h=class{constructor(n){this.options=n||{},this.options=Object.assign(Object.assign({},l),n),this._inflights=new Map}put(n,r){return this._inflights.set(n.messageId,n),r&&r(),this}createStream(){let n=new o.Readable(t),r=[],s=!1,i=0;return this._inflights.forEach((a,c)=>{r.push(a)}),n._read=()=>{!s&&i<r.length?n.push(r[i++]):n.push(null)},n.destroy=a=>{if(!s)return s=!0,setTimeout(()=>{n.emit("close")},0),n},n}del(n,r){let s=this._inflights.get(n.messageId);return s?(this._inflights.delete(n.messageId),r(null,s)):r&&r(new Error("missing packet")),this}get(n,r){let s=this._inflights.get(n.messageId);return s?r(null,s):r&&r(new Error("missing packet")),this}close(n){this.options.clean&&(this._inflights=null),n&&n()}};e.default=h}),$a=he(e=>{ie(),re(),te(),Object.defineProperty(e,"__esModule",{value:!0});var o=[0,16,128,131,135,144,145,151,153],t=(l,h,n)=>{l.log("handlePublish: packet %o",h),n=typeof n<"u"?n:l.noop;let r=h.topic.toString(),s=h.payload,{qos:i}=h,{messageId:a}=h,{options:c}=l;if(l.options.protocolVersion===5){let d;if(h.properties&&(d=h.properties.topicAlias),typeof d<"u")if(r.length===0)if(d>0&&d<=65535){let b=l.topicAliasRecv.getTopicByAlias(d);if(b)r=b,l.log("handlePublish :: topic complemented by alias. topic: %s - alias: %d",r,d);else{l.log("handlePublish :: unregistered topic alias. alias: %d",d),l.emit("error",new Error("Received unregistered Topic Alias"));return}}else{l.log("handlePublish :: topic alias out of range. alias: %d",d),l.emit("error",new Error("Received Topic Alias is out of range"));return}else if(l.topicAliasRecv.put(r,d))l.log("handlePublish :: registered topic: %s - alias: %d",r,d);else{l.log("handlePublish :: topic alias out of range. alias: %d",d),l.emit("error",new Error("Received Topic Alias is out of range"));return}}switch(l.log("handlePublish: qos %d",i),i){case 2:{c.customHandleAcks(r,s,h,(d,b)=>{if(typeof d=="number"&&(b=d,d=null),d)return l.emit("error",d);if(o.indexOf(b)===-1)return l.emit("error",new Error("Wrong reason code for pubrec"));b?l._sendPacket({cmd:"pubrec",messageId:a,reasonCode:b},n):l.incomingStore.put(h,()=>{l._sendPacket({cmd:"pubrec",messageId:a},n)})});break}case 1:{c.customHandleAcks(r,s,h,(d,b)=>{if(typeof d=="number"&&(b=d,d=null),d)return l.emit("error",d);if(o.indexOf(b)===-1)return l.emit("error",new Error("Wrong reason code for puback"));b||l.emit("message",r,s,h),l.handleMessage(h,y=>{if(y)return n&&n(y);l._sendPacket({cmd:"puback",messageId:a,reasonCode:b},n)})});break}case 0:l.emit("message",r,s,h),l.handleMessage(h,n);break;default:l.log("handlePublish: unknown QoS. Doing nothing.");break}};e.default=t}),qa=he((e,o)=>{o.exports={version:"5.5.5"}}),Gt=he(e=>{ie(),re(),te(),Object.defineProperty(e,"__esModule",{value:!0}),e.MQTTJS_VERSION=e.nextTick=e.applyMixin=e.ErrorWithReasonCode=void 0;var o=class Ko extends Error{constructor(h,n){super(h),this.code=n,Object.setPrototypeOf(this,Ko.prototype),Object.getPrototypeOf(this).name="ErrorWithReasonCode"}};e.ErrorWithReasonCode=o;function t(l,h,n=!1){var r;let s=[h];for(;;){let i=s[0],a=Object.getPrototypeOf(i);if(a?.prototype)s.unshift(a);else break}for(let i of s)for(let a of Object.getOwnPropertyNames(i.prototype))(n||a!=="constructor")&&Object.defineProperty(l.prototype,a,(r=Object.getOwnPropertyDescriptor(i.prototype,a))!==null&&r!==void 0?r:Object.create(null))}e.applyMixin=t,e.nextTick=typeof Te?.nextTick=="function"?Te.nextTick:l=>{setTimeout(l,0)},e.MQTTJS_VERSION=qa().version}),mr=he(e=>{ie(),re(),te(),Object.defineProperty(e,"__esModule",{value:!0}),e.ReasonCodes=void 0,e.ReasonCodes={0:"",1:"Unacceptable protocol version",2:"Identifier rejected",3:"Server unavailable",4:"Bad username or password",5:"Not authorized",16:"No matching subscribers",17:"No subscription existed",128:"Unspecified error",129:"Malformed Packet",130:"Protocol Error",131:"Implementation specific error",132:"Unsupported Protocol Version",133:"Client Identifier not valid",134:"Bad User Name or Password",135:"Not authorized",136:"Server unavailable",137:"Server busy",138:"Banned",139:"Server shutting down",140:"Bad authentication method",141:"Keep Alive timeout",142:"Session taken over",143:"Topic Filter invalid",144:"Topic Name invalid",145:"Packet identifier in use",146:"Packet Identifier not found",147:"Receive Maximum exceeded",148:"Topic Alias invalid",149:"Packet too large",150:"Message rate too high",151:"Quota exceeded",152:"Administrative action",153:"Payload format invalid",154:"Retain not supported",155:"QoS not supported",156:"Use another server",157:"Server moved",158:"Shared Subscriptions not supported",159:"Connection rate exceeded",160:"Maximum connect time",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"};var o=(t,l)=>{let{messageId:h}=l,n=l.cmd,r=null,s=t.outgoing[h]?t.outgoing[h].cb:null,i;if(!s){t.log("_handleAck :: Server sent an ack in error. Ignoring.");return}switch(t.log("_handleAck :: packet type",n),n){case"pubcomp":case"puback":{let a=l.reasonCode;a&&a>0&&a!==16?(i=new Error(`Publish error: ${e.ReasonCodes[a]}`),i.code=a,t._removeOutgoingAndStoreMessage(h,()=>{s(i,l)})):t._removeOutgoingAndStoreMessage(h,s);break}case"pubrec":{r={cmd:"pubrel",qos:2,messageId:h};let a=l.reasonCode;a&&a>0&&a!==16?(i=new Error(`Publish error: ${e.ReasonCodes[a]}`),i.code=a,t._removeOutgoingAndStoreMessage(h,()=>{s(i,l)})):t._sendPacket(r);break}case"suback":{delete t.outgoing[h],t.messageIdProvider.deallocate(h);let a=l.granted;for(let c=0;c<a.length;c++)if(a[c]&128){let d=t.messageIdToTopic[h];d&&d.forEach(b=>{delete t._resubscribeTopics[b]})}delete t.messageIdToTopic[h],t._invokeStoreProcessingQueue(),s(null,l);break}case"unsuback":{delete t.outgoing[h],t.messageIdProvider.deallocate(h),t._invokeStoreProcessingQueue(),s(null);break}default:t.emit("error",new Error("unrecognized packet type"))}t.disconnecting&&Object.keys(t.outgoing).length===0&&t.emit("outgoingEmpty")};e.default=o}),Va=he(e=>{ie(),re(),te(),Object.defineProperty(e,"__esModule",{value:!0});var o=Gt(),t=mr(),l=(h,n)=>{let{options:r}=h,s=r.protocolVersion,i=s===5?n.reasonCode:n.returnCode;if(s!==5){let a=new o.ErrorWithReasonCode(`Protocol error: Auth packets are only supported in MQTT 5. Your version:${s}`,i);h.emit("error",a);return}h.handleAuth(n,(a,c)=>{if(a){h.emit("error",a);return}if(i===24)h.reconnecting=!1,h._sendPacket(c);else{let d=new o.ErrorWithReasonCode(`Connection refused: ${t.ReasonCodes[i]}`,i);h.emit("error",d)}})};e.default=l}),Ha=he(e=>{ie(),re(),te(),Object.defineProperty(e,"__esModule",{value:!0}),e.LRUCache=void 0;var o=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,t=new Set,l=typeof Te=="object"&&Te?Te:{},h=(y,g,m,w)=>{typeof l.emitWarning=="function"?l.emitWarning(y,g,m,w):console.error(`[${m}] ${g}: ${y}`)},n=globalThis.AbortController,r=globalThis.AbortSignal;if(typeof n>"u"){r=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(m,w){this._onabort.push(w)}},n=class{constructor(){g()}signal=new r;abort(m){if(!this.signal.aborted){this.signal.reason=m,this.signal.aborted=!0;for(let w of this.signal._onabort)w(m);this.signal.onabort?.(m)}}};let y=l.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1",g=()=>{y&&(y=!1,h("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",g))}}var s=y=>!t.has(y),i=y=>y&&y===Math.floor(y)&&y>0&&isFinite(y),a=y=>i(y)?y<=Math.pow(2,8)?Uint8Array:y<=Math.pow(2,16)?Uint16Array:y<=Math.pow(2,32)?Uint32Array:y<=Number.MAX_SAFE_INTEGER?c:null:null,c=class extends Array{constructor(y){super(y),this.fill(0)}},d=class Kt{heap;length;static#l=!1;static create(g){let m=a(g);if(!m)return[];Kt.#l=!0;let w=new Kt(g,m);return Kt.#l=!1,w}constructor(g,m){if(!Kt.#l)throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new m(g),this.length=0}push(g){this.heap[this.length++]=g}pop(){return this.heap[--this.length]}},b=class Qo{#l;#c;#p;#g;#R;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#i;#b;#n;#r;#e;#u;#f;#a;#o;#m;#s;#E;#S;#y;#w;#I;#h;static unsafeExposeInternals(g){return{starts:g.#S,ttls:g.#y,sizes:g.#E,keyMap:g.#n,keyList:g.#r,valList:g.#e,next:g.#u,prev:g.#f,get head(){return g.#a},get tail(){return g.#o},free:g.#m,isBackgroundFetch:m=>g.#t(m),backgroundFetch:(m,w,S,v)=>g.#B(m,w,S,v),moveToTail:m=>g.#O(m),indexes:m=>g.#v(m),rindexes:m=>g.#_(m),isStale:m=>g.#d(m)}}get max(){return this.#l}get maxSize(){return this.#c}get calculatedSize(){return this.#b}get size(){return this.#i}get fetchMethod(){return this.#R}get dispose(){return this.#p}get disposeAfter(){return this.#g}constructor(g){let{max:m=0,ttl:w,ttlResolution:S=1,ttlAutopurge:v,updateAgeOnGet:_,updateAgeOnHas:x,allowStale:M,dispose:k,disposeAfter:O,noDisposeOnSet:P,noUpdateTTL:W,maxSize:z=0,maxEntrySize:ee=0,sizeCalculation:T,fetchMethod:F,noDeleteOnFetchRejection:H,noDeleteOnStaleGet:V,allowStaleOnFetchRejection:le,allowStaleOnFetchAbort:G,ignoreFetchAbort:D}=g;if(m!==0&&!i(m))throw new TypeError("max option must be a nonnegative integer");let de=m?a(m):Array;if(!de)throw new Error("invalid max value: "+m);if(this.#l=m,this.#c=z,this.maxEntrySize=ee||this.#c,this.sizeCalculation=T,this.sizeCalculation){if(!this.#c&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(F!==void 0&&typeof F!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.#R=F,this.#I=!!F,this.#n=new Map,this.#r=new Array(m).fill(void 0),this.#e=new Array(m).fill(void 0),this.#u=new de(m),this.#f=new de(m),this.#a=0,this.#o=0,this.#m=d.create(m),this.#i=0,this.#b=0,typeof k=="function"&&(this.#p=k),typeof O=="function"?(this.#g=O,this.#s=[]):(this.#g=void 0,this.#s=void 0),this.#w=!!this.#p,this.#h=!!this.#g,this.noDisposeOnSet=!!P,this.noUpdateTTL=!!W,this.noDeleteOnFetchRejection=!!H,this.allowStaleOnFetchRejection=!!le,this.allowStaleOnFetchAbort=!!G,this.ignoreFetchAbort=!!D,this.maxEntrySize!==0){if(this.#c!==0&&!i(this.#c))throw new TypeError("maxSize must be a positive integer if specified");if(!i(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.#j()}if(this.allowStale=!!M,this.noDeleteOnStaleGet=!!V,this.updateAgeOnGet=!!_,this.updateAgeOnHas=!!x,this.ttlResolution=i(S)||S===0?S:1,this.ttlAutopurge=!!v,this.ttl=w||0,this.ttl){if(!i(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.#x()}if(this.#l===0&&this.ttl===0&&this.#c===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#l&&!this.#c){let Z="LRU_CACHE_UNBOUNDED";s(Z)&&(t.add(Z),h("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",Z,Qo))}}getRemainingTTL(g){return this.#n.has(g)?1/0:0}#x(){let g=new c(this.#l),m=new c(this.#l);this.#y=g,this.#S=m,this.#M=(v,_,x=o.now())=>{if(m[v]=_!==0?x:0,g[v]=_,_!==0&&this.ttlAutopurge){let M=setTimeout(()=>{this.#d(v)&&this.delete(this.#r[v])},_+1);M.unref&&M.unref()}},this.#T=v=>{m[v]=g[v]!==0?o.now():0},this.#A=(v,_)=>{if(g[_]){let x=g[_],M=m[_];v.ttl=x,v.start=M,v.now=w||S();let k=v.now-M;v.remainingTTL=x-k}};let w=0,S=()=>{let v=o.now();if(this.ttlResolution>0){w=v;let _=setTimeout(()=>w=0,this.ttlResolution);_.unref&&_.unref()}return v};this.getRemainingTTL=v=>{let _=this.#n.get(v);if(_===void 0)return 0;let x=g[_],M=m[_];if(x===0||M===0)return 1/0;let k=(w||S())-M;return x-k},this.#d=v=>g[v]!==0&&m[v]!==0&&(w||S())-m[v]>g[v]}#T=()=>{};#A=()=>{};#M=()=>{};#d=()=>!1;#j(){let g=new c(this.#l);this.#b=0,this.#E=g,this.#k=m=>{this.#b-=g[m],g[m]=0},this.#U=(m,w,S,v)=>{if(this.#t(w))return 0;if(!i(S))if(v){if(typeof v!="function")throw new TypeError("sizeCalculation must be a function");if(S=v(w,m),!i(S))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return S},this.#C=(m,w,S)=>{if(g[m]=w,this.#c){let v=this.#c-g[m];for(;this.#b>v;)this.#P(!0)}this.#b+=g[m],S&&(S.entrySize=w,S.totalCalculatedSize=this.#b)}}#k=g=>{};#C=(g,m,w)=>{};#U=(g,m,w,S)=>{if(w||S)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#v({allowStale:g=this.allowStale}={}){if(this.#i)for(let m=this.#o;!(!this.#L(m)||((g||!this.#d(m))&&(yield m),m===this.#a));)m=this.#f[m]}*#_({allowStale:g=this.allowStale}={}){if(this.#i)for(let m=this.#a;!(!this.#L(m)||((g||!this.#d(m))&&(yield m),m===this.#o));)m=this.#u[m]}#L(g){return g!==void 0&&this.#n.get(this.#r[g])===g}*entries(){for(let g of this.#v())this.#e[g]!==void 0&&this.#r[g]!==void 0&&!this.#t(this.#e[g])&&(yield[this.#r[g],this.#e[g]])}*rentries(){for(let g of this.#_())this.#e[g]!==void 0&&this.#r[g]!==void 0&&!this.#t(this.#e[g])&&(yield[this.#r[g],this.#e[g]])}*keys(){for(let g of this.#v()){let m=this.#r[g];m!==void 0&&!this.#t(this.#e[g])&&(yield m)}}*rkeys(){for(let g of this.#_()){let m=this.#r[g];m!==void 0&&!this.#t(this.#e[g])&&(yield m)}}*values(){for(let g of this.#v())this.#e[g]!==void 0&&!this.#t(this.#e[g])&&(yield this.#e[g])}*rvalues(){for(let g of this.#_())this.#e[g]!==void 0&&!this.#t(this.#e[g])&&(yield this.#e[g])}[Symbol.iterator](){return this.entries()}find(g,m={}){for(let w of this.#v()){let S=this.#e[w],v=this.#t(S)?S.__staleWhileFetching:S;if(v!==void 0&&g(v,this.#r[w],this))return this.get(this.#r[w],m)}}forEach(g,m=this){for(let w of this.#v()){let S=this.#e[w],v=this.#t(S)?S.__staleWhileFetching:S;v!==void 0&&g.call(m,v,this.#r[w],this)}}rforEach(g,m=this){for(let w of this.#_()){let S=this.#e[w],v=this.#t(S)?S.__staleWhileFetching:S;v!==void 0&&g.call(m,v,this.#r[w],this)}}purgeStale(){let g=!1;for(let m of this.#_({allowStale:!0}))this.#d(m)&&(this.delete(this.#r[m]),g=!0);return g}dump(){let g=[];for(let m of this.#v({allowStale:!0})){let w=this.#r[m],S=this.#e[m],v=this.#t(S)?S.__staleWhileFetching:S;if(v===void 0||w===void 0)continue;let _={value:v};if(this.#y&&this.#S){_.ttl=this.#y[m];let x=o.now()-this.#S[m];_.start=Math.floor(Date.now()-x)}this.#E&&(_.size=this.#E[m]),g.unshift([w,_])}return g}load(g){this.clear();for(let[m,w]of g){if(w.start){let S=Date.now()-w.start;w.start=o.now()-S}this.set(m,w.value,w)}}set(g,m,w={}){if(m===void 0)return this.delete(g),this;let{ttl:S=this.ttl,start:v,noDisposeOnSet:_=this.noDisposeOnSet,sizeCalculation:x=this.sizeCalculation,status:M}=w,{noUpdateTTL:k=this.noUpdateTTL}=w,O=this.#U(g,m,w.size||0,x);if(this.maxEntrySize&&O>this.maxEntrySize)return M&&(M.set="miss",M.maxEntrySizeExceeded=!0),this.delete(g),this;let P=this.#i===0?void 0:this.#n.get(g);if(P===void 0)P=this.#i===0?this.#o:this.#m.length!==0?this.#m.pop():this.#i===this.#l?this.#P(!1):this.#i,this.#r[P]=g,this.#e[P]=m,this.#n.set(g,P),this.#u[this.#o]=P,this.#f[P]=this.#o,this.#o=P,this.#i++,this.#C(P,O,M),M&&(M.set="add"),k=!1;else{this.#O(P);let W=this.#e[P];if(m!==W){if(this.#I&&this.#t(W)){W.__abortController.abort(new Error("replaced"));let{__staleWhileFetching:z}=W;z!==void 0&&!_&&(this.#w&&this.#p?.(z,g,"set"),this.#h&&this.#s?.push([z,g,"set"]))}else _||(this.#w&&this.#p?.(W,g,"set"),this.#h&&this.#s?.push([W,g,"set"]));if(this.#k(P),this.#C(P,O,M),this.#e[P]=m,M){M.set="replace";let z=W&&this.#t(W)?W.__staleWhileFetching:W;z!==void 0&&(M.oldValue=z)}}else M&&(M.set="update")}if(S!==0&&!this.#y&&this.#x(),this.#y&&(k||this.#M(P,S,v),M&&this.#A(M,P)),!_&&this.#h&&this.#s){let W=this.#s,z;for(;z=W?.shift();)this.#g?.(...z)}return this}pop(){try{for(;this.#i;){let g=this.#e[this.#a];if(this.#P(!0),this.#t(g)){if(g.__staleWhileFetching)return g.__staleWhileFetching}else if(g!==void 0)return g}}finally{if(this.#h&&this.#s){let g=this.#s,m;for(;m=g?.shift();)this.#g?.(...m)}}}#P(g){let m=this.#a,w=this.#r[m],S=this.#e[m];return this.#I&&this.#t(S)?S.__abortController.abort(new Error("evicted")):(this.#w||this.#h)&&(this.#w&&this.#p?.(S,w,"evict"),this.#h&&this.#s?.push([S,w,"evict"])),this.#k(m),g&&(this.#r[m]=void 0,this.#e[m]=void 0,this.#m.push(m)),this.#i===1?(this.#a=this.#o=0,this.#m.length=0):this.#a=this.#u[m],this.#n.delete(w),this.#i--,m}has(g,m={}){let{updateAgeOnHas:w=this.updateAgeOnHas,status:S}=m,v=this.#n.get(g);if(v!==void 0){let _=this.#e[v];if(this.#t(_)&&_.__staleWhileFetching===void 0)return!1;if(this.#d(v))S&&(S.has="stale",this.#A(S,v));else return w&&this.#T(v),S&&(S.has="hit",this.#A(S,v)),!0}else S&&(S.has="miss");return!1}peek(g,m={}){let{allowStale:w=this.allowStale}=m,S=this.#n.get(g);if(S!==void 0&&(w||!this.#d(S))){let v=this.#e[S];return this.#t(v)?v.__staleWhileFetching:v}}#B(g,m,w,S){let v=m===void 0?void 0:this.#e[m];if(this.#t(v))return v;let _=new n,{signal:x}=w;x?.addEventListener("abort",()=>_.abort(x.reason),{signal:_.signal});let M={signal:_.signal,options:w,context:S},k=(T,F=!1)=>{let{aborted:H}=_.signal,V=w.ignoreFetchAbort&&T!==void 0;if(w.status&&(H&&!F?(w.status.fetchAborted=!0,w.status.fetchError=_.signal.reason,V&&(w.status.fetchAbortIgnored=!0)):w.status.fetchResolved=!0),H&&!V&&!F)return P(_.signal.reason);let le=z;return this.#e[m]===z&&(T===void 0?le.__staleWhileFetching?this.#e[m]=le.__staleWhileFetching:this.delete(g):(w.status&&(w.status.fetchUpdated=!0),this.set(g,T,M.options))),T},O=T=>(w.status&&(w.status.fetchRejected=!0,w.status.fetchError=T),P(T)),P=T=>{let{aborted:F}=_.signal,H=F&&w.allowStaleOnFetchAbort,V=H||w.allowStaleOnFetchRejection,le=V||w.noDeleteOnFetchRejection,G=z;if(this.#e[m]===z&&(!le||G.__staleWhileFetching===void 0?this.delete(g):H||(this.#e[m]=G.__staleWhileFetching)),V)return w.status&&G.__staleWhileFetching!==void 0&&(w.status.returnedStale=!0),G.__staleWhileFetching;if(G.__returned===G)throw T},W=(T,F)=>{let H=this.#R?.(g,v,M);H&&H instanceof Promise&&H.then(V=>T(V===void 0?void 0:V),F),_.signal.addEventListener("abort",()=>{(!w.ignoreFetchAbort||w.allowStaleOnFetchAbort)&&(T(void 0),w.allowStaleOnFetchAbort&&(T=V=>k(V,!0)))})};w.status&&(w.status.fetchDispatched=!0);let z=new Promise(W).then(k,O),ee=Object.assign(z,{__abortController:_,__staleWhileFetching:v,__returned:void 0});return m===void 0?(this.set(g,ee,{...M.options,status:void 0}),m=this.#n.get(g)):this.#e[m]=ee,ee}#t(g){if(!this.#I)return!1;let m=g;return!!m&&m instanceof Promise&&m.hasOwnProperty("__staleWhileFetching")&&m.__abortController instanceof n}async fetch(g,m={}){let{allowStale:w=this.allowStale,updateAgeOnGet:S=this.updateAgeOnGet,noDeleteOnStaleGet:v=this.noDeleteOnStaleGet,ttl:_=this.ttl,noDisposeOnSet:x=this.noDisposeOnSet,size:M=0,sizeCalculation:k=this.sizeCalculation,noUpdateTTL:O=this.noUpdateTTL,noDeleteOnFetchRejection:P=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:W=this.allowStaleOnFetchRejection,ignoreFetchAbort:z=this.ignoreFetchAbort,allowStaleOnFetchAbort:ee=this.allowStaleOnFetchAbort,context:T,forceRefresh:F=!1,status:H,signal:V}=m;if(!this.#I)return H&&(H.fetch="get"),this.get(g,{allowStale:w,updateAgeOnGet:S,noDeleteOnStaleGet:v,status:H});let le={allowStale:w,updateAgeOnGet:S,noDeleteOnStaleGet:v,ttl:_,noDisposeOnSet:x,size:M,sizeCalculation:k,noUpdateTTL:O,noDeleteOnFetchRejection:P,allowStaleOnFetchRejection:W,allowStaleOnFetchAbort:ee,ignoreFetchAbort:z,status:H,signal:V},G=this.#n.get(g);if(G===void 0){H&&(H.fetch="miss");let D=this.#B(g,G,le,T);return D.__returned=D}else{let D=this.#e[G];if(this.#t(D)){let I=w&&D.__staleWhileFetching!==void 0;return H&&(H.fetch="inflight",I&&(H.returnedStale=!0)),I?D.__staleWhileFetching:D.__returned=D}let de=this.#d(G);if(!F&&!de)return H&&(H.fetch="hit"),this.#O(G),S&&this.#T(G),H&&this.#A(H,G),D;let Z=this.#B(g,G,le,T),ge=Z.__staleWhileFetching!==void 0&&w;return H&&(H.fetch=de?"stale":"refresh",ge&&de&&(H.returnedStale=!0)),ge?Z.__staleWhileFetching:Z.__returned=Z}}get(g,m={}){let{allowStale:w=this.allowStale,updateAgeOnGet:S=this.updateAgeOnGet,noDeleteOnStaleGet:v=this.noDeleteOnStaleGet,status:_}=m,x=this.#n.get(g);if(x!==void 0){let M=this.#e[x],k=this.#t(M);return _&&this.#A(_,x),this.#d(x)?(_&&(_.get="stale"),k?(_&&w&&M.__staleWhileFetching!==void 0&&(_.returnedStale=!0),w?M.__staleWhileFetching:void 0):(v||this.delete(g),_&&w&&(_.returnedStale=!0),w?M:void 0)):(_&&(_.get="hit"),k?M.__staleWhileFetching:(this.#O(x),S&&this.#T(x),M))}else _&&(_.get="miss")}#N(g,m){this.#f[m]=g,this.#u[g]=m}#O(g){g!==this.#o&&(g===this.#a?this.#a=this.#u[g]:this.#N(this.#f[g],this.#u[g]),this.#N(this.#o,g),this.#o=g)}delete(g){let m=!1;if(this.#i!==0){let w=this.#n.get(g);if(w!==void 0)if(m=!0,this.#i===1)this.clear();else{this.#k(w);let S=this.#e[w];this.#t(S)?S.__abortController.abort(new Error("deleted")):(this.#w||this.#h)&&(this.#w&&this.#p?.(S,g,"delete"),this.#h&&this.#s?.push([S,g,"delete"])),this.#n.delete(g),this.#r[w]=void 0,this.#e[w]=void 0,w===this.#o?this.#o=this.#f[w]:w===this.#a?this.#a=this.#u[w]:(this.#u[this.#f[w]]=this.#u[w],this.#f[this.#u[w]]=this.#f[w]),this.#i--,this.#m.push(w)}}if(this.#h&&this.#s?.length){let w=this.#s,S;for(;S=w?.shift();)this.#g?.(...S)}return m}clear(){for(let g of this.#_({allowStale:!0})){let m=this.#e[g];if(this.#t(m))m.__abortController.abort(new Error("deleted"));else{let w=this.#r[g];this.#w&&this.#p?.(m,w,"delete"),this.#h&&this.#s?.push([m,w,"delete"])}}if(this.#n.clear(),this.#e.fill(void 0),this.#r.fill(void 0),this.#y&&this.#S&&(this.#y.fill(0),this.#S.fill(0)),this.#E&&this.#E.fill(0),this.#a=0,this.#o=0,this.#m.length=0,this.#b=0,this.#i=0,this.#h&&this.#s){let g=this.#s,m;for(;m=g?.shift();)this.#g?.(...m)}}};e.LRUCache=b}),ft=he(e=>{ie(),re(),te(),Object.defineProperty(e,"t",{value:!0}),e.ContainerIterator=e.Container=e.Base=void 0;var o=class{constructor(h=0){this.iteratorType=h}equals(h){return this.o===h.o}};e.ContainerIterator=o;var t=class{constructor(){this.i=0}get length(){return this.i}size(){return this.i}empty(){return this.i===0}};e.Base=t;var l=class extends t{};e.Container=l}),za=he(e=>{ie(),re(),te(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var o=ft(),t=class extends o.Base{constructor(h=[]){super(),this.S=[];let n=this;h.forEach(function(r){n.push(r)})}clear(){this.i=0,this.S=[]}push(h){return this.S.push(h),this.i+=1,this.i}pop(){if(this.i!==0)return this.i-=1,this.S.pop()}top(){return this.S[this.i-1]}},l=t;e.default=l}),Ka=he(e=>{ie(),re(),te(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var o=ft(),t=class extends o.Base{constructor(h=[]){super(),this.j=0,this.q=[];let n=this;h.forEach(function(r){n.push(r)})}clear(){this.q=[],this.i=this.j=0}push(h){let n=this.q.length;if(this.j/n>.5&&this.j+this.i>=n&&n>4096){let r=this.i;for(let s=0;s<r;++s)this.q[s]=this.q[this.j+s];this.j=0,this.q[this.i]=h}else this.q[this.j+this.i]=h;return++this.i}pop(){if(this.i===0)return;let h=this.q[this.j++];return this.i-=1,h}front(){if(this.i!==0)return this.q[this.j]}},l=t;e.default=l}),Qa=he(e=>{ie(),re(),te(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var o=ft(),t=class extends o.Base{constructor(h=[],n=function(s,i){return s>i?-1:s<i?1:0},r=!0){if(super(),this.v=n,Array.isArray(h))this.C=r?[...h]:h;else{this.C=[];let i=this;h.forEach(function(a){i.C.push(a)})}this.i=this.C.length;let s=this.i>>1;for(let i=this.i-1>>1;i>=0;--i)this.k(i,s)}m(h){let n=this.C[h];for(;h>0;){let r=h-1>>1,s=this.C[r];if(this.v(s,n)<=0)break;this.C[h]=s,h=r}this.C[h]=n}k(h,n){let r=this.C[h];for(;h<n;){let s=h<<1|1,i=s+1,a=this.C[s];if(i<this.i&&this.v(a,this.C[i])>0&&(s=i,a=this.C[i]),this.v(a,r)>=0)break;this.C[h]=a,h=s}this.C[h]=r}clear(){this.i=0,this.C.length=0}push(h){this.C.push(h),this.m(this.i),this.i+=1}pop(){if(this.i===0)return;let h=this.C[0],n=this.C.pop();return this.i-=1,this.i&&(this.C[0]=n,this.k(0,this.i>>1)),h}top(){return this.C[0]}find(h){return this.C.indexOf(h)>=0}remove(h){let n=this.C.indexOf(h);return n<0?!1:(n===0?this.pop():n===this.i-1?(this.C.pop(),this.i-=1):(this.C.splice(n,1,this.C.pop()),this.i-=1,this.m(n),this.k(n,this.i>>1)),!0)}updateItem(h){let n=this.C.indexOf(h);return n<0?!1:(this.m(n),this.k(n,this.i>>1),!0)}toArray(){return[...this.C]}},l=t;e.default=l}),cn=he(e=>{ie(),re(),te(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var o=ft(),t=class extends o.Container{},l=t;e.default=l}),dt=he(e=>{ie(),re(),te(),Object.defineProperty(e,"t",{value:!0}),e.throwIteratorAccessError=o;function o(){throw new RangeError("Iterator access denied!")}}),Yo=he(e=>{ie(),re(),te(),Object.defineProperty(e,"t",{value:!0}),e.RandomIterator=void 0;var o=ft(),t=dt(),l=class extends o.ContainerIterator{constructor(h,n){super(n),this.o=h,this.iteratorType===0?(this.pre=function(){return this.o===0&&(0,t.throwIteratorAccessError)(),this.o-=1,this},this.next=function(){return this.o===this.container.size()&&(0,t.throwIteratorAccessError)(),this.o+=1,this}):(this.pre=function(){return this.o===this.container.size()-1&&(0,t.throwIteratorAccessError)(),this.o+=1,this},this.next=function(){return this.o===-1&&(0,t.throwIteratorAccessError)(),this.o-=1,this})}get pointer(){return this.container.getElementByPos(this.o)}set pointer(h){this.container.setElementByPos(this.o,h)}};e.RandomIterator=l}),Ya=he(e=>{ie(),re(),te(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var o=l(cn()),t=Yo();function l(s){return s&&s.t?s:{default:s}}var h=class Go extends t.RandomIterator{constructor(i,a,c){super(i,c),this.container=a}copy(){return new Go(this.o,this.container,this.iteratorType)}},n=class extends o.default{constructor(s=[],i=!0){if(super(),Array.isArray(s))this.J=i?[...s]:s,this.i=s.length;else{this.J=[];let a=this;s.forEach(function(c){a.pushBack(c)})}}clear(){this.i=0,this.J.length=0}begin(){return new h(0,this)}end(){return new h(this.i,this)}rBegin(){return new h(this.i-1,this,1)}rEnd(){return new h(-1,this,1)}front(){return this.J[0]}back(){return this.J[this.i-1]}getElementByPos(s){if(s<0||s>this.i-1)throw new RangeError;return this.J[s]}eraseElementByPos(s){if(s<0||s>this.i-1)throw new RangeError;return this.J.splice(s,1),this.i-=1,this.i}eraseElementByValue(s){let i=0;for(let a=0;a<this.i;++a)this.J[a]!==s&&(this.J[i++]=this.J[a]);return this.i=this.J.length=i,this.i}eraseElementByIterator(s){let i=s.o;return s=s.next(),this.eraseElementByPos(i),s}pushBack(s){return this.J.push(s),this.i+=1,this.i}popBack(){if(this.i!==0)return this.i-=1,this.J.pop()}setElementByPos(s,i){if(s<0||s>this.i-1)throw new RangeError;this.J[s]=i}insert(s,i,a=1){if(s<0||s>this.i)throw new RangeError;return this.J.splice(s,0,...new Array(a).fill(i)),this.i+=a,this.i}find(s){for(let i=0;i<this.i;++i)if(this.J[i]===s)return new h(i,this);return this.end()}reverse(){this.J.reverse()}unique(){let s=1;for(let i=1;i<this.i;++i)this.J[i]!==this.J[i-1]&&(this.J[s++]=this.J[i]);return this.i=this.J.length=s,this.i}sort(s){this.J.sort(s)}forEach(s){for(let i=0;i<this.i;++i)s(this.J[i],i,this)}[Symbol.iterator](){return function*(){yield*this.J}.bind(this)()}},r=n;e.default=r}),Ga=he(e=>{ie(),re(),te(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var o=h(cn()),t=ft(),l=dt();function h(i){return i&&i.t?i:{default:i}}var n=class Jo extends t.ContainerIterator{constructor(a,c,d,b){super(b),this.o=a,this.h=c,this.container=d,this.iteratorType===0?(this.pre=function(){return this.o.L===this.h&&(0,l.throwIteratorAccessError)(),this.o=this.o.L,this},this.next=function(){return this.o===this.h&&(0,l.throwIteratorAccessError)(),this.o=this.o.B,this}):(this.pre=function(){return this.o.B===this.h&&(0,l.throwIteratorAccessError)(),this.o=this.o.B,this},this.next=function(){return this.o===this.h&&(0,l.throwIteratorAccessError)(),this.o=this.o.L,this})}get pointer(){return this.o===this.h&&(0,l.throwIteratorAccessError)(),this.o.l}set pointer(a){this.o===this.h&&(0,l.throwIteratorAccessError)(),this.o.l=a}copy(){return new Jo(this.o,this.h,this.container,this.iteratorType)}},r=class extends o.default{constructor(i=[]){super(),this.h={},this.p=this._=this.h.L=this.h.B=this.h;let a=this;i.forEach(function(c){a.pushBack(c)})}V(i){let{L:a,B:c}=i;a.B=c,c.L=a,i===this.p&&(this.p=c),i===this._&&(this._=a),this.i-=1}G(i,a){let c=a.B,d={l:i,L:a,B:c};a.B=d,c.L=d,a===this.h&&(this.p=d),c===this.h&&(this._=d),this.i+=1}clear(){this.i=0,this.p=this._=this.h.L=this.h.B=this.h}begin(){return new n(this.p,this.h,this)}end(){return new n(this.h,this.h,this)}rBegin(){return new n(this._,this.h,this,1)}rEnd(){return new n(this.h,this.h,this,1)}front(){return this.p.l}back(){return this._.l}getElementByPos(i){if(i<0||i>this.i-1)throw new RangeError;let a=this.p;for(;i--;)a=a.B;return a.l}eraseElementByPos(i){if(i<0||i>this.i-1)throw new RangeError;let a=this.p;for(;i--;)a=a.B;return this.V(a),this.i}eraseElementByValue(i){let a=this.p;for(;a!==this.h;)a.l===i&&this.V(a),a=a.B;return this.i}eraseElementByIterator(i){let a=i.o;return a===this.h&&(0,l.throwIteratorAccessError)(),i=i.next(),this.V(a),i}pushBack(i){return this.G(i,this._),this.i}popBack(){if(this.i===0)return;let i=this._.l;return this.V(this._),i}pushFront(i){return this.G(i,this.h),this.i}popFront(){if(this.i===0)return;let i=this.p.l;return this.V(this.p),i}setElementByPos(i,a){if(i<0||i>this.i-1)throw new RangeError;let c=this.p;for(;i--;)c=c.B;c.l=a}insert(i,a,c=1){if(i<0||i>this.i)throw new RangeError;if(c<=0)return this.i;if(i===0)for(;c--;)this.pushFront(a);else if(i===this.i)for(;c--;)this.pushBack(a);else{let d=this.p;for(let y=1;y<i;++y)d=d.B;let b=d.B;for(this.i+=c;c--;)d.B={l:a,L:d},d.B.L=d,d=d.B;d.B=b,b.L=d}return this.i}find(i){let a=this.p;for(;a!==this.h;){if(a.l===i)return new n(a,this.h,this);a=a.B}return this.end()}reverse(){if(this.i<=1)return;let i=this.p,a=this._,c=0;for(;c<<1<this.i;){let d=i.l;i.l=a.l,a.l=d,i=i.B,a=a.L,c+=1}}unique(){if(this.i<=1)return this.i;let i=this.p;for(;i!==this.h;){let a=i;for(;a.B!==this.h&&a.l===a.B.l;)a=a.B,this.i-=1;i.B=a.B,i.B.L=i,i=i.B}return this.i}sort(i){if(this.i<=1)return;let a=[];this.forEach(function(d){a.push(d)}),a.sort(i);let c=this.p;a.forEach(function(d){c.l=d,c=c.B})}merge(i){let a=this;if(this.i===0)i.forEach(function(c){a.pushBack(c)});else{let c=this.p;i.forEach(function(d){for(;c!==a.h&&c.l<=d;)c=c.B;a.G(d,c.L)})}return this.i}forEach(i){let a=this.p,c=0;for(;a!==this.h;)i(a.l,c++,this),a=a.B}[Symbol.iterator](){return function*(){if(this.i===0)return;let i=this.p;for(;i!==this.h;)yield i.l,i=i.B}.bind(this)()}},s=r;e.default=s}),Ja=he(e=>{ie(),re(),te(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var o=l(cn()),t=Yo();function l(s){return s&&s.t?s:{default:s}}var h=class Xo extends t.RandomIterator{constructor(i,a,c){super(i,c),this.container=a}copy(){return new Xo(this.o,this.container,this.iteratorType)}},n=class extends o.default{constructor(s=[],i=4096){super(),this.j=0,this.D=0,this.R=0,this.N=0,this.P=0,this.A=[];let a=(()=>{if(typeof s.length=="number")return s.length;if(typeof s.size=="number")return s.size;if(typeof s.size=="function")return s.size();throw new TypeError("Cannot get the length or size of the container")})();this.F=i,this.P=Math.max(Math.ceil(a/this.F),1);for(let b=0;b<this.P;++b)this.A.push(new Array(this.F));let c=Math.ceil(a/this.F);this.j=this.R=(this.P>>1)-(c>>1),this.D=this.N=this.F-a%this.F>>1;let d=this;s.forEach(function(b){d.pushBack(b)})}T(){let s=[],i=Math.max(this.P>>1,1);for(let a=0;a<i;++a)s[a]=new Array(this.F);for(let a=this.j;a<this.P;++a)s[s.length]=this.A[a];for(let a=0;a<this.R;++a)s[s.length]=this.A[a];s[s.length]=[...this.A[this.R]],this.j=i,this.R=s.length-1;for(let a=0;a<i;++a)s[s.length]=new Array(this.F);this.A=s,this.P=s.length}O(s){let i=this.D+s+1,a=i%this.F,c=a-1,d=this.j+(i-a)/this.F;return a===0&&(d-=1),d%=this.P,c<0&&(c+=this.F),{curNodeBucketIndex:d,curNodePointerIndex:c}}clear(){this.A=[new Array(this.F)],this.P=1,this.j=this.R=this.i=0,this.D=this.N=this.F>>1}begin(){return new h(0,this)}end(){return new h(this.i,this)}rBegin(){return new h(this.i-1,this,1)}rEnd(){return new h(-1,this,1)}front(){if(this.i!==0)return this.A[this.j][this.D]}back(){if(this.i!==0)return this.A[this.R][this.N]}pushBack(s){return this.i&&(this.N<this.F-1?this.N+=1:this.R<this.P-1?(this.R+=1,this.N=0):(this.R=0,this.N=0),this.R===this.j&&this.N===this.D&&this.T()),this.i+=1,this.A[this.R][this.N]=s,this.i}popBack(){if(this.i===0)return;let s=this.A[this.R][this.N];return this.i!==1&&(this.N>0?this.N-=1:this.R>0?(this.R-=1,this.N=this.F-1):(this.R=this.P-1,this.N=this.F-1)),this.i-=1,s}pushFront(s){return this.i&&(this.D>0?this.D-=1:this.j>0?(this.j-=1,this.D=this.F-1):(this.j=this.P-1,this.D=this.F-1),this.j===this.R&&this.D===this.N&&this.T()),this.i+=1,this.A[this.j][this.D]=s,this.i}popFront(){if(this.i===0)return;let s=this.A[this.j][this.D];return this.i!==1&&(this.D<this.F-1?this.D+=1:this.j<this.P-1?(this.j+=1,this.D=0):(this.j=0,this.D=0)),this.i-=1,s}getElementByPos(s){if(s<0||s>this.i-1)throw new RangeError;let{curNodeBucketIndex:i,curNodePointerIndex:a}=this.O(s);return this.A[i][a]}setElementByPos(s,i){if(s<0||s>this.i-1)throw new RangeError;let{curNodeBucketIndex:a,curNodePointerIndex:c}=this.O(s);this.A[a][c]=i}insert(s,i,a=1){if(s<0||s>this.i)throw new RangeError;if(s===0)for(;a--;)this.pushFront(i);else if(s===this.i)for(;a--;)this.pushBack(i);else{let c=[];for(let d=s;d<this.i;++d)c.push(this.getElementByPos(d));this.cut(s-1);for(let d=0;d<a;++d)this.pushBack(i);for(let d=0;d<c.length;++d)this.pushBack(c[d])}return this.i}cut(s){if(s<0)return this.clear(),0;let{curNodeBucketIndex:i,curNodePointerIndex:a}=this.O(s);return this.R=i,this.N=a,this.i=s+1,this.i}eraseElementByPos(s){if(s<0||s>this.i-1)throw new RangeError;if(s===0)this.popFront();else if(s===this.i-1)this.popBack();else{let i=[];for(let c=s+1;c<this.i;++c)i.push(this.getElementByPos(c));this.cut(s),this.popBack();let a=this;i.forEach(function(c){a.pushBack(c)})}return this.i}eraseElementByValue(s){if(this.i===0)return 0;let i=[];for(let c=0;c<this.i;++c){let d=this.getElementByPos(c);d!==s&&i.push(d)}let a=i.length;for(let c=0;c<a;++c)this.setElementByPos(c,i[c]);return this.cut(a-1)}eraseElementByIterator(s){let i=s.o;return this.eraseElementByPos(i),s=s.next(),s}find(s){for(let i=0;i<this.i;++i)if(this.getElementByPos(i)===s)return new h(i,this);return this.end()}reverse(){let s=0,i=this.i-1;for(;s<i;){let a=this.getElementByPos(s);this.setElementByPos(s,this.getElementByPos(i)),this.setElementByPos(i,a),s+=1,i-=1}}unique(){if(this.i<=1)return this.i;let s=1,i=this.getElementByPos(0);for(let a=1;a<this.i;++a){let c=this.getElementByPos(a);c!==i&&(i=c,this.setElementByPos(s++,c))}for(;this.i>s;)this.popBack();return this.i}sort(s){let i=[];for(let a=0;a<this.i;++a)i.push(this.getElementByPos(a));i.sort(s);for(let a=0;a<this.i;++a)this.setElementByPos(a,i[a])}shrinkToFit(){if(this.i===0)return;let s=[];this.forEach(function(i){s.push(i)}),this.P=Math.max(Math.ceil(this.i/this.F),1),this.i=this.j=this.R=this.D=this.N=0,this.A=[];for(let i=0;i<this.P;++i)this.A.push(new Array(this.F));for(let i=0;i<s.length;++i)this.pushBack(s[i])}forEach(s){for(let i=0;i<this.i;++i)s(this.getElementByPos(i),i,this)}[Symbol.iterator](){return function*(){for(let s=0;s<this.i;++s)yield this.getElementByPos(s)}.bind(this)()}},r=n;e.default=r}),Xa=he(e=>{ie(),re(),te(),Object.defineProperty(e,"t",{value:!0}),e.TreeNodeEnableIndex=e.TreeNode=void 0;var o=class{constructor(l,h){this.ee=1,this.u=void 0,this.l=void 0,this.U=void 0,this.W=void 0,this.tt=void 0,this.u=l,this.l=h}L(){let l=this;if(l.ee===1&&l.tt.tt===l)l=l.W;else if(l.U)for(l=l.U;l.W;)l=l.W;else{let h=l.tt;for(;h.U===l;)l=h,h=l.tt;l=h}return l}B(){let l=this;if(l.W){for(l=l.W;l.U;)l=l.U;return l}else{let h=l.tt;for(;h.W===l;)l=h,h=l.tt;return l.W!==h?h:l}}te(){let l=this.tt,h=this.W,n=h.U;return l.tt===this?l.tt=h:l.U===this?l.U=h:l.W=h,h.tt=l,h.U=this,this.tt=h,this.W=n,n&&(n.tt=this),h}se(){let l=this.tt,h=this.U,n=h.W;return l.tt===this?l.tt=h:l.U===this?l.U=h:l.W=h,h.tt=l,h.W=this,this.tt=h,this.U=n,n&&(n.tt=this),h}};e.TreeNode=o;var t=class extends o{constructor(){super(...arguments),this.rt=1}te(){let l=super.te();return this.ie(),l.ie(),l}se(){let l=super.se();return this.ie(),l.ie(),l}ie(){this.rt=1,this.U&&(this.rt+=this.U.rt),this.W&&(this.rt+=this.W.rt)}};e.TreeNodeEnableIndex=t}),Zo=he(e=>{ie(),re(),te(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var o=Xa(),t=ft(),l=dt(),h=class extends t.Container{constructor(r=function(i,a){return i<a?-1:i>a?1:0},s=!1){super(),this.Y=void 0,this.v=r,s?(this.re=o.TreeNodeEnableIndex,this.M=function(i,a,c){let d=this.ne(i,a,c);if(d){let b=d.tt;for(;b!==this.h;)b.rt+=1,b=b.tt;let y=this.he(d);if(y){let{parentNode:g,grandParent:m,curNode:w}=y;g.ie(),m.ie(),w.ie()}}return this.i},this.V=function(i){let a=this.fe(i);for(;a!==this.h;)a.rt-=1,a=a.tt}):(this.re=o.TreeNode,this.M=function(i,a,c){let d=this.ne(i,a,c);return d&&this.he(d),this.i},this.V=this.fe),this.h=new this.re}X(r,s){let i=this.h;for(;r;){let a=this.v(r.u,s);if(a<0)r=r.W;else if(a>0)i=r,r=r.U;else return r}return i}Z(r,s){let i=this.h;for(;r;)this.v(r.u,s)<=0?r=r.W:(i=r,r=r.U);return i}$(r,s){let i=this.h;for(;r;){let a=this.v(r.u,s);if(a<0)i=r,r=r.W;else if(a>0)r=r.U;else return r}return i}rr(r,s){let i=this.h;for(;r;)this.v(r.u,s)<0?(i=r,r=r.W):r=r.U;return i}ue(r){for(;;){let s=r.tt;if(s===this.h)return;if(r.ee===1){r.ee=0;return}if(r===s.U){let i=s.W;if(i.ee===1)i.ee=0,s.ee=1,s===this.Y?this.Y=s.te():s.te();else if(i.W&&i.W.ee===1){i.ee=s.ee,s.ee=0,i.W.ee=0,s===this.Y?this.Y=s.te():s.te();return}else i.U&&i.U.ee===1?(i.ee=1,i.U.ee=0,i.se()):(i.ee=1,r=s)}else{let i=s.U;if(i.ee===1)i.ee=0,s.ee=1,s===this.Y?this.Y=s.se():s.se();else if(i.U&&i.U.ee===1){i.ee=s.ee,s.ee=0,i.U.ee=0,s===this.Y?this.Y=s.se():s.se();return}else i.W&&i.W.ee===1?(i.ee=1,i.W.ee=0,i.te()):(i.ee=1,r=s)}}}fe(r){if(this.i===1)return this.clear(),this.h;let s=r;for(;s.U||s.W;){if(s.W)for(s=s.W;s.U;)s=s.U;else s=s.U;[r.u,s.u]=[s.u,r.u],[r.l,s.l]=[s.l,r.l],r=s}this.h.U===s?this.h.U=s.tt:this.h.W===s&&(this.h.W=s.tt),this.ue(s);let i=s.tt;return s===i.U?i.U=void 0:i.W=void 0,this.i-=1,this.Y.ee=0,i}oe(r,s){return r===void 0?!1:this.oe(r.U,s)||s(r)?!0:this.oe(r.W,s)}he(r){for(;;){let s=r.tt;if(s.ee===0)return;let i=s.tt;if(s===i.U){let a=i.W;if(a&&a.ee===1){if(a.ee=s.ee=0,i===this.Y)return;i.ee=1,r=i;continue}else if(r===s.W){if(r.ee=0,r.U&&(r.U.tt=s),r.W&&(r.W.tt=i),s.W=r.U,i.U=r.W,r.U=s,r.W=i,i===this.Y)this.Y=r,this.h.tt=r;else{let c=i.tt;c.U===i?c.U=r:c.W=r}return r.tt=i.tt,s.tt=r,i.tt=r,i.ee=1,{parentNode:s,grandParent:i,curNode:r}}else s.ee=0,i===this.Y?this.Y=i.se():i.se(),i.ee=1}else{let a=i.U;if(a&&a.ee===1){if(a.ee=s.ee=0,i===this.Y)return;i.ee=1,r=i;continue}else if(r===s.U){if(r.ee=0,r.U&&(r.U.tt=i),r.W&&(r.W.tt=s),i.W=r.U,s.U=r.W,r.U=i,r.W=s,i===this.Y)this.Y=r,this.h.tt=r;else{let c=i.tt;c.U===i?c.U=r:c.W=r}return r.tt=i.tt,s.tt=r,i.tt=r,i.ee=1,{parentNode:s,grandParent:i,curNode:r}}else s.ee=0,i===this.Y?this.Y=i.te():i.te(),i.ee=1}return}}ne(r,s,i){if(this.Y===void 0){this.i+=1,this.Y=new this.re(r,s),this.Y.ee=0,this.Y.tt=this.h,this.h.tt=this.Y,this.h.U=this.Y,this.h.W=this.Y;return}let a,c=this.h.U,d=this.v(c.u,r);if(d===0){c.l=s;return}else if(d>0)c.U=new this.re(r,s),c.U.tt=c,a=c.U,this.h.U=a;else{let b=this.h.W,y=this.v(b.u,r);if(y===0){b.l=s;return}else if(y<0)b.W=new this.re(r,s),b.W.tt=b,a=b.W,this.h.W=a;else{if(i!==void 0){let g=i.o;if(g!==this.h){let m=this.v(g.u,r);if(m===0){g.l=s;return}else if(m>0){let w=g.L(),S=this.v(w.u,r);if(S===0){w.l=s;return}else S<0&&(a=new this.re(r,s),w.W===void 0?(w.W=a,a.tt=w):(g.U=a,a.tt=g))}}}if(a===void 0)for(a=this.Y;;){let g=this.v(a.u,r);if(g>0){if(a.U===void 0){a.U=new this.re(r,s),a.U.tt=a,a=a.U;break}a=a.U}else if(g<0){if(a.W===void 0){a.W=new this.re(r,s),a.W.tt=a,a=a.W;break}a=a.W}else{a.l=s;return}}}}return this.i+=1,a}I(r,s){for(;r;){let i=this.v(r.u,s);if(i<0)r=r.W;else if(i>0)r=r.U;else return r}return r||this.h}clear(){this.i=0,this.Y=void 0,this.h.tt=void 0,this.h.U=this.h.W=void 0}updateKeyByIterator(r,s){let i=r.o;if(i===this.h&&(0,l.throwIteratorAccessError)(),this.i===1)return i.u=s,!0;if(i===this.h.U)return this.v(i.B().u,s)>0?(i.u=s,!0):!1;if(i===this.h.W)return this.v(i.L().u,s)<0?(i.u=s,!0):!1;let a=i.L().u;if(this.v(a,s)>=0)return!1;let c=i.B().u;return this.v(c,s)<=0?!1:(i.u=s,!0)}eraseElementByPos(r){if(r<0||r>this.i-1)throw new RangeError;let s=0,i=this;return this.oe(this.Y,function(a){return r===s?(i.V(a),!0):(s+=1,!1)}),this.i}eraseElementByKey(r){if(this.i===0)return!1;let s=this.I(this.Y,r);return s===this.h?!1:(this.V(s),!0)}eraseElementByIterator(r){let s=r.o;s===this.h&&(0,l.throwIteratorAccessError)();let i=s.W===void 0;return r.iteratorType===0?i&&r.next():(!i||s.U===void 0)&&r.next(),this.V(s),r}forEach(r){let s=0;for(let i of this)r(i,s++,this)}getElementByPos(r){if(r<0||r>this.i-1)throw new RangeError;let s,i=0;for(let a of this){if(i===r){s=a;break}i+=1}return s}getHeight(){if(this.i===0)return 0;let r=function(s){return s?Math.max(r(s.U),r(s.W))+1:0};return r(this.Y)}},n=h;e.default=n}),es=he(e=>{ie(),re(),te(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var o=ft(),t=dt(),l=class extends o.ContainerIterator{constructor(n,r,s){super(s),this.o=n,this.h=r,this.iteratorType===0?(this.pre=function(){return this.o===this.h.U&&(0,t.throwIteratorAccessError)(),this.o=this.o.L(),this},this.next=function(){return this.o===this.h&&(0,t.throwIteratorAccessError)(),this.o=this.o.B(),this}):(this.pre=function(){return this.o===this.h.W&&(0,t.throwIteratorAccessError)(),this.o=this.o.B(),this},this.next=function(){return this.o===this.h&&(0,t.throwIteratorAccessError)(),this.o=this.o.L(),this})}get index(){let n=this.o,r=this.h.tt;if(n===this.h)return r?r.rt-1:0;let s=0;for(n.U&&(s+=n.U.rt);n!==r;){let i=n.tt;n===i.W&&(s+=1,i.U&&(s+=i.U.rt)),n=i}return s}},h=l;e.default=h}),Za=he(e=>{ie(),re(),te(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var o=h(Zo()),t=h(es()),l=dt();function h(i){return i&&i.t?i:{default:i}}var n=class ts extends t.default{constructor(a,c,d,b){super(a,c,b),this.container=d}get pointer(){return this.o===this.h&&(0,l.throwIteratorAccessError)(),this.o.u}copy(){return new ts(this.o,this.h,this.container,this.iteratorType)}},r=class extends o.default{constructor(i=[],a,c){super(a,c);let d=this;i.forEach(function(b){d.insert(b)})}*K(i){i!==void 0&&(yield*this.K(i.U),yield i.u,yield*this.K(i.W))}begin(){return new n(this.h.U||this.h,this.h,this)}end(){return new n(this.h,this.h,this)}rBegin(){return new n(this.h.W||this.h,this.h,this,1)}rEnd(){return new n(this.h,this.h,this,1)}front(){return this.h.U?this.h.U.u:void 0}back(){return this.h.W?this.h.W.u:void 0}insert(i,a){return this.M(i,void 0,a)}find(i){let a=this.I(this.Y,i);return new n(a,this.h,this)}lowerBound(i){let a=this.X(this.Y,i);return new n(a,this.h,this)}upperBound(i){let a=this.Z(this.Y,i);return new n(a,this.h,this)}reverseLowerBound(i){let a=this.$(this.Y,i);return new n(a,this.h,this)}reverseUpperBound(i){let a=this.rr(this.Y,i);return new n(a,this.h,this)}union(i){let a=this;return i.forEach(function(c){a.insert(c)}),this.i}[Symbol.iterator](){return this.K(this.Y)}},s=r;e.default=s}),el=he(e=>{ie(),re(),te(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var o=h(Zo()),t=h(es()),l=dt();function h(i){return i&&i.t?i:{default:i}}var n=class rs extends t.default{constructor(a,c,d,b){super(a,c,b),this.container=d}get pointer(){this.o===this.h&&(0,l.throwIteratorAccessError)();let a=this;return new Proxy([],{get(c,d){if(d==="0")return a.o.u;if(d==="1")return a.o.l},set(c,d,b){if(d!=="1")throw new TypeError("props must be 1");return a.o.l=b,!0}})}copy(){return new rs(this.o,this.h,this.container,this.iteratorType)}},r=class extends o.default{constructor(i=[],a,c){super(a,c);let d=this;i.forEach(function(b){d.setElement(b[0],b[1])})}*K(i){i!==void 0&&(yield*this.K(i.U),yield[i.u,i.l],yield*this.K(i.W))}begin(){return new n(this.h.U||this.h,this.h,this)}end(){return new n(this.h,this.h,this)}rBegin(){return new n(this.h.W||this.h,this.h,this,1)}rEnd(){return new n(this.h,this.h,this,1)}front(){if(this.i===0)return;let i=this.h.U;return[i.u,i.l]}back(){if(this.i===0)return;let i=this.h.W;return[i.u,i.l]}lowerBound(i){let a=this.X(this.Y,i);return new n(a,this.h,this)}upperBound(i){let a=this.Z(this.Y,i);return new n(a,this.h,this)}reverseLowerBound(i){let a=this.$(this.Y,i);return new n(a,this.h,this)}reverseUpperBound(i){let a=this.rr(this.Y,i);return new n(a,this.h,this)}setElement(i,a,c){return this.M(i,a,c)}find(i){let a=this.I(this.Y,i);return new n(a,this.h,this)}getElementByKey(i){return this.I(this.Y,i).l}union(i){let a=this;return i.forEach(function(c){a.setElement(c[0],c[1])}),this.i}[Symbol.iterator](){return this.K(this.Y)}},s=r;e.default=s}),is=he(e=>{ie(),re(),te(),Object.defineProperty(e,"t",{value:!0}),e.default=o;function o(t){let l=typeof t;return l==="object"&&t!==null||l==="function"}}),ns=he(e=>{ie(),re(),te(),Object.defineProperty(e,"t",{value:!0}),e.HashContainerIterator=e.HashContainer=void 0;var o=ft(),t=h(is()),l=dt();function h(s){return s&&s.t?s:{default:s}}var n=class extends o.ContainerIterator{constructor(s,i,a){super(a),this.o=s,this.h=i,this.iteratorType===0?(this.pre=function(){return this.o.L===this.h&&(0,l.throwIteratorAccessError)(),this.o=this.o.L,this},this.next=function(){return this.o===this.h&&(0,l.throwIteratorAccessError)(),this.o=this.o.B,this}):(this.pre=function(){return this.o.B===this.h&&(0,l.throwIteratorAccessError)(),this.o=this.o.B,this},this.next=function(){return this.o===this.h&&(0,l.throwIteratorAccessError)(),this.o=this.o.L,this})}};e.HashContainerIterator=n;var r=class extends o.Container{constructor(){super(),this.H=[],this.g={},this.HASH_TAG=Symbol("@@HASH_TAG"),Object.setPrototypeOf(this.g,null),this.h={},this.h.L=this.h.B=this.p=this._=this.h}V(s){let{L:i,B:a}=s;i.B=a,a.L=i,s===this.p&&(this.p=a),s===this._&&(this._=i),this.i-=1}M(s,i,a){a===void 0&&(a=(0,t.default)(s));let c;if(a){let d=s[this.HASH_TAG];if(d!==void 0)return this.H[d].l=i,this.i;Object.defineProperty(s,this.HASH_TAG,{value:this.H.length,configurable:!0}),c={u:s,l:i,L:this._,B:this.h},this.H.push(c)}else{let d=this.g[s];if(d)return d.l=i,this.i;c={u:s,l:i,L:this._,B:this.h},this.g[s]=c}return this.i===0?(this.p=c,this.h.B=c):this._.B=c,this._=c,this.h.L=c,++this.i}I(s,i){if(i===void 0&&(i=(0,t.default)(s)),i){let a=s[this.HASH_TAG];return a===void 0?this.h:this.H[a]}else return this.g[s]||this.h}clear(){let s=this.HASH_TAG;this.H.forEach(function(i){delete i.u[s]}),this.H=[],this.g={},Object.setPrototypeOf(this.g,null),this.i=0,this.p=this._=this.h.L=this.h.B=this.h}eraseElementByKey(s,i){let a;if(i===void 0&&(i=(0,t.default)(s)),i){let c=s[this.HASH_TAG];if(c===void 0)return!1;delete s[this.HASH_TAG],a=this.H[c],delete this.H[c]}else{if(a=this.g[s],a===void 0)return!1;delete this.g[s]}return this.V(a),!0}eraseElementByIterator(s){let i=s.o;return i===this.h&&(0,l.throwIteratorAccessError)(),this.V(i),s.next()}eraseElementByPos(s){if(s<0||s>this.i-1)throw new RangeError;let i=this.p;for(;s--;)i=i.B;return this.V(i),this.i}};e.HashContainer=r}),tl=he(e=>{ie(),re(),te(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var o=ns(),t=dt(),l=class os extends o.HashContainerIterator{constructor(s,i,a,c){super(s,i,c),this.container=a}get pointer(){return this.o===this.h&&(0,t.throwIteratorAccessError)(),this.o.u}copy(){return new os(this.o,this.h,this.container,this.iteratorType)}},h=class extends o.HashContainer{constructor(r=[]){super();let s=this;r.forEach(function(i){s.insert(i)})}begin(){return new l(this.p,this.h,this)}end(){return new l(this.h,this.h,this)}rBegin(){return new l(this._,this.h,this,1)}rEnd(){return new l(this.h,this.h,this,1)}front(){return this.p.u}back(){return this._.u}insert(r,s){return this.M(r,void 0,s)}getElementByPos(r){if(r<0||r>this.i-1)throw new RangeError;let s=this.p;for(;r--;)s=s.B;return s.u}find(r,s){let i=this.I(r,s);return new l(i,this.h,this)}forEach(r){let s=0,i=this.p;for(;i!==this.h;)r(i.u,s++,this),i=i.B}[Symbol.iterator](){return function*(){let r=this.p;for(;r!==this.h;)yield r.u,r=r.B}.bind(this)()}},n=h;e.default=n}),rl=he(e=>{ie(),re(),te(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var o=ns(),t=h(is()),l=dt();function h(i){return i&&i.t?i:{default:i}}var n=class ss extends o.HashContainerIterator{constructor(a,c,d,b){super(a,c,b),this.container=d}get pointer(){this.o===this.h&&(0,l.throwIteratorAccessError)();let a=this;return new Proxy([],{get(c,d){if(d==="0")return a.o.u;if(d==="1")return a.o.l},set(c,d,b){if(d!=="1")throw new TypeError("props must be 1");return a.o.l=b,!0}})}copy(){return new ss(this.o,this.h,this.container,this.iteratorType)}},r=class extends o.HashContainer{constructor(i=[]){super();let a=this;i.forEach(function(c){a.setElement(c[0],c[1])})}begin(){return new n(this.p,this.h,this)}end(){return new n(this.h,this.h,this)}rBegin(){return new n(this._,this.h,this,1)}rEnd(){return new n(this.h,this.h,this,1)}front(){if(this.i!==0)return[this.p.u,this.p.l]}back(){if(this.i!==0)return[this._.u,this._.l]}setElement(i,a,c){return this.M(i,a,c)}getElementByKey(i,a){if(a===void 0&&(a=(0,t.default)(i)),a){let d=i[this.HASH_TAG];return d!==void 0?this.H[d].l:void 0}let c=this.g[i];return c?c.l:void 0}getElementByPos(i){if(i<0||i>this.i-1)throw new RangeError;let a=this.p;for(;i--;)a=a.B;return[a.u,a.l]}find(i,a){let c=this.I(i,a);return new n(c,this.h,this)}forEach(i){let a=0,c=this.p;for(;c!==this.h;)i([c.u,c.l],a++,this),c=c.B}[Symbol.iterator](){return function*(){let i=this.p;for(;i!==this.h;)yield[i.u,i.l],i=i.B}.bind(this)()}},s=r;e.default=s}),il=he(e=>{ie(),re(),te(),Object.defineProperty(e,"t",{value:!0}),Object.defineProperty(e,"Deque",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(e,"HashMap",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(e,"HashSet",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(e,"LinkList",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(e,"OrderedMap",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"OrderedSet",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(e,"PriorityQueue",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(e,"Queue",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"Stack",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(e,"Vector",{enumerable:!0,get:function(){return h.default}});var o=d(za()),t=d(Ka()),l=d(Qa()),h=d(Ya()),n=d(Ga()),r=d(Ja()),s=d(Za()),i=d(el()),a=d(tl()),c=d(rl());function d(b){return b&&b.t?b:{default:b}}}),nl=he((e,o)=>{ie(),re(),te();var t=il().OrderedSet,l=ht()("number-allocator:trace"),h=ht()("number-allocator:error");function n(s,i){this.low=s,this.high=i}n.prototype.equals=function(s){return this.low===s.low&&this.high===s.high},n.prototype.compare=function(s){return this.low<s.low&&this.high<s.low?-1:s.low<this.low&&s.high<this.low?1:0};function r(s,i){if(!(this instanceof r))return new r(s,i);this.min=s,this.max=i,this.ss=new t([],(a,c)=>a.compare(c)),l("Create"),this.clear()}r.prototype.firstVacant=function(){return this.ss.size()===0?null:this.ss.front().low},r.prototype.alloc=function(){if(this.ss.size()===0)return l("alloc():empty"),null;let s=this.ss.begin(),i=s.pointer.low,a=s.pointer.high,c=i;return c+1<=a?this.ss.updateKeyByIterator(s,new n(i+1,a)):this.ss.eraseElementByPos(0),l("alloc():"+c),c},r.prototype.use=function(s){let i=new n(s,s),a=this.ss.lowerBound(i);if(!a.equals(this.ss.end())){let c=a.pointer.low,d=a.pointer.high;return a.pointer.equals(i)?(this.ss.eraseElementByIterator(a),l("use():"+s),!0):c>s?!1:c===s?(this.ss.updateKeyByIterator(a,new n(c+1,d)),l("use():"+s),!0):d===s?(this.ss.updateKeyByIterator(a,new n(c,d-1)),l("use():"+s),!0):(this.ss.updateKeyByIterator(a,new n(s+1,d)),this.ss.insert(new n(c,s-1)),l("use():"+s),!0)}return l("use():failed"),!1},r.prototype.free=function(s){if(s<this.min||s>this.max){h("free():"+s+" is out of range");return}let i=new n(s,s),a=this.ss.upperBound(i);if(a.equals(this.ss.end())){if(a.equals(this.ss.begin())){this.ss.insert(i);return}a.pre();let c=a.pointer.high;a.pointer.high+1===s?this.ss.updateKeyByIterator(a,new n(c,s)):this.ss.insert(i)}else if(a.equals(this.ss.begin()))if(s+1===a.pointer.low){let c=a.pointer.high;this.ss.updateKeyByIterator(a,new n(s,c))}else this.ss.insert(i);else{let c=a.pointer.low,d=a.pointer.high;a.pre();let b=a.pointer.low;a.pointer.high+1===s?s+1===c?(this.ss.eraseElementByIterator(a),this.ss.updateKeyByIterator(a,new n(b,d))):this.ss.updateKeyByIterator(a,new n(b,s)):s+1===c?(this.ss.eraseElementByIterator(a.next()),this.ss.insert(new n(s,d))):this.ss.insert(i)}l("free():"+s)},r.prototype.clear=function(){l("clear()"),this.ss.clear(),this.ss.insert(new n(this.min,this.max))},r.prototype.intervalCount=function(){return this.ss.size()},r.prototype.dump=function(){console.log("length:"+this.ss.size());for(let s of this.ss)console.log(s)},o.exports=r}),as=he((e,o)=>{ie(),re(),te();var t=nl();o.exports.NumberAllocator=t}),ol=he(e=>{ie(),re(),te(),Object.defineProperty(e,"__esModule",{value:!0});var o=Ha(),t=as(),l=class{constructor(h){h>0&&(this.aliasToTopic=new o.LRUCache({max:h}),this.topicToAlias={},this.numberAllocator=new t.NumberAllocator(1,h),this.max=h,this.length=0)}put(h,n){if(n===0||n>this.max)return!1;let r=this.aliasToTopic.get(n);return r&&delete this.topicToAlias[r],this.aliasToTopic.set(n,h),this.topicToAlias[h]=n,this.numberAllocator.use(n),this.length=this.aliasToTopic.size,!0}getTopicByAlias(h){return this.aliasToTopic.get(h)}getAliasByTopic(h){let n=this.topicToAlias[h];return typeof n<"u"&&this.aliasToTopic.get(n),n}clear(){this.aliasToTopic.clear(),this.topicToAlias={},this.numberAllocator.clear(),this.length=0}getLruAlias(){return this.numberAllocator.firstVacant()||[...this.aliasToTopic.keys()][this.aliasToTopic.size-1]}};e.default=l}),sl=he(e=>{ie(),re(),te();var o=e&&e.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(e,"__esModule",{value:!0});var t=mr(),l=o(ol()),h=Gt(),n=(r,s)=>{r.log("_handleConnack");let{options:i}=r,a=i.protocolVersion===5?s.reasonCode:s.returnCode;if(clearTimeout(r.connackTimer),delete r.topicAliasSend,s.properties){if(s.properties.topicAliasMaximum){if(s.properties.topicAliasMaximum>65535){r.emit("error",new Error("topicAliasMaximum from broker is out of range"));return}s.properties.topicAliasMaximum>0&&(r.topicAliasSend=new l.default(s.properties.topicAliasMaximum))}s.properties.serverKeepAlive&&i.keepalive&&(i.keepalive=s.properties.serverKeepAlive,r._shiftPingInterval()),s.properties.maximumPacketSize&&(i.properties||(i.properties={}),i.properties.maximumPacketSize=s.properties.maximumPacketSize)}if(a===0)r.reconnecting=!1,r._onConnect(s);else if(a>0){let c=new h.ErrorWithReasonCode(`Connection refused: ${t.ReasonCodes[a]}`,a);r.emit("error",c)}};e.default=n}),al=he(e=>{ie(),re(),te(),Object.defineProperty(e,"__esModule",{value:!0});var o=(t,l,h)=>{t.log("handling pubrel packet");let n=typeof h<"u"?h:t.noop,{messageId:r}=l,s={cmd:"pubcomp",messageId:r};t.incomingStore.get(l,(i,a)=>{i?t._sendPacket(s,n):(t.emit("message",a.topic,a.payload,a),t.handleMessage(a,c=>{if(c)return n(c);t.incomingStore.del(a,t.noop),t._sendPacket(s,n)}))})};e.default=o}),ll=he(e=>{ie(),re(),te();var o=e&&e.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(e,"__esModule",{value:!0});var t=o($a()),l=o(Va()),h=o(sl()),n=o(mr()),r=o(al()),s=(i,a,c)=>{let{options:d}=i;if(d.protocolVersion===5&&d.properties&&d.properties.maximumPacketSize&&d.properties.maximumPacketSize<a.length)return i.emit("error",new Error(`exceeding packets size ${a.cmd}`)),i.end({reasonCode:149,properties:{reasonString:"Maximum packet size was exceeded"}}),i;switch(i.pingResp=Date.now(),a.cmd!=="pingresp"&&i._shiftPingInterval(),i.log("_handlePacket :: emitting packetreceive"),i.emit("packetreceive",a),a.cmd){case"publish":(0,t.default)(i,a,c);break;case"puback":case"pubrec":case"pubcomp":case"suback":case"unsuback":(0,n.default)(i,a),c();break;case"pubrel":(0,r.default)(i,a,c);break;case"connack":(0,h.default)(i,a),c();break;case"auth":(0,l.default)(i,a),c();break;case"pingresp":c();break;case"disconnect":i.emit("disconnect",a),c();break;default:i.log("_handlePacket :: unknown command"),c();break}};e.default=s}),ul=he(e=>{ie(),re(),te();var o=e&&e.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(e,"__esModule",{value:!0}),e.TypedEventEmitter=void 0;var t=o((Dt(),Ie(xt))),l=Gt(),h=class{};e.TypedEventEmitter=h,(0,l.applyMixin)(h,t.default)}),yr=he(e=>{ie(),re(),te(),Object.defineProperty(e,"__esModule",{value:!0}),e.isReactNativeBrowser=e.isWebWorker=void 0;var o=()=>typeof window<"u"&&typeof window.document<"u",t=()=>{var n,r;return!!(typeof self=="object"&&!((r=(n=self?.constructor)===null||n===void 0?void 0:n.name)===null||r===void 0)&&r.includes("WorkerGlobalScope"))},l=()=>typeof $e<"u"&&$e.product==="ReactNative",h=o()||t()||l();e.isWebWorker=t(),e.isReactNativeBrowser=l(),e.default=h}),hl=he((e,o)=>{ie(),re(),te(),function(t,l){typeof e=="object"&&typeof o<"u"?l(e):typeof define=="function"&&define.amd?define(["exports"],l):(t=typeof globalThis<"u"?globalThis:t||self,l(t.fastUniqueNumbers={}))}(e,function(t){var l=function(y){return function(g){var m=y(g);return g.add(m),m}},h=function(y){return function(g,m){return y.set(g,m),m}},n=Number.MAX_SAFE_INTEGER===void 0?9007199254740991:Number.MAX_SAFE_INTEGER,r=536870912,s=r*2,i=function(y,g){return function(m){var w=g.get(m),S=w===void 0?m.size:w<s?w+1:0;if(!m.has(S))return y(m,S);if(m.size<r){for(;m.has(S);)S=Math.floor(Math.random()*s);return y(m,S)}if(m.size>n)throw new Error("Congratulations, you created a collection of unique numbers which uses all available integers!");for(;m.has(S);)S=Math.floor(Math.random()*n);return y(m,S)}},a=new WeakMap,c=h(a),d=i(c,a),b=l(d);t.addUniqueNumber=b,t.generateUniqueNumber=d})}),cl=he((e,o)=>{ie(),re(),te(),function(t,l){typeof e=="object"&&typeof o<"u"?l(e,hl()):typeof define=="function"&&define.amd?define(["exports","fast-unique-numbers"],l):(t=typeof globalThis<"u"?globalThis:t||self,l(t.workerTimersBroker={},t.fastUniqueNumbers))}(e,function(t,l){var h=function(s){return s.method!==void 0&&s.method==="call"},n=function(s){return s.error===null&&typeof s.id=="number"},r=function(s){var i=new Map([[0,function(){}]]),a=new Map([[0,function(){}]]),c=new Map,d=new Worker(s);d.addEventListener("message",function(w){var S=w.data;if(h(S)){var v=S.params,_=v.timerId,x=v.timerType;if(x==="interval"){var M=i.get(_);if(typeof M=="number"){var k=c.get(M);if(k===void 0||k.timerId!==_||k.timerType!==x)throw new Error("The timer is in an undefined state.")}else if(typeof M<"u")M();else throw new Error("The timer is in an undefined state.")}else if(x==="timeout"){var O=a.get(_);if(typeof O=="number"){var P=c.get(O);if(P===void 0||P.timerId!==_||P.timerType!==x)throw new Error("The timer is in an undefined state.")}else if(typeof O<"u")O(),a.delete(_);else throw new Error("The timer is in an undefined state.")}}else if(n(S)){var W=S.id,z=c.get(W);if(z===void 0)throw new Error("The timer is in an undefined state.");var ee=z.timerId,T=z.timerType;c.delete(W),T==="interval"?i.delete(ee):a.delete(ee)}else{var F=S.error.message;throw new Error(F)}});var b=function(w){var S=l.generateUniqueNumber(c);c.set(S,{timerId:w,timerType:"interval"}),i.set(w,S),d.postMessage({id:S,method:"clear",params:{timerId:w,timerType:"interval"}})},y=function(w){var S=l.generateUniqueNumber(c);c.set(S,{timerId:w,timerType:"timeout"}),a.set(w,S),d.postMessage({id:S,method:"clear",params:{timerId:w,timerType:"timeout"}})},g=function(w){var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,v=l.generateUniqueNumber(i);return i.set(v,function(){w(),typeof i.get(v)=="function"&&d.postMessage({id:null,method:"set",params:{delay:S,now:performance.now(),timerId:v,timerType:"interval"}})}),d.postMessage({id:null,method:"set",params:{delay:S,now:performance.now(),timerId:v,timerType:"interval"}}),v},m=function(w){var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,v=l.generateUniqueNumber(a);return a.set(v,w),d.postMessage({id:null,method:"set",params:{delay:S,now:performance.now(),timerId:v,timerType:"timeout"}}),v};return{clearInterval:b,clearTimeout:y,setInterval:g,setTimeout:m}};t.load=r})}),fl=he((e,o)=>{ie(),re(),te(),function(t,l){typeof e=="object"&&typeof o<"u"?l(e,cl()):typeof define=="function"&&define.amd?define(["exports","worker-timers-broker"],l):(t=typeof globalThis<"u"?globalThis:t||self,l(t.workerTimers={},t.workerTimersBroker))}(e,function(t,l){var h=function(d,b){var y=null;return function(){if(y!==null)return y;var g=new Blob([b],{type:"application/javascript; charset=utf-8"}),m=URL.createObjectURL(g);return y=d(m),setTimeout(function(){return URL.revokeObjectURL(m)}),y}},n=`(()=>{var e={472:(e,t,r)=>{var o,i;void 0===(i="function"==typeof(o=function(){"use strict";var e=new Map,t=new Map,r=function(t){var r=e.get(t);if(void 0===r)throw new Error('There is no interval scheduled with the given id "'.concat(t,'".'));clearTimeout(r),e.delete(t)},o=function(e){var r=t.get(e);if(void 0===r)throw new Error('There is no timeout scheduled with the given id "'.concat(e,'".'));clearTimeout(r),t.delete(e)},i=function(e,t){var r,o=performance.now();return{expected:o+(r=e-Math.max(0,o-t)),remainingDelay:r}},n=function e(t,r,o,i){var n=performance.now();n>o?postMessage({id:null,method:"call",params:{timerId:r,timerType:i}}):t.set(r,setTimeout(e,o-n,t,r,o,i))},a=function(t,r,o){var a=i(t,o),s=a.expected,d=a.remainingDelay;e.set(r,setTimeout(n,d,e,r,s,"interval"))},s=function(e,r,o){var a=i(e,o),s=a.expected,d=a.remainingDelay;t.set(r,setTimeout(n,d,t,r,s,"timeout"))};addEventListener("message",(function(e){var t=e.data;try{if("clear"===t.method){var i=t.id,n=t.params,d=n.timerId,c=n.timerType;if("interval"===c)r(d),postMessage({error:null,id:i});else{if("timeout"!==c)throw new Error('The given type "'.concat(c,'" is not supported'));o(d),postMessage({error:null,id:i})}}else{if("set"!==t.method)throw new Error('The given method "'.concat(t.method,'" is not supported'));var u=t.params,l=u.delay,p=u.now,m=u.timerId,v=u.timerType;if("interval"===v)a(l,m,p);else{if("timeout"!==v)throw new Error('The given type "'.concat(v,'" is not supported'));s(l,m,p)}}}catch(e){postMessage({error:{message:e.message},id:t.id,result:null})}}))})?o.call(t,r,t,e):o)||(e.exports=i)}},t={};function r(o){var i=t[o];if(void 0!==i)return i.exports;var n=t[o]={exports:{}};return e[o](n,n.exports,r),n.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";r(472)})()})();`,r=h(l.load,n),s=function(d){return r().clearInterval(d)},i=function(d){return r().clearTimeout(d)},a=function(){var d;return(d=r()).setInterval.apply(d,arguments)},c=function(){var d;return(d=r()).setTimeout.apply(d,arguments)};t.clearInterval=s,t.clearTimeout=i,t.setInterval=a,t.setTimeout=c})}),dl=he(e=>{ie(),re(),te();var o=e&&e.__createBinding||(Object.create?function(a,c,d,b){b===void 0&&(b=d);var y=Object.getOwnPropertyDescriptor(c,d);(!y||("get"in y?!c.__esModule:y.writable||y.configurable))&&(y={enumerable:!0,get:function(){return c[d]}}),Object.defineProperty(a,b,y)}:function(a,c,d,b){b===void 0&&(b=d),a[b]=c[d]}),t=e&&e.__setModuleDefault||(Object.create?function(a,c){Object.defineProperty(a,"default",{enumerable:!0,value:c})}:function(a,c){a.default=c}),l=e&&e.__importStar||function(a){if(a&&a.__esModule)return a;var c={};if(a!=null)for(var d in a)d!=="default"&&Object.prototype.hasOwnProperty.call(a,d)&&o(c,a,d);return t(c,a),c};Object.defineProperty(e,"__esModule",{value:!0});var h=l(yr()),n=fl(),r={set:n.setTimeout,clear:n.clearTimeout},s={set:(a,c)=>setTimeout(a,c),clear:a=>clearTimeout(a)},i=a=>{switch(a){case"native":return s;case"worker":return r;case"auto":default:return h.default&&!h.isWebWorker&&!h.isReactNativeBrowser?r:s}};e.default=i}),ls=he(e=>{ie(),re(),te();var o=e&&e.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(e,"__esModule",{value:!0});var t=o(dl()),l=class{constructor(h,n,r){this.destroyed=!1,this.keepalive=h*1e3,this.checkPing=n,this.timer=(0,t.default)(r),this.reschedule()}clear(){this.timerId&&(this.timer.clear(this.timerId),this.timerId=null)}destroy(){this.clear(),this.destroyed=!0}reschedule(){this.destroyed||(this.clear(),this.timerId=this.timer.set(()=>{this.destroyed||(this.checkPing(),this.reschedule())},this.keepalive))}};e.default=l}),zi=he(e=>{ie(),re(),te();var o=e&&e.__createBinding||(Object.create?function(M,k,O,P){P===void 0&&(P=O);var W=Object.getOwnPropertyDescriptor(k,O);(!W||("get"in W?!k.__esModule:W.writable||W.configurable))&&(W={enumerable:!0,get:function(){return k[O]}}),Object.defineProperty(M,P,W)}:function(M,k,O,P){P===void 0&&(P=O),M[P]=k[O]}),t=e&&e.__setModuleDefault||(Object.create?function(M,k){Object.defineProperty(M,"default",{enumerable:!0,value:k})}:function(M,k){M.default=k}),l=e&&e.__importStar||function(M){if(M&&M.__esModule)return M;var k={};if(M!=null)for(var O in M)O!=="default"&&Object.prototype.hasOwnProperty.call(M,O)&&o(k,M,O);return t(k,M),k},h=e&&e.__importDefault||function(M){return M&&M.__esModule?M:{default:M}};Object.defineProperty(e,"__esModule",{value:!0});var n=h(ra()),r=h(ja()),s=h(Ho()),i=Mt(),a=h(Fa()),c=l(Wa()),d=h(ht()),b=h(zo()),y=h(ll()),g=Gt(),m=ul(),w=h(ls()),S=l(yr()),v=globalThis.setImmediate||((...M)=>{let k=M.shift();(0,g.nextTick)(()=>{k(...M)})}),_={keepalive:60,reschedulePings:!0,protocolId:"MQTT",protocolVersion:4,reconnectPeriod:1e3,connectTimeout:30*1e3,clean:!0,resubscribe:!0,writeCache:!0,timerVariant:"auto"},x=class Ki extends m.TypedEventEmitter{static defaultId(){return`mqttjs_${Math.random().toString(16).substr(2,8)}`}constructor(k,O){super(),this.options=O||{};for(let P in _)typeof this.options[P]>"u"?this.options[P]=_[P]:this.options[P]=O[P];this.log=this.options.log||(0,d.default)("mqttjs:client"),this.noop=this._noop.bind(this),this.log("MqttClient :: version:",Ki.VERSION),S.isWebWorker?this.log("MqttClient :: environment","webworker"):this.log("MqttClient :: environment",S.default?"browser":"node"),this.log("MqttClient :: options.protocol",O.protocol),this.log("MqttClient :: options.protocolVersion",O.protocolVersion),this.log("MqttClient :: options.username",O.username),this.log("MqttClient :: options.keepalive",O.keepalive),this.log("MqttClient :: options.reconnectPeriod",O.reconnectPeriod),this.log("MqttClient :: options.rejectUnauthorized",O.rejectUnauthorized),this.log("MqttClient :: options.properties.topicAliasMaximum",O.properties?O.properties.topicAliasMaximum:void 0),this.options.clientId=typeof O.clientId=="string"?O.clientId:Ki.defaultId(),this.log("MqttClient :: clientId",this.options.clientId),this.options.customHandleAcks=O.protocolVersion===5&&O.customHandleAcks?O.customHandleAcks:(...P)=>{P[3](null,0)},this.options.writeCache||(r.default.writeToStream.cacheNumbers=!1),this.streamBuilder=k,this.messageIdProvider=typeof this.options.messageIdProvider>"u"?new s.default:this.options.messageIdProvider,this.outgoingStore=O.outgoingStore||new b.default,this.incomingStore=O.incomingStore||new b.default,this.queueQoSZero=O.queueQoSZero===void 0?!0:O.queueQoSZero,this._resubscribeTopics={},this.messageIdToTopic={},this.pingTimer=null,this.connected=!1,this.disconnecting=!1,this.reconnecting=!1,this.queue=[],this.connackTimer=null,this.reconnectTimer=null,this._storeProcessing=!1,this._packetIdsDuringStoreProcessing={},this._storeProcessingQueue=[],this.outgoing={},this._firstConnection=!0,O.properties&&O.properties.topicAliasMaximum>0&&(O.properties.topicAliasMaximum>65535?this.log("MqttClient :: options.properties.topicAliasMaximum is out of range"):this.topicAliasRecv=new n.default(O.properties.topicAliasMaximum)),this.on("connect",()=>{let{queue:P}=this,W=()=>{let z=P.shift();this.log("deliver :: entry %o",z);let ee=null;if(!z){this._resubscribe();return}ee=z.packet,this.log("deliver :: call _sendPacket for %o",ee);let T=!0;ee.messageId&&ee.messageId!==0&&(this.messageIdProvider.register(ee.messageId)||(T=!1)),T?this._sendPacket(ee,F=>{z.cb&&z.cb(F),W()}):(this.log("messageId: %d has already used. The message is skipped and removed.",ee.messageId),W())};this.log("connect :: sending queued packets"),W()}),this.on("close",()=>{this.log("close :: connected set to `false`"),this.connected=!1,this.log("close :: clearing connackTimer"),clearTimeout(this.connackTimer),this._destroyPingTimer(),this.topicAliasRecv&&this.topicAliasRecv.clear(),this.log("close :: calling _setupReconnect"),this._setupReconnect()}),this.options.manualConnect||(this.log("MqttClient :: setting up stream"),this.connect())}handleAuth(k,O){O()}handleMessage(k,O){O()}_nextId(){return this.messageIdProvider.allocate()}getLastMessageId(){return this.messageIdProvider.getLastAllocated()}connect(){var k;let O=new i.Writable,P=r.default.parser(this.options),W=null,z=[];this.log("connect :: calling method to clear reconnect"),this._clearReconnect(),this.log("connect :: using streamBuilder provided to client to create stream"),this.stream=this.streamBuilder(this),P.on("packet",V=>{this.log("parser :: on packet push to packets array."),z.push(V)});let ee=()=>{this.log("work :: getting next packet in queue");let V=z.shift();if(V)this.log("work :: packet pulled from queue"),(0,y.default)(this,V,T);else{this.log("work :: no packets in queue");let le=W;W=null,this.log("work :: done flag is %s",!!le),le&&le()}},T=()=>{if(z.length)(0,g.nextTick)(ee);else{let V=W;W=null,V()}};O._write=(V,le,G)=>{W=G,this.log("writable stream :: parsing buffer"),P.parse(V),ee()};let F=V=>{this.log("streamErrorHandler :: error",V.message),V.code?(this.log("streamErrorHandler :: emitting error"),this.emit("error",V)):this.noop(V)};this.log("connect :: pipe stream to writable stream"),this.stream.pipe(O),this.stream.on("error",F),this.stream.on("close",()=>{this.log("(%s)stream :: on close",this.options.clientId),this._flushVolatile(),this.log("stream: emit close to MqttClient"),this.emit("close")}),this.log("connect: sending packet `connect`");let H={cmd:"connect",protocolId:this.options.protocolId,protocolVersion:this.options.protocolVersion,clean:this.options.clean,clientId:this.options.clientId,keepalive:this.options.keepalive,username:this.options.username,password:this.options.password,properties:this.options.properties};if(this.options.will&&(H.will=Object.assign(Object.assign({},this.options.will),{payload:(k=this.options.will)===null||k===void 0?void 0:k.payload})),this.topicAliasRecv&&(H.properties||(H.properties={}),this.topicAliasRecv&&(H.properties.topicAliasMaximum=this.topicAliasRecv.max)),this._writePacket(H),P.on("error",this.emit.bind(this,"error")),this.options.properties){if(!this.options.properties.authenticationMethod&&this.options.properties.authenticationData)return this.end(()=>this.emit("error",new Error("Packet has no Authentication Method"))),this;if(this.options.properties.authenticationMethod&&this.options.authPacket&&typeof this.options.authPacket=="object"){let V=Object.assign({cmd:"auth",reasonCode:0},this.options.authPacket);this._writePacket(V)}}return this.stream.setMaxListeners(1e3),clearTimeout(this.connackTimer),this.connackTimer=setTimeout(()=>{this.log("!!connectTimeout hit!! Calling _cleanUp with force `true`"),this.emit("error",new Error("connack timeout")),this._cleanUp(!0)},this.options.connectTimeout),this}publish(k,O,P,W){this.log("publish :: message `%s` to topic `%s`",O,k);let{options:z}=this;typeof P=="function"&&(W=P,P=null),P=P||{},P=Object.assign(Object.assign({},{qos:0,retain:!1,dup:!1}),P);let{qos:ee,retain:T,dup:F,properties:H,cbStorePut:V}=P;if(this._checkDisconnecting(W))return this;let le=()=>{let G=0;if((ee===1||ee===2)&&(G=this._nextId(),G===null))return this.log("No messageId left"),!1;let D={cmd:"publish",topic:k,payload:O,qos:ee,retain:T,messageId:G,dup:F};switch(z.protocolVersion===5&&(D.properties=H),this.log("publish :: qos",ee),ee){case 1:case 2:this.outgoing[D.messageId]={volatile:!1,cb:W||this.noop},this.log("MqttClient:publish: packet cmd: %s",D.cmd),this._sendPacket(D,void 0,V);break;default:this.log("MqttClient:publish: packet cmd: %s",D.cmd),this._sendPacket(D,W,V);break}return!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!le())&&this._storeProcessingQueue.push({invoke:le,cbStorePut:P.cbStorePut,callback:W}),this}publishAsync(k,O,P){return new Promise((W,z)=>{this.publish(k,O,P,(ee,T)=>{ee?z(ee):W(T)})})}subscribe(k,O,P){let W=this.options.protocolVersion;typeof O=="function"&&(P=O),P=P||this.noop;let z=!1,ee=[];typeof k=="string"?(k=[k],ee=k):Array.isArray(k)?ee=k:typeof k=="object"&&(z=k.resubscribe,delete k.resubscribe,ee=Object.keys(k));let T=c.validateTopics(ee);if(T!==null)return v(P,new Error(`Invalid topic ${T}`)),this;if(this._checkDisconnecting(P))return this.log("subscribe: discconecting true"),this;let F={qos:0};W===5&&(F.nl=!1,F.rap=!1,F.rh=0),O=Object.assign(Object.assign({},F),O);let H=O.properties,V=[],le=(D,de)=>{if(de=de||O,!Object.prototype.hasOwnProperty.call(this._resubscribeTopics,D)||this._resubscribeTopics[D].qos<de.qos||z){let Z={topic:D,qos:de.qos};W===5&&(Z.nl=de.nl,Z.rap=de.rap,Z.rh=de.rh,Z.properties=H),this.log("subscribe: pushing topic `%s` and qos `%s` to subs list",Z.topic,Z.qos),V.push(Z)}};if(Array.isArray(k)?k.forEach(D=>{this.log("subscribe: array topic %s",D),le(D)}):Object.keys(k).forEach(D=>{this.log("subscribe: object topic %s, %o",D,k[D]),le(D,k[D])}),!V.length)return P(null,[]),this;let G=()=>{let D=this._nextId();if(D===null)return this.log("No messageId left"),!1;let de={cmd:"subscribe",subscriptions:V,messageId:D};if(H&&(de.properties=H),this.options.resubscribe){this.log("subscribe :: resubscribe true");let Z=[];V.forEach(ge=>{if(this.options.reconnectPeriod>0){let I={qos:ge.qos};W===5&&(I.nl=ge.nl||!1,I.rap=ge.rap||!1,I.rh=ge.rh||0,I.properties=ge.properties),this._resubscribeTopics[ge.topic]=I,Z.push(ge.topic)}}),this.messageIdToTopic[de.messageId]=Z}return this.outgoing[de.messageId]={volatile:!0,cb(Z,ge){if(!Z){let{granted:I}=ge;for(let K=0;K<I.length;K+=1)V[K].qos=I[K]}P(Z,V)}},this.log("subscribe :: call _sendPacket"),this._sendPacket(de),!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!G())&&this._storeProcessingQueue.push({invoke:G,callback:P}),this}subscribeAsync(k,O){return new Promise((P,W)=>{this.subscribe(k,O,(z,ee)=>{z?W(z):P(ee)})})}unsubscribe(k,O,P){typeof k=="string"&&(k=[k]),typeof O=="function"&&(P=O),P=P||this.noop;let W=c.validateTopics(k);if(W!==null)return v(P,new Error(`Invalid topic ${W}`)),this;if(this._checkDisconnecting(P))return this;let z=()=>{let ee=this._nextId();if(ee===null)return this.log("No messageId left"),!1;let T={cmd:"unsubscribe",messageId:ee,unsubscriptions:[]};return typeof k=="string"?T.unsubscriptions=[k]:Array.isArray(k)&&(T.unsubscriptions=k),this.options.resubscribe&&T.unsubscriptions.forEach(F=>{delete this._resubscribeTopics[F]}),typeof O=="object"&&O.properties&&(T.properties=O.properties),this.outgoing[T.messageId]={volatile:!0,cb:P},this.log("unsubscribe: call _sendPacket"),this._sendPacket(T),!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!z())&&this._storeProcessingQueue.push({invoke:z,callback:P}),this}unsubscribeAsync(k,O){return new Promise((P,W)=>{this.unsubscribe(k,O,(z,ee)=>{z?W(z):P(ee)})})}end(k,O,P){this.log("end :: (%s)",this.options.clientId),(k==null||typeof k!="boolean")&&(P=P||O,O=k,k=!1),typeof O!="object"&&(P=P||O,O=null),this.log("end :: cb? %s",!!P),(!P||typeof P!="function")&&(P=this.noop);let W=()=>{this.log("end :: closeStores: closing incoming and outgoing stores"),this.disconnected=!0,this.incomingStore.close(ee=>{this.outgoingStore.close(T=>{if(this.log("end :: closeStores: emitting end"),this.emit("end"),P){let F=ee||T;this.log("end :: closeStores: invoking callback with args"),P(F)}})}),this._deferredReconnect&&this._deferredReconnect()},z=()=>{this.log("end :: (%s) :: finish :: calling _cleanUp with force %s",this.options.clientId,k),this._cleanUp(k,()=>{this.log("end :: finish :: calling process.nextTick on closeStores"),(0,g.nextTick)(W)},O)};return this.disconnecting?(P(),this):(this._clearReconnect(),this.disconnecting=!0,!k&&Object.keys(this.outgoing).length>0?(this.log("end :: (%s) :: calling finish in 10ms once outgoing is empty",this.options.clientId),this.once("outgoingEmpty",setTimeout.bind(null,z,10))):(this.log("end :: (%s) :: immediately calling finish",this.options.clientId),z()),this)}endAsync(k,O){return new Promise((P,W)=>{this.end(k,O,z=>{z?W(z):P()})})}removeOutgoingMessage(k){if(this.outgoing[k]){let{cb:O}=this.outgoing[k];this._removeOutgoingAndStoreMessage(k,()=>{O(new Error("Message removed"))})}return this}reconnect(k){this.log("client reconnect");let O=()=>{k?(this.options.incomingStore=k.incomingStore,this.options.outgoingStore=k.outgoingStore):(this.options.incomingStore=null,this.options.outgoingStore=null),this.incomingStore=this.options.incomingStore||new b.default,this.outgoingStore=this.options.outgoingStore||new b.default,this.disconnecting=!1,this.disconnected=!1,this._deferredReconnect=null,this._reconnect()};return this.disconnecting&&!this.disconnected?this._deferredReconnect=O:O(),this}_flushVolatile(){this.outgoing&&(this.log("_flushVolatile :: deleting volatile messages from the queue and setting their callbacks as error function"),Object.keys(this.outgoing).forEach(k=>{this.outgoing[k].volatile&&typeof this.outgoing[k].cb=="function"&&(this.outgoing[k].cb(new Error("Connection closed")),delete this.outgoing[k])}))}_flush(){this.outgoing&&(this.log("_flush: queue exists? %b",!!this.outgoing),Object.keys(this.outgoing).forEach(k=>{typeof this.outgoing[k].cb=="function"&&(this.outgoing[k].cb(new Error("Connection closed")),delete this.outgoing[k])}))}_removeTopicAliasAndRecoverTopicName(k){let O;k.properties&&(O=k.properties.topicAlias);let P=k.topic.toString();if(this.log("_removeTopicAliasAndRecoverTopicName :: alias %d, topic %o",O,P),P.length===0){if(typeof O>"u")return new Error("Unregistered Topic Alias");if(P=this.topicAliasSend.getTopicByAlias(O),typeof P>"u")return new Error("Unregistered Topic Alias");k.topic=P}O&&delete k.properties.topicAlias}_checkDisconnecting(k){return this.disconnecting&&(k&&k!==this.noop?k(new Error("client disconnecting")):this.emit("error",new Error("client disconnecting"))),this.disconnecting}_reconnect(){this.log("_reconnect: emitting reconnect to client"),this.emit("reconnect"),this.connected?(this.end(()=>{this.connect()}),this.log("client already connected. disconnecting first.")):(this.log("_reconnect: calling connect"),this.connect())}_setupReconnect(){!this.disconnecting&&!this.reconnectTimer&&this.options.reconnectPeriod>0?(this.reconnecting||(this.log("_setupReconnect :: emit `offline` state"),this.emit("offline"),this.log("_setupReconnect :: set `reconnecting` to `true`"),this.reconnecting=!0),this.log("_setupReconnect :: setting reconnectTimer for %d ms",this.options.reconnectPeriod),this.reconnectTimer=setInterval(()=>{this.log("reconnectTimer :: reconnect triggered!"),this._reconnect()},this.options.reconnectPeriod)):this.log("_setupReconnect :: doing nothing...")}_clearReconnect(){this.log("_clearReconnect : clearing reconnect timer"),this.reconnectTimer&&(clearInterval(this.reconnectTimer),this.reconnectTimer=null)}_cleanUp(k,O,P={}){if(O&&(this.log("_cleanUp :: done callback provided for on stream close"),this.stream.on("close",O)),this.log("_cleanUp :: forced? %s",k),k)this.options.reconnectPeriod===0&&this.options.clean&&this._flush(),this.log("_cleanUp :: (%s) :: destroying stream",this.options.clientId),this.stream.destroy();else{let W=Object.assign({cmd:"disconnect"},P);this.log("_cleanUp :: (%s) :: call _sendPacket with disconnect packet",this.options.clientId),this._sendPacket(W,()=>{this.log("_cleanUp :: (%s) :: destroying stream",this.options.clientId),v(()=>{this.stream.end(()=>{this.log("_cleanUp :: (%s) :: stream destroyed",this.options.clientId)})})})}!this.disconnecting&&!this.reconnecting&&(this.log("_cleanUp :: client not disconnecting/reconnecting. Clearing and resetting reconnect."),this._clearReconnect(),this._setupReconnect()),this._destroyPingTimer(),O&&!this.connected&&(this.log("_cleanUp :: (%s) :: removing stream `done` callback `close` listener",this.options.clientId),this.stream.removeListener("close",O),O())}_storeAndSend(k,O,P){this.log("storeAndSend :: store packet with cmd %s to outgoingStore",k.cmd);let W=k,z;if(W.cmd==="publish"&&(W=(0,a.default)(k),z=this._removeTopicAliasAndRecoverTopicName(W),z))return O&&O(z);this.outgoingStore.put(W,ee=>{if(ee)return O&&O(ee);P(),this._writePacket(k,O)})}_applyTopicAlias(k){if(this.options.protocolVersion===5&&k.cmd==="publish"){let O;k.properties&&(O=k.properties.topicAlias);let P=k.topic.toString();if(this.topicAliasSend)if(O){if(P.length!==0&&(this.log("applyTopicAlias :: register topic: %s - alias: %d",P,O),!this.topicAliasSend.put(P,O)))return this.log("applyTopicAlias :: error out of range. topic: %s - alias: %d",P,O),new Error("Sending Topic Alias out of range")}else P.length!==0&&(this.options.autoAssignTopicAlias?(O=this.topicAliasSend.getAliasByTopic(P),O?(k.topic="",k.properties=Object.assign(Object.assign({},k.properties),{topicAlias:O}),this.log("applyTopicAlias :: auto assign(use) topic: %s - alias: %d",P,O)):(O=this.topicAliasSend.getLruAlias(),this.topicAliasSend.put(P,O),k.properties=Object.assign(Object.assign({},k.properties),{topicAlias:O}),this.log("applyTopicAlias :: auto assign topic: %s - alias: %d",P,O))):this.options.autoUseTopicAlias&&(O=this.topicAliasSend.getAliasByTopic(P),O&&(k.topic="",k.properties=Object.assign(Object.assign({},k.properties),{topicAlias:O}),this.log("applyTopicAlias :: auto use topic: %s - alias: %d",P,O))));else if(O)return this.log("applyTopicAlias :: error out of range. topic: %s - alias: %d",P,O),new Error("Sending Topic Alias out of range")}}_noop(k){this.log("noop ::",k)}_writePacket(k,O){this.log("_writePacket :: packet: %O",k),this.log("_writePacket :: emitting `packetsend`"),this.emit("packetsend",k),this.log("_writePacket :: writing to stream");let P=r.default.writeToStream(k,this.stream,this.options);this.log("_writePacket :: writeToStream result %s",P),!P&&O&&O!==this.noop?(this.log("_writePacket :: handle events on `drain` once through callback."),this.stream.once("drain",O)):O&&(this.log("_writePacket :: invoking cb"),O())}_sendPacket(k,O,P,W){this.log("_sendPacket :: (%s) ::  start",this.options.clientId),P=P||this.noop,O=O||this.noop;let z=this._applyTopicAlias(k);if(z){O(z);return}if(!this.connected){if(k.cmd==="auth"){this._writePacket(k,O);return}this.log("_sendPacket :: client not connected. Storing packet offline."),this._storePacket(k,O,P);return}if(W){this._writePacket(k,O);return}switch(k.cmd){case"publish":break;case"pubrel":this._storeAndSend(k,O,P);return;default:this._writePacket(k,O);return}switch(k.qos){case 2:case 1:this._storeAndSend(k,O,P);break;case 0:default:this._writePacket(k,O);break}this.log("_sendPacket :: (%s) ::  end",this.options.clientId)}_storePacket(k,O,P){this.log("_storePacket :: packet: %o",k),this.log("_storePacket :: cb? %s",!!O),P=P||this.noop;let W=k;if(W.cmd==="publish"){W=(0,a.default)(k);let ee=this._removeTopicAliasAndRecoverTopicName(W);if(ee)return O&&O(ee)}let z=W.qos||0;z===0&&this.queueQoSZero||W.cmd!=="publish"?this.queue.push({packet:W,cb:O}):z>0?(O=this.outgoing[W.messageId]?this.outgoing[W.messageId].cb:null,this.outgoingStore.put(W,ee=>{if(ee)return O&&O(ee);P()})):O&&O(new Error("No connection to broker"))}_setupPingTimer(){this.log("_setupPingTimer :: keepalive %d (seconds)",this.options.keepalive),!this.pingTimer&&this.options.keepalive&&(this.pingTimer=new w.default(this.options.keepalive,()=>{this._checkPing()},this.options.timerVariant),this.pingResp=Date.now())}_destroyPingTimer(){this.pingTimer&&(this.log("_destroyPingTimer :: destroying ping timer"),this.pingTimer.destroy(),this.pingTimer=null)}_shiftPingInterval(){this.pingTimer&&this.options.keepalive&&this.options.reschedulePings&&this._reschedulePing()}_reschedulePing(){this.log("_reschedulePing :: rescheduling ping"),this.pingTimer.reschedule()}_checkPing(){this.log("_checkPing :: checking ping..."),Date.now()-this.pingResp-100<=this.options.keepalive*1e3?(this.log("_checkPing :: ping response received in time"),this._sendPing()):(this.emit("error",new Error("Keepalive timeout")),this.log("_checkPing :: calling _cleanUp with force true"),this._cleanUp(!0))}_sendPing(){this.log("_sendPing :: sending pingreq"),this._sendPacket({cmd:"pingreq"})}_resubscribe(){this.log("_resubscribe");let k=Object.keys(this._resubscribeTopics);if(!this._firstConnection&&(this.options.clean||this.options.protocolVersion>=4&&!this.connackPacket.sessionPresent)&&k.length>0)if(this.options.resubscribe)if(this.options.protocolVersion===5){this.log("_resubscribe: protocolVersion 5");for(let O=0;O<k.length;O++){let P={};P[k[O]]=this._resubscribeTopics[k[O]],P.resubscribe=!0,this.subscribe(P,{properties:P[k[O]].properties})}}else this._resubscribeTopics.resubscribe=!0,this.subscribe(this._resubscribeTopics);else this._resubscribeTopics={};this._firstConnection=!1}_onConnect(k){if(this.disconnected){this.emit("connect",k);return}this.connackPacket=k,this.messageIdProvider.clear(),this._setupPingTimer(),this.connected=!0;let O=()=>{let P=this.outgoingStore.createStream(),W=()=>{P.destroy(),P=null,this._flushStoreProcessingQueue(),z()},z=()=>{this._storeProcessing=!1,this._packetIdsDuringStoreProcessing={}};this.once("close",W),P.on("error",T=>{z(),this._flushStoreProcessingQueue(),this.removeListener("close",W),this.emit("error",T)});let ee=()=>{if(!P)return;let T=P.read(1),F;if(!T){P.once("readable",ee);return}if(this._storeProcessing=!0,this._packetIdsDuringStoreProcessing[T.messageId]){ee();return}!this.disconnecting&&!this.reconnectTimer?(F=this.outgoing[T.messageId]?this.outgoing[T.messageId].cb:null,this.outgoing[T.messageId]={volatile:!1,cb(H,V){F&&F(H,V),ee()}},this._packetIdsDuringStoreProcessing[T.messageId]=!0,this.messageIdProvider.register(T.messageId)?this._sendPacket(T,void 0,void 0,!0):this.log("messageId: %d has already used.",T.messageId)):P.destroy&&P.destroy()};P.on("end",()=>{let T=!0;for(let F in this._packetIdsDuringStoreProcessing)if(!this._packetIdsDuringStoreProcessing[F]){T=!1;break}this.removeListener("close",W),T?(z(),this._invokeAllStoreProcessingQueue(),this.emit("connect",k)):O()}),ee()};O()}_invokeStoreProcessingQueue(){if(!this._storeProcessing&&this._storeProcessingQueue.length>0){let k=this._storeProcessingQueue[0];if(k&&k.invoke())return this._storeProcessingQueue.shift(),!0}return!1}_invokeAllStoreProcessingQueue(){for(;this._invokeStoreProcessingQueue(););}_flushStoreProcessingQueue(){for(let k of this._storeProcessingQueue)k.cbStorePut&&k.cbStorePut(new Error("Connection closed")),k.callback&&k.callback(new Error("Connection closed"));this._storeProcessingQueue.splice(0)}_removeOutgoingAndStoreMessage(k,O){delete this.outgoing[k],this.outgoingStore.del({messageId:k},(P,W)=>{O(P,W),this.messageIdProvider.deallocate(k),this._invokeStoreProcessingQueue()})}};x.VERSION=g.MQTTJS_VERSION,e.default=x}),pl=he(e=>{ie(),re(),te(),Object.defineProperty(e,"__esModule",{value:!0});var o=as(),t=class{constructor(){this.numberAllocator=new o.NumberAllocator(1,65535)}allocate(){return this.lastId=this.numberAllocator.alloc(),this.lastId}getLastAllocated(){return this.lastId}register(l){return this.numberAllocator.use(l)}deallocate(l){this.numberAllocator.free(l)}clear(){this.numberAllocator.clear()}};e.default=t});function Et(e){throw new RangeError(hs[e])}function Mn(e,o){let t=e.split("@"),l="";t.length>1&&(l=t[0]+"@",e=t[1]);let h=function(n,r){let s=[],i=n.length;for(;i--;)s[i]=r(n[i]);return s}((e=e.replace(us,".")).split("."),o).join(".");return l+h}function Un(e){let o=[],t=0,l=e.length;for(;t<l;){let h=e.charCodeAt(t++);if(h>=55296&&h<=56319&&t<l){let n=e.charCodeAt(t++);(64512&n)==56320?o.push(((1023&h)<<10)+(1023&n)+65536):(o.push(h),t--)}else o.push(h)}return o}var Ln,Nn,us,hs,He,Xt,Rr,Cr,Pr,Br,gt,gl=Ue(()=>{ie(),re(),te(),Ln=/^xn--/,Nn=/[^\0-\x7E]/,us=/[\x2E\u3002\uFF0E\uFF61]/g,hs={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},He=Math.floor,Xt=String.fromCharCode,Rr=function(e,o){return e+22+75*(e<26)-((o!=0)<<5)},Cr=function(e,o,t){let l=0;for(e=t?He(e/700):e>>1,e+=He(e/o);e>455;l+=36)e=He(e/35);return He(l+36*e/(e+38))},Pr=function(e){let o=[],t=e.length,l=0,h=128,n=72,r=e.lastIndexOf("-");r<0&&(r=0);for(let i=0;i<r;++i)e.charCodeAt(i)>=128&&Et("not-basic"),o.push(e.charCodeAt(i));for(let i=r>0?r+1:0;i<t;){let a=l;for(let d=1,b=36;;b+=36){i>=t&&Et("invalid-input");let y=(s=e.charCodeAt(i++))-48<10?s-22:s-65<26?s-65:s-97<26?s-97:36;(y>=36||y>He((2147483647-l)/d))&&Et("overflow"),l+=y*d;let g=b<=n?1:b>=n+26?26:b-n;if(y<g)break;let m=36-g;d>He(2147483647/m)&&Et("overflow"),d*=m}let c=o.length+1;n=Cr(l-a,c,a==0),He(l/c)>2147483647-h&&Et("overflow"),h+=He(l/c),l%=c,o.splice(l++,0,h)}var s;return String.fromCodePoint(...o)},Br=function(e){let o=[],t=(e=Un(e)).length,l=128,h=0,n=72;for(let i of e)i<128&&o.push(Xt(i));let r=o.length,s=r;for(r&&o.push("-");s<t;){let i=2147483647;for(let c of e)c>=l&&c<i&&(i=c);let a=s+1;i-l>He((2147483647-h)/a)&&Et("overflow"),h+=(i-l)*a,l=i;for(let c of e)if(c<l&&++h>2147483647&&Et("overflow"),c==l){let d=h;for(let b=36;;b+=36){let y=b<=n?1:b>=n+26?26:b-n;if(d<y)break;let g=d-y,m=36-y;o.push(Xt(Rr(y+g%m,0))),d=He(g/m)}o.push(Xt(Rr(d,0))),n=Cr(h,a,s==r),h=0,++s}++h,++l}return o.join("")},gt={version:"2.1.0",ucs2:{decode:Un,encode:e=>String.fromCodePoint(...e)},decode:Pr,encode:Br,toASCII:function(e){return Mn(e,function(o){return Nn.test(o)?"xn--"+Br(o):o})},toUnicode:function(e){return Mn(e,function(o){return Ln.test(o)?Pr(o.slice(4).toLowerCase()):o})}},gt.decode,gt.encode,gt.toASCII,gt.toUnicode,gt.ucs2,gt.version});function bl(e,o){return Object.prototype.hasOwnProperty.call(e,o)}var jn,Ut,Dn,Ge,ml=Ue(()=>{ie(),re(),te(),jn=function(e,o,t,l){o=o||"&",t=t||"=";var h={};if(typeof e!="string"||e.length===0)return h;var n=/\+/g;e=e.split(o);var r=1e3;l&&typeof l.maxKeys=="number"&&(r=l.maxKeys);var s=e.length;r>0&&s>r&&(s=r);for(var i=0;i<s;++i){var a,c,d,b,y=e[i].replace(n,"%20"),g=y.indexOf(t);g>=0?(a=y.substr(0,g),c=y.substr(g+1)):(a=y,c=""),d=decodeURIComponent(a),b=decodeURIComponent(c),bl(h,d)?Array.isArray(h[d])?h[d].push(b):h[d]=[h[d],b]:h[d]=b}return h},Ut=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}},Dn=function(e,o,t,l){return o=o||"&",t=t||"=",e===null&&(e=void 0),typeof e=="object"?Object.keys(e).map(function(h){var n=encodeURIComponent(Ut(h))+t;return Array.isArray(e[h])?e[h].map(function(r){return n+encodeURIComponent(Ut(r))}).join(o):n+encodeURIComponent(Ut(e[h]))}).join(o):l?encodeURIComponent(Ut(l))+t+encodeURIComponent(Ut(e)):""},Ge={},Ge.decode=Ge.parse=jn,Ge.encode=Ge.stringify=Dn,Ge.decode,Ge.encode,Ge.parse,Ge.stringify});function Qi(){throw new Error("setTimeout has not been defined")}function Yi(){throw new Error("clearTimeout has not been defined")}function cs(e){if(it===setTimeout)return setTimeout(e,0);if((it===Qi||!it)&&setTimeout)return it=setTimeout,setTimeout(e,0);try{return it(e,0)}catch{try{return it.call(null,e,0)}catch{return it.call(this||Rt,e,0)}}}function yl(){Ct&&kt&&(Ct=!1,kt.length?Xe=kt.concat(Xe):Yt=-1,Xe.length&&fs())}function fs(){if(!Ct){var e=cs(yl);Ct=!0;for(var o=Xe.length;o;){for(kt=Xe,Xe=[];++Yt<o;)kt&&kt[Yt].run();Yt=-1,o=Xe.length}kt=null,Ct=!1,function(t){if(nt===clearTimeout)return clearTimeout(t);if((nt===Yi||!nt)&&clearTimeout)return nt=clearTimeout,clearTimeout(t);try{nt(t)}catch{try{return nt.call(null,t)}catch{return nt.call(this||Rt,t)}}}(e)}}function Fn(e,o){(this||Rt).fun=e,(this||Rt).array=o}function et(){}var Wn,it,nt,Rt,Be,kt,Xe,Ct,Yt,Pe,wl=Ue(()=>{ie(),re(),te(),Rt=typeof globalThis<"u"?globalThis:typeof self<"u"?self:global,Be=Wn={},function(){try{it=typeof setTimeout=="function"?setTimeout:Qi}catch{it=Qi}try{nt=typeof clearTimeout=="function"?clearTimeout:Yi}catch{nt=Yi}}(),Xe=[],Ct=!1,Yt=-1,Be.nextTick=function(e){var o=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)o[t-1]=arguments[t];Xe.push(new Fn(e,o)),Xe.length!==1||Ct||cs(fs)},Fn.prototype.run=function(){(this||Rt).fun.apply(null,(this||Rt).array)},Be.title="browser",Be.browser=!0,Be.env={},Be.argv=[],Be.version="",Be.versions={},Be.on=et,Be.addListener=et,Be.once=et,Be.off=et,Be.removeListener=et,Be.removeAllListeners=et,Be.emit=et,Be.prependListener=et,Be.prependOnceListener=et,Be.listeners=function(e){return[]},Be.binding=function(e){throw new Error("process.binding is not supported")},Be.cwd=function(){return"/"},Be.chdir=function(e){throw new Error("process.chdir is not supported")},Be.umask=function(){return 0},Pe=Wn,Pe.addListener,Pe.argv,Pe.binding,Pe.browser,Pe.chdir,Pe.cwd,Pe.emit,Pe.env,Pe.listeners,Pe.nextTick,Pe.off,Pe.on,Pe.once,Pe.prependListener,Pe.prependOnceListener,Pe.removeAllListeners,Pe.removeListener,Pe.title,Pe.umask,Pe.version,Pe.versions});function vl(){if(Gi)return or;Gi=!0;var e=or={},o,t;function l(){throw new Error("setTimeout has not been defined")}function h(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?o=setTimeout:o=l}catch{o=l}try{typeof clearTimeout=="function"?t=clearTimeout:t=h}catch{t=h}})();function n(m){if(o===setTimeout)return setTimeout(m,0);if((o===l||!o)&&setTimeout)return o=setTimeout,setTimeout(m,0);try{return o(m,0)}catch{try{return o.call(null,m,0)}catch{return o.call(this||At,m,0)}}}function r(m){if(t===clearTimeout)return clearTimeout(m);if((t===h||!t)&&clearTimeout)return t=clearTimeout,clearTimeout(m);try{return t(m)}catch{try{return t.call(null,m)}catch{return t.call(this||At,m)}}}var s=[],i=!1,a,c=-1;function d(){!i||!a||(i=!1,a.length?s=a.concat(s):c=-1,s.length&&b())}function b(){if(!i){var m=n(d);i=!0;for(var w=s.length;w;){for(a=s,s=[];++c<w;)a&&a[c].run();c=-1,w=s.length}a=null,i=!1,r(m)}}e.nextTick=function(m){var w=new Array(arguments.length-1);if(arguments.length>1)for(var S=1;S<arguments.length;S++)w[S-1]=arguments[S];s.push(new y(m,w)),s.length===1&&!i&&n(b)};function y(m,w){(this||At).fun=m,(this||At).array=w}y.prototype.run=function(){(this||At).fun.apply(null,(this||At).array)},e.title="browser",e.browser=!0,e.env={},e.argv=[],e.version="",e.versions={};function g(){}return e.on=g,e.addListener=g,e.once=g,e.off=g,e.removeListener=g,e.removeAllListeners=g,e.emit=g,e.prependListener=g,e.prependOnceListener=g,e.listeners=function(m){return[]},e.binding=function(m){throw new Error("process.binding is not supported")},e.cwd=function(){return"/"},e.chdir=function(m){throw new Error("process.chdir is not supported")},e.umask=function(){return 0},or}var or,Gi,At,Oe,ds=Ue(()=>{ie(),re(),te(),or={},Gi=!1,At=typeof globalThis<"u"?globalThis:typeof self<"u"?self:global,Oe=vl(),Oe.platform="browser",Oe.addListener,Oe.argv,Oe.binding,Oe.browser,Oe.chdir,Oe.cwd,Oe.emit,Oe.env,Oe.listeners,Oe.nextTick,Oe.off,Oe.on,Oe.once,Oe.prependListener,Oe.prependOnceListener,Oe.removeAllListeners,Oe.removeListener,Oe.title,Oe.umask,Oe.version,Oe.versions});function _l(){if(Ji)return sr;Ji=!0;var e=Oe;function o(n){if(typeof n!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(n))}function t(n,r){for(var s="",i=0,a=-1,c=0,d,b=0;b<=n.length;++b){if(b<n.length)d=n.charCodeAt(b);else{if(d===47)break;d=47}if(d===47){if(!(a===b-1||c===1))if(a!==b-1&&c===2){if(s.length<2||i!==2||s.charCodeAt(s.length-1)!==46||s.charCodeAt(s.length-2)!==46){if(s.length>2){var y=s.lastIndexOf("/");if(y!==s.length-1){y===-1?(s="",i=0):(s=s.slice(0,y),i=s.length-1-s.lastIndexOf("/")),a=b,c=0;continue}}else if(s.length===2||s.length===1){s="",i=0,a=b,c=0;continue}}r&&(s.length>0?s+="/..":s="..",i=2)}else s.length>0?s+="/"+n.slice(a+1,b):s=n.slice(a+1,b),i=b-a-1;a=b,c=0}else d===46&&c!==-1?++c:c=-1}return s}function l(n,r){var s=r.dir||r.root,i=r.base||(r.name||"")+(r.ext||"");return s?s===r.root?s+i:s+n+i:i}var h={resolve:function(){for(var n="",r=!1,s,i=arguments.length-1;i>=-1&&!r;i--){var a;i>=0?a=arguments[i]:(s===void 0&&(s=e.cwd()),a=s),o(a),a.length!==0&&(n=a+"/"+n,r=a.charCodeAt(0)===47)}return n=t(n,!r),r?n.length>0?"/"+n:"/":n.length>0?n:"."},normalize:function(n){if(o(n),n.length===0)return".";var r=n.charCodeAt(0)===47,s=n.charCodeAt(n.length-1)===47;return n=t(n,!r),n.length===0&&!r&&(n="."),n.length>0&&s&&(n+="/"),r?"/"+n:n},isAbsolute:function(n){return o(n),n.length>0&&n.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var n,r=0;r<arguments.length;++r){var s=arguments[r];o(s),s.length>0&&(n===void 0?n=s:n+="/"+s)}return n===void 0?".":h.normalize(n)},relative:function(n,r){if(o(n),o(r),n===r||(n=h.resolve(n),r=h.resolve(r),n===r))return"";for(var s=1;s<n.length&&n.charCodeAt(s)===47;++s);for(var i=n.length,a=i-s,c=1;c<r.length&&r.charCodeAt(c)===47;++c);for(var d=r.length,b=d-c,y=a<b?a:b,g=-1,m=0;m<=y;++m){if(m===y){if(b>y){if(r.charCodeAt(c+m)===47)return r.slice(c+m+1);if(m===0)return r.slice(c+m)}else a>y&&(n.charCodeAt(s+m)===47?g=m:m===0&&(g=0));break}var w=n.charCodeAt(s+m),S=r.charCodeAt(c+m);if(w!==S)break;w===47&&(g=m)}var v="";for(m=s+g+1;m<=i;++m)(m===i||n.charCodeAt(m)===47)&&(v.length===0?v+="..":v+="/..");return v.length>0?v+r.slice(c+g):(c+=g,r.charCodeAt(c)===47&&++c,r.slice(c))},_makeLong:function(n){return n},dirname:function(n){if(o(n),n.length===0)return".";for(var r=n.charCodeAt(0),s=r===47,i=-1,a=!0,c=n.length-1;c>=1;--c)if(r=n.charCodeAt(c),r===47){if(!a){i=c;break}}else a=!1;return i===-1?s?"/":".":s&&i===1?"//":n.slice(0,i)},basename:function(n,r){if(r!==void 0&&typeof r!="string")throw new TypeError('"ext" argument must be a string');o(n);var s=0,i=-1,a=!0,c;if(r!==void 0&&r.length>0&&r.length<=n.length){if(r.length===n.length&&r===n)return"";var d=r.length-1,b=-1;for(c=n.length-1;c>=0;--c){var y=n.charCodeAt(c);if(y===47){if(!a){s=c+1;break}}else b===-1&&(a=!1,b=c+1),d>=0&&(y===r.charCodeAt(d)?--d===-1&&(i=c):(d=-1,i=b))}return s===i?i=b:i===-1&&(i=n.length),n.slice(s,i)}else{for(c=n.length-1;c>=0;--c)if(n.charCodeAt(c)===47){if(!a){s=c+1;break}}else i===-1&&(a=!1,i=c+1);return i===-1?"":n.slice(s,i)}},extname:function(n){o(n);for(var r=-1,s=0,i=-1,a=!0,c=0,d=n.length-1;d>=0;--d){var b=n.charCodeAt(d);if(b===47){if(!a){s=d+1;break}continue}i===-1&&(a=!1,i=d+1),b===46?r===-1?r=d:c!==1&&(c=1):r!==-1&&(c=-1)}return r===-1||i===-1||c===0||c===1&&r===i-1&&r===s+1?"":n.slice(r,i)},format:function(n){if(n===null||typeof n!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof n);return l("/",n)},parse:function(n){o(n);var r={root:"",dir:"",base:"",ext:"",name:""};if(n.length===0)return r;var s=n.charCodeAt(0),i=s===47,a;i?(r.root="/",a=1):a=0;for(var c=-1,d=0,b=-1,y=!0,g=n.length-1,m=0;g>=a;--g){if(s=n.charCodeAt(g),s===47){if(!y){d=g+1;break}continue}b===-1&&(y=!1,b=g+1),s===46?c===-1?c=g:m!==1&&(m=1):c!==-1&&(m=-1)}return c===-1||b===-1||m===0||m===1&&c===b-1&&c===d+1?b!==-1&&(d===0&&i?r.base=r.name=n.slice(1,b):r.base=r.name=n.slice(d,b)):(d===0&&i?(r.name=n.slice(1,c),r.base=n.slice(1,b)):(r.name=n.slice(d,c),r.base=n.slice(d,b)),r.ext=n.slice(c,b)),d>0?r.dir=n.slice(0,d-1):i&&(r.dir="/"),r},sep:"/",delimiter:":",win32:null,posix:null};return h.posix=h,sr=h,sr}var sr,Ji,Xi,El=Ue(()=>{ie(),re(),te(),ds(),sr={},Ji=!1,Xi=_l()}),ps={};Pt(ps,{URL:()=>Bs,Url:()=>ks,default:()=>Ee,fileURLToPath:()=>gs,format:()=>Os,parse:()=>Ps,pathToFileURL:()=>bs,resolve:()=>Rs,resolveObject:()=>Cs});function Ve(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function Vt(e,o,t){if(e&&Ke.isObject(e)&&e instanceof Ve)return e;var l=new Ve;return l.parse(e,o,t),l}function Sl(){if(Zi)return ar;Zi=!0;var e=Pe;function o(n){if(typeof n!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(n))}function t(n,r){for(var s="",i=0,a=-1,c=0,d,b=0;b<=n.length;++b){if(b<n.length)d=n.charCodeAt(b);else{if(d===47)break;d=47}if(d===47){if(!(a===b-1||c===1))if(a!==b-1&&c===2){if(s.length<2||i!==2||s.charCodeAt(s.length-1)!==46||s.charCodeAt(s.length-2)!==46){if(s.length>2){var y=s.lastIndexOf("/");if(y!==s.length-1){y===-1?(s="",i=0):(s=s.slice(0,y),i=s.length-1-s.lastIndexOf("/")),a=b,c=0;continue}}else if(s.length===2||s.length===1){s="",i=0,a=b,c=0;continue}}r&&(s.length>0?s+="/..":s="..",i=2)}else s.length>0?s+="/"+n.slice(a+1,b):s=n.slice(a+1,b),i=b-a-1;a=b,c=0}else d===46&&c!==-1?++c:c=-1}return s}function l(n,r){var s=r.dir||r.root,i=r.base||(r.name||"")+(r.ext||"");return s?s===r.root?s+i:s+n+i:i}var h={resolve:function(){for(var n="",r=!1,s,i=arguments.length-1;i>=-1&&!r;i--){var a;i>=0?a=arguments[i]:(s===void 0&&(s=e.cwd()),a=s),o(a),a.length!==0&&(n=a+"/"+n,r=a.charCodeAt(0)===47)}return n=t(n,!r),r?n.length>0?"/"+n:"/":n.length>0?n:"."},normalize:function(n){if(o(n),n.length===0)return".";var r=n.charCodeAt(0)===47,s=n.charCodeAt(n.length-1)===47;return n=t(n,!r),n.length===0&&!r&&(n="."),n.length>0&&s&&(n+="/"),r?"/"+n:n},isAbsolute:function(n){return o(n),n.length>0&&n.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var n,r=0;r<arguments.length;++r){var s=arguments[r];o(s),s.length>0&&(n===void 0?n=s:n+="/"+s)}return n===void 0?".":h.normalize(n)},relative:function(n,r){if(o(n),o(r),n===r||(n=h.resolve(n),r=h.resolve(r),n===r))return"";for(var s=1;s<n.length&&n.charCodeAt(s)===47;++s);for(var i=n.length,a=i-s,c=1;c<r.length&&r.charCodeAt(c)===47;++c);for(var d=r.length,b=d-c,y=a<b?a:b,g=-1,m=0;m<=y;++m){if(m===y){if(b>y){if(r.charCodeAt(c+m)===47)return r.slice(c+m+1);if(m===0)return r.slice(c+m)}else a>y&&(n.charCodeAt(s+m)===47?g=m:m===0&&(g=0));break}var w=n.charCodeAt(s+m),S=r.charCodeAt(c+m);if(w!==S)break;w===47&&(g=m)}var v="";for(m=s+g+1;m<=i;++m)(m===i||n.charCodeAt(m)===47)&&(v.length===0?v+="..":v+="/..");return v.length>0?v+r.slice(c+g):(c+=g,r.charCodeAt(c)===47&&++c,r.slice(c))},_makeLong:function(n){return n},dirname:function(n){if(o(n),n.length===0)return".";for(var r=n.charCodeAt(0),s=r===47,i=-1,a=!0,c=n.length-1;c>=1;--c)if(r=n.charCodeAt(c),r===47){if(!a){i=c;break}}else a=!1;return i===-1?s?"/":".":s&&i===1?"//":n.slice(0,i)},basename:function(n,r){if(r!==void 0&&typeof r!="string")throw new TypeError('"ext" argument must be a string');o(n);var s=0,i=-1,a=!0,c;if(r!==void 0&&r.length>0&&r.length<=n.length){if(r.length===n.length&&r===n)return"";var d=r.length-1,b=-1;for(c=n.length-1;c>=0;--c){var y=n.charCodeAt(c);if(y===47){if(!a){s=c+1;break}}else b===-1&&(a=!1,b=c+1),d>=0&&(y===r.charCodeAt(d)?--d===-1&&(i=c):(d=-1,i=b))}return s===i?i=b:i===-1&&(i=n.length),n.slice(s,i)}else{for(c=n.length-1;c>=0;--c)if(n.charCodeAt(c)===47){if(!a){s=c+1;break}}else i===-1&&(a=!1,i=c+1);return i===-1?"":n.slice(s,i)}},extname:function(n){o(n);for(var r=-1,s=0,i=-1,a=!0,c=0,d=n.length-1;d>=0;--d){var b=n.charCodeAt(d);if(b===47){if(!a){s=d+1;break}continue}i===-1&&(a=!1,i=d+1),b===46?r===-1?r=d:c!==1&&(c=1):r!==-1&&(c=-1)}return r===-1||i===-1||c===0||c===1&&r===i-1&&r===s+1?"":n.slice(r,i)},format:function(n){if(n===null||typeof n!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof n);return l("/",n)},parse:function(n){o(n);var r={root:"",dir:"",base:"",ext:"",name:""};if(n.length===0)return r;var s=n.charCodeAt(0),i=s===47,a;i?(r.root="/",a=1):a=0;for(var c=-1,d=0,b=-1,y=!0,g=n.length-1,m=0;g>=a;--g){if(s=n.charCodeAt(g),s===47){if(!y){d=g+1;break}continue}b===-1&&(y=!1,b=g+1),s===46?c===-1?c=g:m!==1&&(m=1):c!==-1&&(m=-1)}return c===-1||b===-1||m===0||m===1&&c===b-1&&c===d+1?b!==-1&&(d===0&&i?r.base=r.name=n.slice(1,b):r.base=r.name=n.slice(d,b)):(d===0&&i?(r.name=n.slice(1,c),r.base=n.slice(1,b)):(r.name=n.slice(d,c),r.base=n.slice(d,b)),r.ext=n.slice(c,b)),d>0?r.dir=n.slice(0,d-1):i&&(r.dir="/"),r},sep:"/",delimiter:":",win32:null,posix:null};return h.posix=h,ar=h,ar}function Al(e){if(typeof e=="string")e=new URL(e);else if(!(e instanceof URL))throw new Deno.errors.InvalidData("invalid argument path , must be a string or URL");if(e.protocol!=="file:")throw new Deno.errors.InvalidData("invalid url scheme");return cr?Il(e):Tl(e)}function Il(e){let o=e.hostname,t=e.pathname;for(let l=0;l<t.length;l++)if(t[l]==="%"){let h=t.codePointAt(l+2)||32;if(t[l+1]==="2"&&h===102||t[l+1]==="5"&&h===99)throw new Deno.errors.InvalidData("must not include encoded \\ or / characters")}if(t=t.replace(_s,"\\"),t=decodeURIComponent(t),o!=="")return`\\\\${o}${t}`;{let l=t.codePointAt(1)|32,h=t[2];if(l<ws||l>vs||h!==":")throw new Deno.errors.InvalidData("file url path must be absolute");return t.slice(1)}}function Tl(e){if(e.hostname!=="")throw new Deno.errors.InvalidData("invalid file url hostname");let o=e.pathname;for(let t=0;t<o.length;t++)if(o[t]==="%"){let l=o.codePointAt(t+2)||32;if(o[t+1]==="2"&&l===102)throw new Deno.errors.InvalidData("must not include encoded / characters")}return decodeURIComponent(o)}function kl(e){let o=en.resolve(e),t=e.charCodeAt(e.length-1);(t===ys||cr&&t===ms)&&o[o.length-1]!==en.sep&&(o+="/");let l=new URL("file://");return o.includes("%")&&(o=o.replace(Es,"%25")),!cr&&o.includes("\\")&&(o=o.replace(Ss,"%5C")),o.includes(`
`)&&(o=o.replace(As,"%0A")),o.includes("\r")&&(o=o.replace(Is,"%0D")),o.includes("	")&&(o=o.replace(Ts,"%09")),l.pathname=o,l}function gs(e){if(typeof e=="string")e=new URL(e);else if(!(e instanceof URL))throw new Deno.errors.InvalidData("invalid argument path , must be a string or URL");if(e.protocol!=="file:")throw new Deno.errors.InvalidData("invalid url scheme");return fr?Ol(e):Rl(e)}function Ol(e){let o=e.hostname,t=e.pathname;for(let l=0;l<t.length;l++)if(t[l]==="%"){let h=t.codePointAt(l+2)||32;if(t[l+1]==="2"&&h===102||t[l+1]==="5"&&h===99)throw new Deno.errors.InvalidData("must not include encoded \\ or / characters")}if(t=t.replace(Ns,"\\"),t=decodeURIComponent(t),o!=="")return`\\\\${o}${t}`;{let l=t.codePointAt(1)|32,h=t[2];if(l<Us||l>Ls||h!==":")throw new Deno.errors.InvalidData("file url path must be absolute");return t.slice(1)}}function Rl(e){if(e.hostname!=="")throw new Deno.errors.InvalidData("invalid file url hostname");let o=e.pathname;for(let t=0;t<o.length;t++)if(o[t]==="%"){let l=o.codePointAt(t+2)||32;if(o[t+1]==="2"&&l===102)throw new Deno.errors.InvalidData("must not include encoded / characters")}return decodeURIComponent(o)}function bs(e){let o=Xi.resolve(e),t=e.charCodeAt(e.length-1);(t===Ms||fr&&t===xs)&&o[o.length-1]!==Xi.sep&&(o+="/");let l=new URL("file://");return o.includes("%")&&(o=o.replace(js,"%25")),!fr&&o.includes("\\")&&(o=o.replace(Ds,"%5C")),o.includes(`
`)&&(o=o.replace(Fs,"%0A")),o.includes("\r")&&(o=o.replace(Ws,"%0D")),o.includes("	")&&(o=o.replace($s,"%09")),l.pathname=o,l}var Ee,$n,Ke,qn,Vn,Hn,zn,Zt,xr,Mr,Ur,Kn,Qn,er,St,tr,ar,Zi,en,Yn,ms,ys,ws,vs,cr,_s,Es,Ss,As,Is,Ts,Gn,ks,Os,Rs,Cs,Ps,Bs,xs,Ms,Us,Ls,fr,Ns,js,Ds,Fs,Ws,$s,Cl=Ue(()=>{ie(),re(),te(),gl(),ml(),wl(),El(),ds(),Ee={},$n=gt,Ke={isString:function(e){return typeof e=="string"},isObject:function(e){return typeof e=="object"&&e!==null},isNull:function(e){return e===null},isNullOrUndefined:function(e){return e==null}},Ee.parse=Vt,Ee.resolve=function(e,o){return Vt(e,!1,!0).resolve(o)},Ee.resolveObject=function(e,o){return e?Vt(e,!1,!0).resolveObject(o):o},Ee.format=function(e){return Ke.isString(e)&&(e=Vt(e)),e instanceof Ve?e.format():Ve.prototype.format.call(e)},Ee.Url=Ve,qn=/^([a-z0-9.+-]+:)/i,Vn=/:[0-9]*$/,Hn=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,zn=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r",`
`,"	"]),Zt=["'"].concat(zn),xr=["%","/","?",";","#"].concat(Zt),Mr=["/","?","#"],Ur=/^[+a-z0-9A-Z_-]{0,63}$/,Kn=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,Qn={javascript:!0,"javascript:":!0},er={javascript:!0,"javascript:":!0},St={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},tr=Ge,Ve.prototype.parse=function(e,o,t){if(!Ke.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var l=e.indexOf("?"),h=l!==-1&&l<e.indexOf("#")?"?":"#",n=e.split(h);n[0]=n[0].replace(/\\/g,"/");var r=e=n.join(h);if(r=r.trim(),!t&&e.split("#").length===1){var s=Hn.exec(r);if(s)return this.path=r,this.href=r,this.pathname=s[1],s[2]?(this.search=s[2],this.query=o?tr.parse(this.search.substr(1)):this.search.substr(1)):o&&(this.search="",this.query={}),this}var i=qn.exec(r);if(i){var a=(i=i[0]).toLowerCase();this.protocol=a,r=r.substr(i.length)}if(t||i||r.match(/^\/\/[^@\/]+@[^@\/]+/)){var c=r.substr(0,2)==="//";!c||i&&er[i]||(r=r.substr(2),this.slashes=!0)}if(!er[i]&&(c||i&&!St[i])){for(var d,b,y=-1,g=0;g<Mr.length;g++)(m=r.indexOf(Mr[g]))!==-1&&(y===-1||m<y)&&(y=m);for((b=y===-1?r.lastIndexOf("@"):r.lastIndexOf("@",y))!==-1&&(d=r.slice(0,b),r=r.slice(b+1),this.auth=decodeURIComponent(d)),y=-1,g=0;g<xr.length;g++){var m;(m=r.indexOf(xr[g]))!==-1&&(y===-1||m<y)&&(y=m)}y===-1&&(y=r.length),this.host=r.slice(0,y),r=r.slice(y),this.parseHost(),this.hostname=this.hostname||"";var w=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!w)for(var S=this.hostname.split(/\./),v=(g=0,S.length);g<v;g++){var _=S[g];if(_&&!_.match(Ur)){for(var x="",M=0,k=_.length;M<k;M++)_.charCodeAt(M)>127?x+="x":x+=_[M];if(!x.match(Ur)){var O=S.slice(0,g),P=S.slice(g+1),W=_.match(Kn);W&&(O.push(W[1]),P.unshift(W[2])),P.length&&(r="/"+P.join(".")+r),this.hostname=O.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),w||(this.hostname=$n.toASCII(this.hostname));var z=this.port?":"+this.port:"",ee=this.hostname||"";this.host=ee+z,this.href+=this.host,w&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),r[0]!=="/"&&(r="/"+r))}if(!Qn[a])for(g=0,v=Zt.length;g<v;g++){var T=Zt[g];if(r.indexOf(T)!==-1){var F=encodeURIComponent(T);F===T&&(F=escape(T)),r=r.split(T).join(F)}}var H=r.indexOf("#");H!==-1&&(this.hash=r.substr(H),r=r.slice(0,H));var V=r.indexOf("?");if(V!==-1?(this.search=r.substr(V),this.query=r.substr(V+1),o&&(this.query=tr.parse(this.query)),r=r.slice(0,V)):o&&(this.search="",this.query={}),r&&(this.pathname=r),St[a]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){z=this.pathname||"";var le=this.search||"";this.path=z+le}return this.href=this.format(),this},Ve.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var o=this.protocol||"",t=this.pathname||"",l=this.hash||"",h=!1,n="";this.host?h=e+this.host:this.hostname&&(h=e+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(h+=":"+this.port)),this.query&&Ke.isObject(this.query)&&Object.keys(this.query).length&&(n=tr.stringify(this.query));var r=this.search||n&&"?"+n||"";return o&&o.substr(-1)!==":"&&(o+=":"),this.slashes||(!o||St[o])&&h!==!1?(h="//"+(h||""),t&&t.charAt(0)!=="/"&&(t="/"+t)):h||(h=""),l&&l.charAt(0)!=="#"&&(l="#"+l),r&&r.charAt(0)!=="?"&&(r="?"+r),o+h+(t=t.replace(/[?#]/g,function(s){return encodeURIComponent(s)}))+(r=r.replace("#","%23"))+l},Ve.prototype.resolve=function(e){return this.resolveObject(Vt(e,!1,!0)).format()},Ve.prototype.resolveObject=function(e){if(Ke.isString(e)){var o=new Ve;o.parse(e,!1,!0),e=o}for(var t=new Ve,l=Object.keys(this),h=0;h<l.length;h++){var n=l[h];t[n]=this[n]}if(t.hash=e.hash,e.href==="")return t.href=t.format(),t;if(e.slashes&&!e.protocol){for(var r=Object.keys(e),s=0;s<r.length;s++){var i=r[s];i!=="protocol"&&(t[i]=e[i])}return St[t.protocol]&&t.hostname&&!t.pathname&&(t.path=t.pathname="/"),t.href=t.format(),t}if(e.protocol&&e.protocol!==t.protocol){if(!St[e.protocol]){for(var a=Object.keys(e),c=0;c<a.length;c++){var d=a[c];t[d]=e[d]}return t.href=t.format(),t}if(t.protocol=e.protocol,e.host||er[e.protocol])t.pathname=e.pathname;else{for(var b=(e.pathname||"").split("/");b.length&&!(e.host=b.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),b[0]!==""&&b.unshift(""),b.length<2&&b.unshift(""),t.pathname=b.join("/")}if(t.search=e.search,t.query=e.query,t.host=e.host||"",t.auth=e.auth,t.hostname=e.hostname||e.host,t.port=e.port,t.pathname||t.search){var y=t.pathname||"",g=t.search||"";t.path=y+g}return t.slashes=t.slashes||e.slashes,t.href=t.format(),t}var m=t.pathname&&t.pathname.charAt(0)==="/",w=e.host||e.pathname&&e.pathname.charAt(0)==="/",S=w||m||t.host&&e.pathname,v=S,_=t.pathname&&t.pathname.split("/")||[],x=(b=e.pathname&&e.pathname.split("/")||[],t.protocol&&!St[t.protocol]);if(x&&(t.hostname="",t.port=null,t.host&&(_[0]===""?_[0]=t.host:_.unshift(t.host)),t.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(b[0]===""?b[0]=e.host:b.unshift(e.host)),e.host=null),S=S&&(b[0]===""||_[0]==="")),w)t.host=e.host||e.host===""?e.host:t.host,t.hostname=e.hostname||e.hostname===""?e.hostname:t.hostname,t.search=e.search,t.query=e.query,_=b;else if(b.length)_||(_=[]),_.pop(),_=_.concat(b),t.search=e.search,t.query=e.query;else if(!Ke.isNullOrUndefined(e.search))return x&&(t.hostname=t.host=_.shift(),(W=!!(t.host&&t.host.indexOf("@")>0)&&t.host.split("@"))&&(t.auth=W.shift(),t.host=t.hostname=W.shift())),t.search=e.search,t.query=e.query,Ke.isNull(t.pathname)&&Ke.isNull(t.search)||(t.path=(t.pathname?t.pathname:"")+(t.search?t.search:"")),t.href=t.format(),t;if(!_.length)return t.pathname=null,t.search?t.path="/"+t.search:t.path=null,t.href=t.format(),t;for(var M=_.slice(-1)[0],k=(t.host||e.host||_.length>1)&&(M==="."||M==="..")||M==="",O=0,P=_.length;P>=0;P--)(M=_[P])==="."?_.splice(P,1):M===".."?(_.splice(P,1),O++):O&&(_.splice(P,1),O--);if(!S&&!v)for(;O--;O)_.unshift("..");!S||_[0]===""||_[0]&&_[0].charAt(0)==="/"||_.unshift(""),k&&_.join("/").substr(-1)!=="/"&&_.push("");var W,z=_[0]===""||_[0]&&_[0].charAt(0)==="/";return x&&(t.hostname=t.host=z?"":_.length?_.shift():"",(W=!!(t.host&&t.host.indexOf("@")>0)&&t.host.split("@"))&&(t.auth=W.shift(),t.host=t.hostname=W.shift())),(S=S||t.host&&_.length)&&!z&&_.unshift(""),_.length?t.pathname=_.join("/"):(t.pathname=null,t.path=null),Ke.isNull(t.pathname)&&Ke.isNull(t.search)||(t.path=(t.pathname?t.pathname:"")+(t.search?t.search:"")),t.auth=e.auth||t.auth,t.slashes=t.slashes||e.slashes,t.href=t.format(),t},Ve.prototype.parseHost=function(){var e=this.host,o=Vn.exec(e);o&&((o=o[0])!==":"&&(this.port=o.substr(1)),e=e.substr(0,e.length-o.length)),e&&(this.hostname=e)},Ee.Url,Ee.format,Ee.resolve,Ee.resolveObject,ar={},Zi=!1,en=Sl(),Yn=typeof Deno<"u"?Deno.build.os==="windows"?"win32":Deno.build.os:void 0,Ee.URL=typeof URL<"u"?URL:null,Ee.pathToFileURL=kl,Ee.fileURLToPath=Al,Ee.Url,Ee.format,Ee.resolve,Ee.resolveObject,Ee.URL,ms=92,ys=47,ws=97,vs=122,cr=Yn==="win32",_s=/\//g,Es=/%/g,Ss=/\\/g,As=/\n/g,Is=/\r/g,Ts=/\t/g,Gn=typeof Deno<"u"?Deno.build.os==="windows"?"win32":Deno.build.os:void 0,Ee.URL=typeof URL<"u"?URL:null,Ee.pathToFileURL=bs,Ee.fileURLToPath=gs,ks=Ee.Url,Os=Ee.format,Rs=Ee.resolve,Cs=Ee.resolveObject,Ps=Ee.parse,Bs=Ee.URL,xs=92,Ms=47,Us=97,Ls=122,fr=Gn==="win32",Ns=/\//g,js=/%/g,Ds=/\\/g,Fs=/\n/g,Ws=/\r/g,$s=/\t/g}),fn={};Pt(fn,{Server:()=>Re,Socket:()=>Re,Stream:()=>Re,_createServerHandle:()=>Re,_normalizeArgs:()=>Re,_setSimultaneousAccepts:()=>Re,connect:()=>Re,createConnection:()=>Re,createServer:()=>Re,default:()=>qs,isIP:()=>Re,isIPv4:()=>Re,isIPv6:()=>Re});function Re(){throw new Error("Node.js net module is not supported by JSPM core outside of Node.js")}var qs,Vs=Ue(()=>{ie(),re(),te(),qs={_createServerHandle:Re,_normalizeArgs:Re,_setSimultaneousAccepts:Re,connect:Re,createConnection:Re,createServer:Re,isIP:Re,isIPv4:Re,isIPv6:Re,Server:Re,Socket:Re,Stream:Re}}),Jn=he(e=>{ie(),re(),te();var o=e&&e.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(e,"__esModule",{value:!0});var t=o((Vs(),Ie(fn))),l=o(ht()),h=(0,l.default)("mqttjs:tcp"),n=(r,s)=>{s.port=s.port||1883,s.hostname=s.hostname||s.host||"localhost";let{port:i,path:a}=s,c=s.hostname;return h("port %d and host %s",i,c),t.default.createConnection({port:i,host:c,path:a})};e.default=n}),Hs={};Pt(Hs,{default:()=>zs});var zs,Pl=Ue(()=>{ie(),re(),te(),zs={}}),Xn=he(e=>{ie(),re(),te();var o=e&&e.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(e,"__esModule",{value:!0});var t=o((Pl(),Ie(Hs))),l=o((Vs(),Ie(fn))),h=o(ht()),n=(0,h.default)("mqttjs:tls"),r=(s,i)=>{i.port=i.port||8883,i.host=i.hostname||i.host||"localhost",l.default.isIP(i.host)===0&&(i.servername=i.host),i.rejectUnauthorized=i.rejectUnauthorized!==!1,delete i.path,n("port %d host %s rejectUnauthorized %b",i.port,i.host,i.rejectUnauthorized);let a=t.default.connect(i);a.on("secureConnect",()=>{i.rejectUnauthorized&&!a.authorized?a.emit("error",new Error("TLS not authorized")):a.removeListener("error",c)});function c(d){i.rejectUnauthorized&&s.emit("error",d),a.end()}return a.on("error",c),a};e.default=r}),dn=he(e=>{ie(),re(),te(),Object.defineProperty(e,"__esModule",{value:!0}),e.BufferedDuplex=e.writev=void 0;var o=Mt(),t=(Ne(),Ie(Le));function l(n,r){let s=new Array(n.length);for(let i=0;i<n.length;i++)typeof n[i].chunk=="string"?s[i]=t.Buffer.from(n[i].chunk,"utf8"):s[i]=n[i].chunk;this._write(t.Buffer.concat(s),"binary",r)}e.writev=l;var h=class extends o.Duplex{constructor(n,r,s){super({objectMode:!0}),this.proxy=r,this.socket=s,this.writeQueue=[],n.objectMode||(this._writev=l.bind(this)),this.isSocketOpen=!1,this.proxy.on("data",i=>{this.push(i)})}_read(n){this.proxy.read(n)}_write(n,r,s){this.isSocketOpen?this.writeToProxy(n,r,s):this.writeQueue.push({chunk:n,encoding:r,cb:s})}_final(n){this.writeQueue=[],this.proxy.end(n)}_destroy(n,r){this.writeQueue=[],this.proxy.destroy(),r(n)}socketReady(){this.emit("connect"),this.isSocketOpen=!0,this.processWriteQueue()}writeToProxy(n,r,s){this.proxy.write(n,r)===!1?this.proxy.once("drain",s):s()}processWriteQueue(){for(;this.writeQueue.length>0;){let{chunk:n,encoding:r,cb:s}=this.writeQueue.shift();this.writeToProxy(n,r,s)}}};e.BufferedDuplex=h}),Zn=he(e=>{ie(),re(),te(),Object.defineProperty(e,"__esModule",{value:!0});var o=(Ne(),Ie(Le)),t=Mt(),l=dn(),h,n,r;function s(){let b=new t.Transform;return b._write=(y,g,m)=>{h.send({data:y.buffer,success(){m()},fail(w){m(new Error(w))}})},b._flush=y=>{h.close({success(){y()}})},b}function i(b){b.hostname||(b.hostname="localhost"),b.path||(b.path="/"),b.wsOptions||(b.wsOptions={})}function a(b,y){let g=b.protocol==="wxs"?"wss":"ws",m=`${g}://${b.hostname}${b.path}`;return b.port&&b.port!==80&&b.port!==443&&(m=`${g}://${b.hostname}:${b.port}${b.path}`),typeof b.transformWsUrl=="function"&&(m=b.transformWsUrl(m,b,y)),m}function c(){h.onOpen(()=>{r.socketReady()}),h.onMessage(b=>{let{data:y}=b;y instanceof ArrayBuffer?y=o.Buffer.from(y):y=o.Buffer.from(y,"utf8"),n.push(y)}),h.onClose(()=>{r.emit("close"),r.end(),r.destroy()}),h.onError(b=>{let y=new Error(b.errMsg);r.destroy(y)})}var d=(b,y)=>{if(y.hostname=y.hostname||y.host,!y.hostname)throw new Error("Could not determine host. Specify host manually.");let g=y.protocolId==="MQIsdp"&&y.protocolVersion===3?"mqttv3.1":"mqtt";i(y);let m=a(y,b);h=wx.connectSocket({url:m,protocols:[g]}),n=s(),r=new l.BufferedDuplex(y,n,h),r._destroy=(S,v)=>{h.close({success(){v&&v(S)}})};let w=r.destroy;return r.destroy=(S,v)=>(r.destroy=w,setTimeout(()=>{h.close({fail(){r._destroy(S,v)}})},0),r),c(),r};e.default=d}),eo=he(e=>{ie(),re(),te(),Object.defineProperty(e,"__esModule",{value:!0});var o=(Ne(),Ie(Le)),t=Mt(),l=dn(),h,n,r,s=!1;function i(){let y=new t.Transform;return y._write=(g,m,w)=>{h.sendSocketMessage({data:g.buffer,success(){w()},fail(){w(new Error)}})},y._flush=g=>{h.closeSocket({success(){g()}})},y}function a(y){y.hostname||(y.hostname="localhost"),y.path||(y.path="/"),y.wsOptions||(y.wsOptions={})}function c(y,g){let m=y.protocol==="alis"?"wss":"ws",w=`${m}://${y.hostname}${y.path}`;return y.port&&y.port!==80&&y.port!==443&&(w=`${m}://${y.hostname}:${y.port}${y.path}`),typeof y.transformWsUrl=="function"&&(w=y.transformWsUrl(w,y,g)),w}function d(){s||(s=!0,h.onSocketOpen(()=>{r.socketReady()}),h.onSocketMessage(y=>{if(typeof y.data=="string"){let g=o.Buffer.from(y.data,"base64");n.push(g)}else{let g=new FileReader;g.addEventListener("load",()=>{let m=g.result;m instanceof ArrayBuffer?m=o.Buffer.from(m):m=o.Buffer.from(m,"utf8"),n.push(m)}),g.readAsArrayBuffer(y.data)}}),h.onSocketClose(()=>{r.end(),r.destroy()}),h.onSocketError(y=>{r.destroy(y)}))}var b=(y,g)=>{if(g.hostname=g.hostname||g.host,!g.hostname)throw new Error("Could not determine host. Specify host manually.");let m=g.protocolId==="MQIsdp"&&g.protocolVersion===3?"mqttv3.1":"mqtt";a(g);let w=c(g,y);return h=g.my,h.connectSocket({url:w,protocols:m}),n=i(),r=new l.BufferedDuplex(g,n,h),d(),r};e.default=b}),Bl=he((e,o)=>{ie(),re(),te(),o.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}}),to=he(e=>{ie(),re(),te();var o=e&&e.__importDefault||function(S){return S&&S.__esModule?S:{default:S}};Object.defineProperty(e,"__esModule",{value:!0});var t=(Ne(),Ie(Le)),l=o(Bl()),h=o(ht()),n=Mt(),r=o(yr()),s=dn(),i=(0,h.default)("mqttjs:ws"),a=["rejectUnauthorized","ca","cert","key","pfx","passphrase"];function c(S,v){let _=`${S.protocol}://${S.hostname}:${S.port}${S.path}`;return typeof S.transformWsUrl=="function"&&(_=S.transformWsUrl(_,S,v)),_}function d(S){let v=S;return S.hostname||(v.hostname="localhost"),S.port||(S.protocol==="wss"?v.port=443:v.port=80),S.path||(v.path="/"),S.wsOptions||(v.wsOptions={}),!r.default&&S.protocol==="wss"&&a.forEach(_=>{Object.prototype.hasOwnProperty.call(S,_)&&!Object.prototype.hasOwnProperty.call(S.wsOptions,_)&&(v.wsOptions[_]=S[_])}),v}function b(S){let v=d(S);if(v.hostname||(v.hostname=v.host),!v.hostname){if(typeof document>"u")throw new Error("Could not determine host. Specify host manually.");let _=new URL(document.URL);v.hostname=_.hostname,v.port||(v.port=Number(_.port))}return v.objectMode===void 0&&(v.objectMode=!(v.binary===!0||v.binary===void 0)),v}function y(S,v,_){i("createWebSocket"),i(`protocol: ${_.protocolId} ${_.protocolVersion}`);let x=_.protocolId==="MQIsdp"&&_.protocolVersion===3?"mqttv3.1":"mqtt";i(`creating new Websocket for url: ${v} and protocol: ${x}`);let M;return _.createWebsocket?M=_.createWebsocket(v,[x],_):M=new l.default(v,[x],_.wsOptions),M}function g(S,v){let _=v.protocolId==="MQIsdp"&&v.protocolVersion===3?"mqttv3.1":"mqtt",x=c(v,S),M;return v.createWebsocket?M=v.createWebsocket(x,[_],v):M=new WebSocket(x,[_]),M.binaryType="arraybuffer",M}var m=(S,v)=>{i("streamBuilder");let _=d(v),x=c(_,S),M=y(S,x,_),k=l.default.createWebSocketStream(M,_.wsOptions);return k.url=x,M.on("close",()=>{k.destroy()}),k},w=(S,v)=>{i("browserStreamBuilder");let _,x=b(v).browserBufferSize||1024*512,M=v.browserBufferTimeout||1e3,k=!v.objectMode,O=g(S,v),P=z(v,V,le);v.objectMode||(P._writev=s.writev.bind(P)),P.on("close",()=>{O.close()});let W=typeof O.addEventListener<"u";O.readyState===O.OPEN?(_=P,_.socket=O):(_=new s.BufferedDuplex(v,P,O),W?O.addEventListener("open",ee):O.onopen=ee),W?(O.addEventListener("close",T),O.addEventListener("error",F),O.addEventListener("message",H)):(O.onclose=T,O.onerror=F,O.onmessage=H);function z(G,D,de){let Z=new n.Transform({objectMode:G.objectMode});return Z._write=D,Z._flush=de,Z}function ee(){i("WebSocket onOpen"),_ instanceof s.BufferedDuplex&&_.socketReady()}function T(G){i("WebSocket onClose",G),_.end(),_.destroy()}function F(G){i("WebSocket onError",G);let D=new Error("WebSocket error");D.event=G,_.destroy(D)}function H(G){let{data:D}=G;D instanceof ArrayBuffer?D=t.Buffer.from(D):D=t.Buffer.from(D,"utf8"),P.push(D)}function V(G,D,de){if(O.bufferedAmount>x){setTimeout(V,M,G,D,de);return}k&&typeof G=="string"&&(G=t.Buffer.from(G,"utf8"));try{O.send(G)}catch(Z){return de(Z)}de()}function le(G){O.close(),G()}return _};e.default=r.default?w:m}),xl=he(e=>{ie(),re(),te();var o=e&&e.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(e,"__esModule",{value:!0}),e.connectAsync=void 0;var t=o(ht()),l=o((Cl(),Ie(ps))),h=o(zi()),n=o(yr());typeof Te?.nextTick!="function"&&(Te.nextTick=setImmediate);var r=(0,t.default)("mqttjs"),s={};n.default?(s.wx=Zn().default,s.wxs=Zn().default,s.ali=eo().default,s.alis=eo().default):(s.mqtt=Jn().default,s.tcp=Jn().default,s.ssl=Xn().default,s.tls=s.ssl,s.mqtts=Xn().default),s.ws=to().default,s.wss=to().default;function i(d){let b;d.auth&&(b=d.auth.match(/^(.+):(.+)$/),b?(d.username=b[1],d.password=b[2]):d.username=d.auth)}function a(d,b){if(r("connecting to an MQTT broker..."),typeof d=="object"&&!b&&(b=d,d=""),b=b||{},d&&typeof d=="string"){let m=l.default.parse(d,!0);if(m.port!=null&&(m.port=Number(m.port)),b=Object.assign(Object.assign({},m),b),b.protocol===null)throw new Error("Missing protocol");b.protocol=b.protocol.replace(/:$/,"")}if(i(b),b.query&&typeof b.query.clientId=="string"&&(b.clientId=b.query.clientId),b.cert&&b.key)if(b.protocol){if(["mqtts","wss","wxs","alis"].indexOf(b.protocol)===-1)switch(b.protocol){case"mqtt":b.protocol="mqtts";break;case"ws":b.protocol="wss";break;case"wx":b.protocol="wxs";break;case"ali":b.protocol="alis";break;default:throw new Error(`Unknown protocol for secure connection: "${b.protocol}"!`)}}else throw new Error("Missing secure protocol key");if(!s[b.protocol]){let m=["mqtts","wss"].indexOf(b.protocol)!==-1;b.protocol=["mqtt","mqtts","ws","wss","wx","wxs","ali","alis"].filter((w,S)=>m&&S%2===0?!1:typeof s[w]=="function")[0]}if(b.clean===!1&&!b.clientId)throw new Error("Missing clientId for unclean clients");b.protocol&&(b.defaultProtocol=b.protocol);function y(m){return b.servers&&((!m._reconnectCount||m._reconnectCount===b.servers.length)&&(m._reconnectCount=0),b.host=b.servers[m._reconnectCount].host,b.port=b.servers[m._reconnectCount].port,b.protocol=b.servers[m._reconnectCount].protocol?b.servers[m._reconnectCount].protocol:b.defaultProtocol,b.hostname=b.host,m._reconnectCount++),r("calling streambuilder for",b.protocol),s[b.protocol](m,b)}let g=new h.default(y,b);return g.on("error",()=>{}),g}function c(d,b,y=!0){return new Promise((g,m)=>{let w=a(d,b),S={connect:_=>{v(),g(w)},end:()=>{v(),g(w)},error:_=>{v(),w.end(),m(_)}};y===!1&&(S.close=()=>{S.error(new Error("Couldn't connect to server"))});function v(){Object.keys(S).forEach(_=>{w.off(_,S[_])})}Object.keys(S).forEach(_=>{w.on(_,S[_])})})}e.connectAsync=c,e.default=a}),ro=he(e=>{ie(),re(),te();var o=e&&e.__createBinding||(Object.create?function(y,g,m,w){w===void 0&&(w=m);var S=Object.getOwnPropertyDescriptor(g,m);(!S||("get"in S?!g.__esModule:S.writable||S.configurable))&&(S={enumerable:!0,get:function(){return g[m]}}),Object.defineProperty(y,w,S)}:function(y,g,m,w){w===void 0&&(w=m),y[w]=g[m]}),t=e&&e.__setModuleDefault||(Object.create?function(y,g){Object.defineProperty(y,"default",{enumerable:!0,value:g})}:function(y,g){y.default=g}),l=e&&e.__importStar||function(y){if(y&&y.__esModule)return y;var g={};if(y!=null)for(var m in y)m!=="default"&&Object.prototype.hasOwnProperty.call(y,m)&&o(g,y,m);return t(g,y),g},h=e&&e.__exportStar||function(y,g){for(var m in y)m!=="default"&&!Object.prototype.hasOwnProperty.call(g,m)&&o(g,y,m)},n=e&&e.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(e,"__esModule",{value:!0}),e.ReasonCodes=e.PingTimer=e.UniqueMessageIdProvider=e.DefaultMessageIdProvider=e.Store=e.MqttClient=e.connectAsync=e.connect=e.Client=void 0;var r=n(zi());e.MqttClient=r.default;var s=n(Ho());e.DefaultMessageIdProvider=s.default;var i=n(pl());e.UniqueMessageIdProvider=i.default;var a=n(zo());e.Store=a.default;var c=l(xl());e.connect=c.default,Object.defineProperty(e,"connectAsync",{enumerable:!0,get:function(){return c.connectAsync}});var d=n(ls());e.PingTimer=d.default,e.Client=r.default,h(zi(),e),h(Gt(),e);var b=mr();Object.defineProperty(e,"ReasonCodes",{enumerable:!0,get:function(){return b.ReasonCodes}})}),Ml=he(e=>{ie(),re(),te();var o=e&&e.__createBinding||(Object.create?function(r,s,i,a){a===void 0&&(a=i);var c=Object.getOwnPropertyDescriptor(s,i);(!c||("get"in c?!s.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return s[i]}}),Object.defineProperty(r,a,c)}:function(r,s,i,a){a===void 0&&(a=i),r[a]=s[i]}),t=e&&e.__setModuleDefault||(Object.create?function(r,s){Object.defineProperty(r,"default",{enumerable:!0,value:s})}:function(r,s){r.default=s}),l=e&&e.__importStar||function(r){if(r&&r.__esModule)return r;var s={};if(r!=null)for(var i in r)i!=="default"&&Object.prototype.hasOwnProperty.call(r,i)&&o(s,r,i);return t(s,r),s},h=e&&e.__exportStar||function(r,s){for(var i in r)i!=="default"&&!Object.prototype.hasOwnProperty.call(s,i)&&o(s,r,i)};Object.defineProperty(e,"__esModule",{value:!0});var n=l(ro());e.default=n,h(ro(),e)});const Ul=Ml();/*! Bundled license information:

@jspm/core/nodelibs/browser/buffer.js:
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)
*/export{Ul as m};
